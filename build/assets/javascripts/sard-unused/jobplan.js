function getTarget(t){return t.target?getNonIETarget(t):t.srcElement?getIETarget(t):void 0}function getNonIETarget(t){return 3==t.target.nodeType?getSafariTextTarget(t):t.target}function getSafariTextTarget(t){return t.target.parentNode}function getIETarget(t){return t.srcElement}function pretty_error_messages(t){var e="";if(t){e="<p>";for(var n=t.length,i=0;i<n;i++)e=e+t[i]+"</br>";return e+"</p>"}return e}(function(){var t=this,e=t._,n=Array.prototype,i=Object.prototype,s=Function.prototype,o=n.push,r=n.slice,a=n.concat,l=i.toString,c=i.hasOwnProperty,p=Array.isArray,u=Object.keys,h=s.bind,d=function(t){return t instanceof d?t:this instanceof d?void(this._wrapped=t):new d(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=d),exports._=d):t._=d,d.VERSION="1.7.0";var _=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,s){return t.call(e,n,i,s)};case 4:return function(n,i,s,o){return t.call(e,n,i,s,o)}}return function(){return t.apply(e,arguments)}};d.iteratee=function(t,e,n){return null==t?d.identity:d.isFunction(t)?_(t,e,n):d.isObject(t)?d.matches(t):d.property(t)},d.each=d.forEach=function(t,e,n){if(null==t)return t;e=_(e,n);var i,s=t.length;if(s===+s)for(i=0;i<s;i++)e(t[i],i,t);else{var o=d.keys(t);for(i=0,s=o.length;i<s;i++)e(t[o[i]],o[i],t)}return t},d.map=d.collect=function(t,e,n){if(null==t)return[];e=d.iteratee(e,n);for(var i=t.length!==+t.length&&d.keys(t),s=(i||t).length,o=Array(s),r,a=0;a<s;a++)r=i?i[a]:a,o[a]=e(t[r],r,t);return o};var f="Reduce of empty array with no initial value";d.reduce=d.foldl=d.inject=function(t,e,n,i){null==t&&(t=[]),e=_(e,i,4);var s=t.length!==+t.length&&d.keys(t),o=(s||t).length,r=0,a;if(arguments.length<3){if(!o)throw new TypeError(f);n=t[s?s[r++]:r++]}for(;r<o;r++)a=s?s[r]:r,n=e(n,t[a],a,t);return n},d.reduceRight=d.foldr=function(t,e,n,i){null==t&&(t=[]),e=_(e,i,4);var s=t.length!==+t.length&&d.keys(t),o=(s||t).length,r;if(arguments.length<3){if(!o)throw new TypeError(f);n=t[s?s[--o]:--o]}for(;o--;)r=s?s[o]:o,n=e(n,t[r],r,t);return n},d.find=d.detect=function(t,e,n){var i;return e=d.iteratee(e,n),d.some(t,function(t,n,s){if(e(t,n,s))return i=t,!0}),i},d.filter=d.select=function(t,e,n){var i=[];return null==t?i:(e=d.iteratee(e,n),d.each(t,function(t,n,s){e(t,n,s)&&i.push(t)}),i)},d.reject=function(t,e,n){return d.filter(t,d.negate(d.iteratee(e)),n)},d.every=d.all=function(t,e,n){if(null==t)return!0;e=d.iteratee(e,n);var i=t.length!==+t.length&&d.keys(t),s=(i||t).length,o,r;for(o=0;o<s;o++)if(r=i?i[o]:o,!e(t[r],r,t))return!1;return!0},d.some=d.any=function(t,e,n){if(null==t)return!1;e=d.iteratee(e,n);var i=t.length!==+t.length&&d.keys(t),s=(i||t).length,o,r;for(o=0;o<s;o++)if(r=i?i[o]:o,e(t[r],r,t))return!0;return!1},d.contains=d.include=function(t,e){return null!=t&&(t.length!==+t.length&&(t=d.values(t)),d.indexOf(t,e)>=0)},d.invoke=function(t,e){var n=r.call(arguments,2),i=d.isFunction(e);return d.map(t,function(t){return(i?e:t[e]).apply(t,n)})},d.pluck=function(t,e){return d.map(t,d.property(e))},d.where=function(t,e){return d.filter(t,d.matches(e))},d.findWhere=function(t,e){return d.find(t,d.matches(e))},d.max=function(t,e,n){var i=-1/0,s=-1/0,o,r;if(null==e&&null!=t){t=t.length===+t.length?t:d.values(t);for(var a=0,l=t.length;a<l;a++)(o=t[a])>i&&(i=o)}else e=d.iteratee(e,n),d.each(t,function(t,n,o){((r=e(t,n,o))>s||r===-1/0&&i===-1/0)&&(i=t,s=r)});return i},d.min=function(t,e,n){var i=1/0,s=1/0,o,r;if(null==e&&null!=t){t=t.length===+t.length?t:d.values(t);for(var a=0,l=t.length;a<l;a++)(o=t[a])<i&&(i=o)}else e=d.iteratee(e,n),d.each(t,function(t,n,o){((r=e(t,n,o))<s||r===1/0&&i===1/0)&&(i=t,s=r)});return i},d.shuffle=function(t){for(var e=t&&t.length===+t.length?t:d.values(t),n=e.length,i=Array(n),s=0,o;s<n;s++)o=d.random(0,s),o!==s&&(i[s]=i[o]),i[o]=e[s];return i},d.sample=function(t,e,n){return null==e||n?(t.length!==+t.length&&(t=d.values(t)),t[d.random(t.length-1)]):d.shuffle(t).slice(0,Math.max(0,e))},d.sortBy=function(t,e,n){return e=d.iteratee(e,n),d.pluck(d.map(t,function(t,n,i){return{value:t,index:n,criteria:e(t,n,i)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return t.index-e.index}),"value")};var m=function(t){return function(e,n,i){var s={};return n=d.iteratee(n,i),d.each(e,function(i,o){var r=n(i,o,e);t(s,i,r)}),s}};d.groupBy=m(function(t,e,n){d.has(t,n)?t[n].push(e):t[n]=[e]}),d.indexBy=m(function(t,e,n){t[n]=e}),d.countBy=m(function(t,e,n){d.has(t,n)?t[n]++:t[n]=1}),d.sortedIndex=function(t,e,n,i){n=d.iteratee(n,i,1);for(var s=n(e),o=0,r=t.length;o<r;){var a=o+r>>>1;n(t[a])<s?o=a+1:r=a}return o},d.toArray=function(t){return t?d.isArray(t)?r.call(t):t.length===+t.length?d.map(t,d.identity):d.values(t):[]},d.size=function(t){return null==t?0:t.length===+t.length?t.length:d.keys(t).length},d.partition=function(t,e,n){e=d.iteratee(e,n);var i=[],s=[];return d.each(t,function(t,n,o){(e(t,n,o)?i:s).push(t)}),[i,s]},d.first=d.head=d.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:e<0?[]:r.call(t,0,e)},d.initial=function(t,e,n){return r.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},d.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:r.call(t,Math.max(t.length-e,0))},d.rest=d.tail=d.drop=function(t,e,n){return r.call(t,null==e||n?1:e)},d.compact=function(t){return d.filter(t,d.identity)};var y=function(t,e,n,i){if(e&&d.every(t,d.isArray))return a.apply(i,t);for(var s=0,r=t.length;s<r;s++){var l=t[s];d.isArray(l)||d.isArguments(l)?e?o.apply(i,l):y(l,e,n,i):n||i.push(l)}return i};d.flatten=function(t,e){return y(t,e,!1,[])},d.without=function(t){return d.difference(t,r.call(arguments,1))},d.uniq=d.unique=function(t,e,n,i){if(null==t)return[];d.isBoolean(e)||(i=n,n=e,e=!1),null!=n&&(n=d.iteratee(n,i));for(var s=[],o=[],r=0,a=t.length;r<a;r++){var l=t[r];if(e)(!r||o!==l)&&s.push(l),o=l;else if(n){var c=n(l,r,t);d.indexOf(o,c)<0&&(o.push(c),s.push(l))}else d.indexOf(s,l)<0&&s.push(l)}return s},d.union=function(){return d.uniq(y(arguments,!0,!0,[]))},d.intersection=function(t){if(null==t)return[];for(var e=[],n=arguments.length,i=0,s=t.length;i<s;i++){var o=t[i];if(!d.contains(e,o)){for(var r=1;r<n&&d.contains(arguments[r],o);r++);r===n&&e.push(o)}}return e},d.difference=function(t){var e=y(r.call(arguments,1),!0,!0,[]);return d.filter(t,function(t){return!d.contains(e,t)})},d.zip=function(t){if(null==t)return[];for(var e=d.max(arguments,"length").length,n=Array(e),i=0;i<e;i++)n[i]=d.pluck(arguments,i);return n},d.object=function(t,e){if(null==t)return{};for(var n={},i=0,s=t.length;i<s;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},d.indexOf=function(t,e,n){if(null==t)return-1;var i=0,s=t.length;if(n){if("number"!=typeof n)return i=d.sortedIndex(t,e),t[i]===e?i:-1;i=n<0?Math.max(0,s+n):n}for(;i<s;i++)if(t[i]===e)return i;return-1},d.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=t.length;for("number"==typeof n&&(i=n<0?i+n+1:Math.min(i,n+1));--i>=0;)if(t[i]===e)return i;return-1},d.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=n||1;for(var i=Math.max(Math.ceil((e-t)/n),0),s=Array(i),o=0;o<i;o++,t+=n)s[o]=t;return s};var v=function(){};d.bind=function(t,e){var n,i;if(h&&t.bind===h)return h.apply(t,r.call(arguments,1));if(!d.isFunction(t))throw new TypeError("Bind must be called on a function");return n=r.call(arguments,2),i=function(){if(this instanceof i){v.prototype=t.prototype;var s=new v;v.prototype=null;var o=t.apply(s,n.concat(r.call(arguments)));return d.isObject(o)?o:s}return t.apply(e,n.concat(r.call(arguments)))}},d.partial=function(t){var e=r.call(arguments,1);return function(){for(var n=0,i=e.slice(),s=0,o=i.length;s<o;s++)i[s]===d&&(i[s]=arguments[n++]);for(;n<arguments.length;)i.push(arguments[n++]);return t.apply(this,i)}},d.bindAll=function(t){var e,n=arguments.length,i;if(n<=1)throw new Error("bindAll must be passed function names");for(e=1;e<n;e++)i=arguments[e],t[i]=d.bind(t[i],t);return t},d.memoize=function(t,e){var n=function(i){var s=n.cache,o=e?e.apply(this,arguments):i;return d.has(s,o)||(s[o]=t.apply(this,arguments)),s[o]};return n.cache={},n},d.delay=function(t,e){var n=r.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},d.defer=function(t){return d.delay.apply(d,[t,1].concat(r.call(arguments,1)))},d.throttle=function(t,e,n){var i,s,o,r=null,a=0;n||(n={});var l=function(){a=!1===n.leading?0:d.now(),r=null,o=t.apply(i,s),r||(i=s=null)};return function(){var c=d.now();!a&&!1===n.leading&&(a=c);var p=e-(c-a);return i=this,s=arguments,p<=0||p>e?(clearTimeout(r),r=null,a=c,o=t.apply(i,s),r||(i=s=null)):!r&&!1!==n.trailing&&(r=setTimeout(l,p)),o}},d.debounce=function(t,e,n){var i,s,o,r,a,l=function(){var c=d.now()-r;c<e&&c>0?i=setTimeout(l,e-c):(i=null,n||(a=t.apply(o,s),i||(o=s=null)))};return function(){o=this,s=arguments,r=d.now();var c=n&&!i;return i||(i=setTimeout(l,e)),c&&(a=t.apply(o,s),o=s=null),a}},d.wrap=function(t,e){return d.partial(e,t)},d.negate=function(t){return function(){return!t.apply(this,arguments)}},d.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,i=t[e].apply(this,arguments);n--;)i=t[n].call(this,i);return i}},d.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},d.before=function(t,e){var n;return function(){return--t>0?n=e.apply(this,arguments):e=null,n}},d.once=d.partial(d.before,2),d.keys=function(t){if(!d.isObject(t))return[];if(u)return u(t);var e=[];for(var n in t)d.has(t,n)&&e.push(n);return e},d.values=function(t){for(var e=d.keys(t),n=e.length,i=Array(n),s=0;s<n;s++)i[s]=t[e[s]];return i},d.pairs=function(t){for(var e=d.keys(t),n=e.length,i=Array(n),s=0;s<n;s++)i[s]=[e[s],t[e[s]]];return i},d.invert=function(t){for(var e={},n=d.keys(t),i=0,s=n.length;i<s;i++)e[t[n[i]]]=n[i];return e},d.functions=d.methods=function(t){var e=[];for(var n in t)d.isFunction(t[n])&&e.push(n);return e.sort()},d.extend=function(t){if(!d.isObject(t))return t;for(var e,n,i=1,s=arguments.length;i<s;i++){e=arguments[i];for(n in e)c.call(e,n)&&(t[n]=e[n])}return t},d.pick=function(t,e,n){var i={},s;if(null==t)return i;if(d.isFunction(e)){e=_(e,n);for(s in t){var o=t[s];e(o,s,t)&&(i[s]=o)}}else{var l=a.apply([],r.call(arguments,1));t=new Object(t);for(var c=0,p=l.length;c<p;c++)(s=l[c])in t&&(i[s]=t[s])}return i},d.omit=function(t,e,n){if(d.isFunction(e))e=d.negate(e);else{var i=d.map(a.apply([],r.call(arguments,1)),String);e=function(t,e){return!d.contains(i,e)}}return d.pick(t,e,n)},d.defaults=function(t){if(!d.isObject(t))return t;for(var e=1,n=arguments.length;e<n;e++){var i=arguments[e];for(var s in i)void 0===t[s]&&(t[s]=i[s])}return t},d.clone=function(t){return d.isObject(t)?d.isArray(t)?t.slice():d.extend({},t):t},d.tap=function(t,e){return e(t),t};var b=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof d&&(t=t._wrapped),e instanceof d&&(e=e._wrapped);var s=l.call(t);if(s!==l.call(e))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=n.length;o--;)if(n[o]===t)return i[o]===e;var r=t.constructor,a=e.constructor;if(r!==a&&"constructor"in t&&"constructor"in e&&!(d.isFunction(r)&&r instanceof r&&d.isFunction(a)&&a instanceof a))return!1;n.push(t),i.push(e);var c,p;if("[object Array]"===s){if(c=t.length,p=c===e.length)for(;c--&&(p=b(t[c],e[c],n,i)););}else{var u=d.keys(t),h;if(c=u.length,p=d.keys(e).length===c)for(;c--&&(h=u[c],p=d.has(e,h)&&b(t[h],e[h],n,i)););}return n.pop(),i.pop(),p};d.isEqual=function(t,e){return b(t,e,[],[])},d.isEmpty=function(t){if(null==t)return!0;if(d.isArray(t)||d.isString(t)||d.isArguments(t))return 0===t.length;for(var e in t)if(d.has(t,e))return!1;return!0},d.isElement=function(t){return!!t&&1===t.nodeType},d.isArray=p||function(t){return"[object Array]"===l.call(t)},d.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},d.each(["Arguments","Function","String","Number","Date","RegExp"],function(t){d["is"+t]=function(e){return l.call(e)==="[object "+t+"]"}}),d.isArguments(arguments)||(d.isArguments=function(t){return d.has(t,"callee")}),"function"!=typeof/./&&(d.isFunction=function(t){return"function"==typeof t||!1}),d.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},d.isNaN=function(t){return d.isNumber(t)&&t!==+t},d.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===l.call(t)},d.isNull=function(t){return null===t},d.isUndefined=function(t){return void 0===t},d.has=function(t,e){return null!=t&&c.call(t,e)},d.noConflict=function(){return t._=e,this},d.identity=function(t){return t},d.constant=function(t){return function(){return t}},d.noop=function(){},d.property=function(t){return function(e){return e[t]}},d.matches=function(t){var e=d.pairs(t),n=e.length;return function(t){if(null==t)return!n;t=new Object(t);for(var i=0;i<n;i++){var s=e[i],o=s[0];if(s[1]!==t[o]||!(o in t))return!1}return!0}},d.times=function(t,e,n){var i=Array(Math.max(0,t));e=_(e,n,1);for(var s=0;s<t;s++)i[s]=e(s);return i},d.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},d.now=Date.now||function(){return(new Date).getTime()};var g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},w=d.invert(g),k=function(t){var e=function(e){return t[e]},n="(?:"+d.keys(t).join("|")+")",i=RegExp(n),s=RegExp(n,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(s,e):t}};d.escape=k(g),d.unescape=k(w),d.result=function(t,e){if(null!=t){var n=t[e];return d.isFunction(n)?t[e]():n}};var P=0;d.uniqueId=function(t){var e=++P+"";return t?t+e:e},d.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var A=/(.)^/,x={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},S=/\\|'|\r|\n|\u2028|\u2029/g,T=function(t){return"\\"+x[t]};d.template=function(t,e,n){!e&&n&&(e=n),e=d.defaults({},e,d.templateSettings);var i=RegExp([(e.escape||A).source,(e.interpolate||A).source,(e.evaluate||A).source].join("|")+"|$","g"),s=0,o="__p+='";t.replace(i,function(e,n,i,r,a){return o+=t.slice(s,a).replace(/\\|'|\r|\n|\u2028|\u2029/g,T),s=a+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?o+="'+\n((__t=("+i+"))==null?'':__t)+\n'":r&&(o+="';\n"+r+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var r=new Function(e.variable||"obj","_",o)}catch(t){throw t.source=o,t}var a=function(t){return r.call(this,t,d)},l=e.variable||"obj";return a.source="function("+l+"){\n"+o+"}",a},d.chain=function(t){var e=d(t);return e._chain=!0,e};var H=function(t){return this._chain?d(t).chain():t};d.mixin=function(t){d.each(d.functions(t),function(e){var n=d[e]=t[e];d.prototype[e]=function(){var t=[this._wrapped];return o.apply(t,arguments),H.call(this,n.apply(d,t))}})},d.mixin(d),d.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=n[t];d.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),("shift"===t||"splice"===t)&&0===n.length&&delete n[0],H.call(this,n)}}),d.each(["concat","join","slice"],function(t){var e=n[t];d.prototype[t]=function(){return H.call(this,e.apply(this._wrapped,arguments))}}),d.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return d})}).call(this),function(t,e){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(n,i,s){t.Backbone=e(t,s,n,i)});else if("undefined"!=typeof exports){var n=require("underscore");e(t,exports,n)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,n,i){var s=t.Backbone,o=[],r=o.push,a=o.slice,l=o.splice;e.VERSION="1.1.2",e.$=i,e.noConflict=function(){return t.Backbone=s,this},e.emulateHTTP=!1,e.emulateJSON=!1;var c=e.Events={on:function(t,e,n){return u(this,"on",t,[e,n])&&e?(this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push({callback:e,context:n,ctx:n||this}),this):this},once:function(t,e,i){if(!u(this,"once",t,[e,i])||!e)return this;var s=this,o=n.once(function(){s.off(t,o),e.apply(this,arguments)});return o._callback=e,this.on(t,o,i)},off:function(t,e,i){var s,o,r,a,l,c,p,h;if(!this._events||!u(this,"off",t,[e,i]))return this;if(!t&&!e&&!i)return this._events=void 0,this;for(a=t?[t]:n.keys(this._events),l=0,c=a.length;l<c;l++)if(t=a[l],r=this._events[t]){if(this._events[t]=s=[],e||i)for(p=0,h=r.length;p<h;p++)o=r[p],(e&&e!==o.callback&&e!==o.callback._callback||i&&i!==o.context)&&s.push(o);s.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=a.call(arguments,1);if(!u(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&h(n,e),i&&h(i,arguments),this},stopListening:function(t,e,i){var s=this._listeningTo;if(!s)return this;var o=!e&&!i;!i&&"object"==typeof e&&(i=this),t&&((s={})[t._listenId]=t);for(var r in s)t=s[r],t.off(e,i,this),(o||n.isEmpty(t._events))&&delete this._listeningTo[r];return this}},p=/\s+/,u=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var s in n)t[e].apply(t,[s,n[s]].concat(i));return!1}if(p.test(n)){for(var o=n.split(p),r=0,a=o.length;r<a;r++)t[e].apply(t,[o[r]].concat(i));return!1}return!0},h=function(t,e){var n,i=-1,s=t.length,o=e[0],r=e[1],a=e[2];switch(e.length){case 0:for(;++i<s;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<s;)(n=t[i]).callback.call(n.ctx,o);return;case 2:for(;++i<s;)(n=t[i]).callback.call(n.ctx,o,r);return;case 3:for(;++i<s;)(n=t[i]).callback.call(n.ctx,o,r,a);return;default:for(;++i<s;)(n=t[i]).callback.apply(n.ctx,e);return}},d={listenTo:"on",listenToOnce:"once"};n.each(d,function(t,e){c[e]=function(e,i,s){return(this._listeningTo||(this._listeningTo={}))[e._listenId||(e._listenId=n.uniqueId("l"))]=e,!s&&"object"==typeof i&&(s=this),e[t](i,s,this),this}}),c.bind=c.on,c.unbind=c.off,n.extend(e,c);var _=e.Model=function(t,e){var i=t||{};e||(e={}),this.cid=n.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(i=this.parse(i,e)||{}),i=n.defaults({},i,n.result(this,"defaults")),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(_.prototype,c,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,i){var s,o,r,a,l,c,p,u;if(null==t)return this;if("object"==typeof t?(o=t,i=e):(o={})[t]=e,i||(i={}),!this._validate(o,i))return!1;r=i.unset,l=i.silent,a=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=n.clone(this.attributes),this.changed={}),u=this.attributes,p=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(s in o)e=o[s],n.isEqual(u[s],e)||a.push(s),n.isEqual(p[s],e)?delete this.changed[s]:this.changed[s]=e,r?delete u[s]:u[s]=e;if(!l){a.length&&(this._pending=i);for(var h=0,d=a.length;h<d;h++)this.trigger("change:"+a[h],this,u[a[h]],i)}if(c)return this;if(!l)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&n.clone(this.changed);var e,i=!1,s=this._changing?this._previousAttributes:this.attributes;for(var o in t)n.isEqual(s[o],e=t[o])||((i||(i={}))[o]=e);return i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=t?n.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,i=t.success;return t.success=function(n){if(!e.set(e.parse(n,t),t))return!1;i&&i(e,n,t),e.trigger("sync",e,n,t)},I(this,t),this.sync("read",this,t)},save:function(t,e,i){var s,o,r,a=this.attributes;if(null==t||"object"==typeof t?(s=t,i=e):(s={})[t]=e,i=n.extend({validate:!0},i),s&&!i.wait){if(!this.set(s,i))return!1}else if(!this._validate(s,i))return!1;s&&i.wait&&(this.attributes=n.extend({},a,s)),void 0===i.parse&&(i.parse=!0);var l=this,c=i.success;return i.success=function(t){l.attributes=a;var e=l.parse(t,i);if(i.wait&&(e=n.extend(s||{},e)),n.isObject(e)&&!l.set(e,i))return!1;c&&c(l,t,i),l.trigger("sync",l,t,i)},I(this,i),o=this.isNew()?"create":i.patch?"patch":"update","patch"===o&&(i.attrs=s),r=this.sync(o,this,i),s&&i.wait&&(this.attributes=a),r},destroy:function(t){t=t?n.clone(t):{};var e=this,i=t.success,s=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(n){(t.wait||e.isNew())&&s(),i&&i(e,n,t),e.isNew()||e.trigger("sync",e,n,t)},this.isNew())return t.success(),!1;I(this,t);var o=this.sync("delete",this,t);return t.wait||s(),o},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||R();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return!i||(this.trigger("invalid",this,i,n.extend(e,{validationError:i})),!1)}});var f=["keys","values","pairs","invert","pick","omit"];n.each(f,function(t){_.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.attributes),n[t].apply(n,e)}});var m=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},y={add:!0,remove:!0,merge:!0},v={add:!0,remove:!1};n.extend(m.prototype,c,{model:_,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,v))},remove:function(t,e){var i=!n.isArray(t);t=i?[t]:n.clone(t),e||(e={});var s,o,r,a;for(s=0,o=t.length;s<o;s++)(a=t[s]=this.get(t[s]))&&(delete this._byId[a.id],delete this._byId[a.cid],r=this.indexOf(a),this.models.splice(r,1),this.length--,e.silent||(e.index=r,a.trigger("remove",a,this,e)),this._removeReference(a,e));return i?t[0]:t},set:function(t,e){e=n.defaults({},e,y),e.parse&&(t=this.parse(t,e));var i=!n.isArray(t);t=i?t?[t]:[]:n.clone(t);var s,o,r,a,l,c,p,u=e.at,h=this.model,d=this.comparator&&null==u&&!1!==e.sort,f=n.isString(this.comparator)?this.comparator:null,m=[],v=[],b={},g=e.add,w=e.merge,k=e.remove,P=!(d||!g||!k)&&[];for(s=0,o=t.length;s<o;s++){if(l=t[s]||{},r=l instanceof _?a=l:l[h.prototype.idAttribute||"id"],c=this.get(r))k&&(b[c.cid]=!0),w&&(l=l===a?a.attributes:l,e.parse&&(l=c.parse(l,e)),c.set(l,e),d&&!p&&c.hasChanged(f)&&(p=!0)),t[s]=c;else if(g){if(!(a=t[s]=this._prepareModel(l,e)))continue;m.push(a),this._addReference(a,e)}a=c||a,P&&(a.isNew()||!b[a.id])&&P.push(a),b[a.id]=!0}if(k){for(s=0,o=this.length;s<o;++s)b[(a=this.models[s]).cid]||v.push(a);v.length&&this.remove(v,e)}if(m.length||P&&P.length)if(d&&(p=!0),this.length+=m.length,null!=u)for(s=0,o=m.length;s<o;s++)this.models.splice(u+s,0,m[s]);else{P&&(this.models.length=0);var A=P||m;for(s=0,o=A.length;s<o;s++)this.models.push(A[s])}if(p&&this.sort({silent:!0}),!e.silent){for(s=0,o=m.length;s<o;s++)(a=m[s]).trigger("add",a,this,e);(p||P&&P.length)&&this.trigger("sort",this,e)}return i?t[0]:t},reset:function(t,e){e||(e={});for(var i=0,s=this.models.length;i<s;i++)this._removeReference(this.models[i],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return a.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return n.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return n.invoke(this.models,"get",t)},fetch:function(t){t=t?n.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,i=this;return t.success=function(n){var s=t.reset?"reset":"set";i[s](n,t),e&&e(i,n,t),i.trigger("sync",i,n,t)},I(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?n.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var i=this,s=e.success;return e.success=function(t,n){e.wait&&i.add(t,e),s&&s(t,n,e)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof _)return t;e=e?n.clone(e):{},e.collection=this;var i=new this.model(t,e);return i.validationError?(this.trigger("invalid",this,i.validationError,e),!1):i},_addReference:function(t,e){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,i),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(b,function(t){m.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.models),n[t].apply(n,e)}});var g=["groupBy","countBy","sortBy","indexBy"];n.each(g,function(t){m.prototype[t]=function(e,i){var s=n.isFunction(e)?e:function(t){return t.get(e)};return n[t](this.models,s,i)}});var w=e.View=function(t){this.cid=n.uniqueId("view"),t||(t={}),n.extend(this,n.pick(t,P)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},k=/^(\S+)\s*(.*)$/,P=["model","collection","el","id","attributes","className","tagName","events"];n.extend(w.prototype,c,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,n){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],!1!==n&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=n.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var i=t[e];if(n.isFunction(i)||(i=this[t[e]]),i){var s=e.match(/^(\S+)\s*(.*)$/),o=s[1],r=s[2];i=n.bind(i,this),o+=".delegateEvents"+this.cid,""===r?this.$el.on(o,i):this.$el.on(o,r,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t.class=n.result(this,"className"));var i=e.$("<"+n.result(this,"tagName")+">").attr(t);this.setElement(i,!1)}}}),e.sync=function(t,i,s){var o=x[t];n.defaults(s||(s={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var r={type:o,dataType:"json"};if(s.url||(r.url=n.result(i,"url")||R()),null==s.data&&i&&("create"===t||"update"===t||"patch"===t)&&(r.contentType="application/json",r.data=JSON.stringify(s.attrs||i.toJSON(s))),s.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),s.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){r.type="POST",s.emulateJSON&&(r.data._method=o);var a=s.beforeSend;s.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",o),a)return a.apply(this,arguments)}}"GET"!==r.type&&!s.emulateJSON&&(r.processData=!1),"PATCH"===r.type&&A&&(r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=s.xhr=e.ajax(n.extend(r,s));return i.trigger("request",i,l,s),l};var A=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),x={create:"POST",update:"PUT",patch:"PUT",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var S=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},T=/\((.*?)\)/g,H=/(\(\?)?:\w+/g,J=/\*\w+/g,j=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(S.prototype,c,{initialize:function(){},route:function(t,i,s){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(i)&&(s=i,i=""),s||(s=this[i]);var o=this;return e.history.route(t,function(n){var r=o._extractParameters(t,n);o.execute(s,r),o.trigger.apply(o,["route:"+i].concat(r)),o.trigger("route",i,r),e.history.trigger("route",o,i,r)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(/[\-{}\[\]+?.,\\\^$|#\s]/g,"\\$&").replace(/\((.*?)\)/g,"(?:$1)?").replace(/(\(\?)?:\w+/g,function(t,e){return e?t:"([^/?]+)"}).replace(/\*\w+/g,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return n.map(i,function(t,e){return e===i.length-1?t||null:t?decodeURIComponent(t):null})}});var E=e.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},C=/^[#\/]|\s+$/g,O=/^\/+|\/+$/g,N=/msie [\w.]+/,V=/\/$/,F=/#.*$/;E.started=!1,n.extend(E.prototype,c,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(/\/$/,"");t.indexOf(n)||(t=t.slice(n.length))}else t=this.getHash();return t.replace(C,"")},start:function(t){if(E.started)throw new Error("Backbone.history has already been started");E.started=!0,
this.options=n.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),s=document.documentMode,o=N.exec(navigator.userAgent.toLowerCase())&&(!s||s<=7);if(this.root=("/"+this.root+"/").replace(/^\/+|\/+$/g,"/"),o&&this._wantsHashChange){var r=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=r.hide().appendTo("body")[0].contentWindow,this.navigate(i)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!o?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace(C,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),E.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(t){return t=this.fragment=this.getFragment(t),n.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0})},navigate:function(t,e){if(!E.started)return!1;e&&!0!==e||(e={trigger:!!e});var n=this.root+(t=this.getFragment(t||""));if(t=t.replace(/#.*$/,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),e.history=new E;var M=function(t,e){var i=this,s;s=t&&n.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)},n.extend(s,i,e);var o=function(){this.constructor=s};return o.prototype=i.prototype,s.prototype=new o,t&&n.extend(s.prototype,t),s.__super__=i.prototype,s};_.extend=m.extend=S.extend=w.extend=E.extend=M;var R=function(){throw new Error('A "url" property or function must be specified')},I=function(t,e){var n=e.error;e.error=function(i){n&&n(t,i,e),t.trigger("error",t,i,e)}};return e}),function(t){"function"==typeof define&&define.amd?define(["underscore","backbone","exports"],t):"object"==typeof exports?t(require("underscore"),require("backbone"),exports):t(_,Backbone,{})}(function(t,e,n){e.Stickit=n,n._handlers=[],n.addHandler=function(e){e=t.map(t.flatten([e]),function(e){return t.defaults({},e,{updateModel:!0,updateView:!0,updateMethod:"text"})}),this._handlers=this._handlers.concat(e)},n.ViewMixin={_modelBindings:null,unstickit:function(e,n){if(t.isObject(n))return void t.each(n,function(t,n){this.unstickit(e,n)},this);var i=[],s=[];this._modelBindings=t.reject(this._modelBindings,function(t){if(!(e&&t.model!==e||n&&t.config.selector!=n))return t.model.off(t.event,t.fn),s.push(t.config._destroy),i.push(t.model),!0}),t.invoke(t.uniq(i),"trigger","stickit:unstuck",this.cid),t.each(t.uniq(s),function(t){t.call(this)},this),this.$el.off(".stickit"+(e?"."+e.cid:""),n)},stickit:function(e,n){var i=e||this.model,s=n||t.result(this,"bindings")||{};this._modelBindings||(this._modelBindings=[]),this.addBinding(i,s);var o=this.remove;return o.stickitWrapped||(this.remove=function(){var t=this;return this.unstickit(),o&&(t=o.apply(this,arguments)),t}),this.remove.stickitWrapped=!0,this},addBinding:function(e,n,s){var f=e||this.model,m=".stickit."+f.cid;if(s=s||{},t.isObject(n)){var y=n;return void t.each(y,function(t,e){this.addBinding(f,e,t)},this)}var v=":el"===n?this.$el:this.$(n);if(this.unstickit(f,n),v.length){t.isString(s)&&(s={observe:s}),t.isFunction(s.observe)&&(s.observe=s.observe.call(this));var b=p(v,s),g=b.observe;b.selector=n,b.view=this;var w=b.bindId=t.uniqueId(),k=t.extend({stickitChange:b},b.setOptions);if(b._destroy=function(){o.call(this,b.destroy,v,f,b)},u(v,b,f,g),d(v,b,f,g),h(v,b,f,g),g){t.each(b.events,function(e){var s=e+m,a=function(t){var e=o.call(this,b.getVal,v,t,b,i.call(arguments,1));r(b.updateModel,e,t,b)&&l(f,g,e,k,b)},c=":el"===n?"":n;this.$el.on(s,c,t.bind(a,this))},this),t.each(t.flatten([g]),function(t){a(f,"change:"+t,b,function(t,e,n){if((n&&n.stickitChange&&n.stickitChange.bindId)!==w){var i=c(f,g,b);_(v,b,i,f)}})});var P=c(f,g,b);_(v,b,P,f,!0)}o.call(this,b.initialize,v,f,b)}}},t.extend(e.View.prototype,n.ViewMixin);var i=[].slice,s=function(e,n){var i=(n||"").split("."),s=t.reduce(i,function(t,e){return t[e]},e);return null==s?e:s},o=function(e){if(e=t.isString(e)?s(this,e):e)return e.apply(this,i.call(arguments,1))},r=function(e,n,i){if(t.isBoolean(e))return e;if(t.isFunction(e)||t.isString(e)){var s=t.last(arguments).view;return o.apply(s,arguments)}return!1},a=function(t,e,n,i){var s=n.view;t.on(e,i,s),s._modelBindings.push({model:t,event:e,fn:i,config:n})},l=function(e,n,i,s,r){var a={},l=r.view;r.onSet&&(i=o.call(l,r.onSet,i,r)),r.set?o.call(l,r.set,n,i,s,r):(a[n]=i,t.isArray(n)&&t.isArray(i)&&(a=t.reduce(n,function(e,n,s){return e[n]=t.has(i,s)?i[s]:null,e},{})),e.set(a,s))},c=function(e,n,i){var s=i.view,r=function(t){return e[i.escape?"escape":"get"](t)},a=function(t){return null==t?"":t},l=t.isArray(n)?t.map(n,r):r(n);return i.onGet&&(l=o.call(s,i.onGet,l,i)),t.isArray(l)?t.map(l,a):a(l)},p=n.getConfiguration=function(e,i){var s=[{updateModel:!1,updateMethod:"text",update:function(t,e,n,i){t[i.updateMethod]&&t[i.updateMethod](e)},getVal:function(t,e,n){return t[n.updateMethod]()}}];s=s.concat(t.filter(n._handlers,function(t){return e.is(t.selector)})),s.push(i);var o=t.extend.apply(t,s);return t.has(o,"updateView")||(o.updateView=!o.visible),o},u=function(e,n,i,s){var o=["autofocus","autoplay","async","checked","controls","defer","disabled","hidden","indeterminate","loop","multiple","open","readonly","required","scoped","selected"],r=n.view;t.each(n.attributes||[],function(l){l=t.clone(l),l.view=r;var p="",u=l.observe||(l.observe=s),h=function(){var n=t.contains(o,l.name)?"prop":"attr",s=c(i,u,l);"class"===l.name?(e.removeClass(p).addClass(s),p=s):e[n](l.name,s)};t.each(t.flatten([u]),function(t){a(i,"change:"+t,n,h)}),h()})},h=function(e,n,i,s){t.each(n.classes||[],function(s,o){t.isString(s)&&(s={observe:s}),s.view=n.view;var r=s.observe,l=function(){var t=c(i,r,s);e.toggleClass(o,!!t)};t.each(t.flatten([r]),function(t){a(i,"change:"+t,n,l)}),l()})},d=function(e,n,i,s){if(null!=n.visible){var r=n.view,l=function(){var a=n.visible,l=n.visibleFn,p=c(i,s,n),u=!!p;(t.isFunction(a)||t.isString(a))&&(u=!!o.call(r,a,p,n)),l?o.call(r,l,e,u,n):e.toggle(u)};t.each(t.flatten([s]),function(t){a(i,"change:"+t,n,l)}),l()}},_=function(t,e,n,i,s){var a=e.view;r(e.updateView,n,e)&&(o.call(a,e.update,t,n,i,e),s||o.call(a,e.afterUpdate,t,n,e))};return n.addHandler([{selector:"[contenteditable]",updateMethod:"html",events:["input","change"]},{selector:"input",events:["propertychange","input","change"],update:function(t,e){t.val(e)},getVal:function(t){return t.val()}},{selector:"textarea",events:["propertychange","input","change"],update:function(t,e){t.val(e)},getVal:function(t){return t.val()}},{selector:'input[type="radio"]',events:["change"],update:function(t,e){t.filter('[value="'+e+'"]').prop("checked",!0)},getVal:function(t){return t.filter(":checked").val()}},{selector:'input[type="checkbox"]',events:["change"],update:function(n,i,s,o){if(n.length>1)i||(i=[]),n.each(function(n,s){var o=e.$(s),r=t.contains(i,o.val());o.prop("checked",r)});else{var r=t.isBoolean(i)?i:i===n.val();n.prop("checked",r)}},getVal:function(n){var i;if(n.length>1)i=t.reduce(n,function(t,n){var i=e.$(n);return i.prop("checked")&&t.push(i.val()),t},[]);else{i=n.prop("checked");var s=n.val();"on"!==s&&null!=s&&(i=i?n.val():null)}return i}},{selector:"select",events:["change"],update:function(n,i,r,a){var l,p=a.selectOptions,u=p&&p.collection||void 0,h=n.prop("multiple");if(!p){p={};var d=function(t){return t.map(function(t,n){var i=e.$(n).data("stickit-bind-val");return{value:void 0!==i?i:n.value,label:n.text}}).get()};n.find("optgroup").length?(u={opt_labels:[]},n.find("> option").length&&(u.opt_labels.push(void 0),t.each(n.find("> option"),function(t){u[void 0]=d(e.$(t))})),t.each(n.find("optgroup"),function(t){var n=e.$(t).attr("label");u.opt_labels.push(n),u[n]=d(e.$(t).find("option"))})):u=d(n.find("option"))}p.valuePath=p.valuePath||"value",p.labelPath=p.labelPath||"label",p.disabledPath=p.disabledPath||"disabled";var _=function(n,i,o){t.each(n,function(n){var r=e.$("<option/>"),a=n,l=function(e,n,i){r.text(e),a=n,r.data("stickit-bind-val",a),!t.isArray(a)&&!t.isObject(a)&&r.val(a),!0===i&&r.prop("disabled","disabled")},c,u,d;"__default__"===n?(c=o.label,u=o.value,d=o.disabled):(c=s(n,p.labelPath),u=s(n,p.valuePath),d=s(n,p.disabledPath)),l(c,u,d),function(){return!h&&null!=a&&null!=o&&a===o||!(!t.isObject(o)||!t.isEqual(a,o))}()?r.prop("selected",!0):h&&t.isArray(o)&&t.each(o,function(e){t.isObject(e)&&(e=s(e,p.valuePath)),(e===a||t.isObject(e)&&t.isEqual(a,e))&&r.prop("selected",!0)}),i.append(r)})};if(n.find("*").remove(),t.isString(u)){var f=window;0===u.indexOf("this.")&&(f=this),u=u.replace(/^[a-z]*\.(.+)$/,"$1"),l=s(f,u)}else l=t.isFunction(u)?o.call(this,u,n,a):u;if(l instanceof e.Collection){var m=l,y=function(){var t=c(r,a.observe,a);o.call(this,a.update,n,t,r,a)},v=function(){m.off("add remove reset sort",y)},b=function(){v(),m.off("stickit:selectRefresh"),r.off("stickit:selectRefresh")};m.trigger("stickit:selectRefresh"),m.once("stickit:selectRefresh",v,this),m.on("add remove reset sort",y,this),r.trigger("stickit:selectRefresh"),r.once("stickit:selectRefresh",function(){r.off("stickit:unstuck",b)}),r.once("stickit:unstuck",b,this),l=l.toJSON()}if(p.defaultOption){var g=t.isFunction(p.defaultOption)?p.defaultOption.call(this,n,a):p.defaultOption;_(["__default__"],n,g)}if(t.isArray(l))_(l,n,i);else if(l.opt_labels)t.each(l.opt_labels,function(t){var s=e.$("<optgroup/>").attr("label",t);_(l[t],s,i),n.append(s)});else{var w=[],k;for(var P in l)k={},k[p.valuePath]=P,k[p.labelPath]=l[P],w.push(k);w=t.sortBy(w,p.comparator||p.labelPath),_(w,n,i)}},getVal:function(n){var i=n.find("option:selected");return n.prop("multiple")?t.map(i,function(t){return e.$(t).data("stickit-bind-val")}):i.data("stickit-bind-val")}}]),n}),function(){var t=[],e=function(e){_.isEmpty(e._unsavedChanges)?t=_.filter(t,function(t){return e.cid!=t.cid}):_.findWhere(t,{cid:e.cid})||t.push(e)},n=function(e){var n,i=_.rest(arguments),s=function(t,e){return _.isBoolean(e)?e:(_.isString(e)?t[e]:e).apply(t,i)};return _.each(t,function(t){!n&&s(t,t._unsavedConfig[e])&&(n=t._unsavedConfig.prompt)}),n};Backbone.History.prototype.navigate=_.wrap(Backbone.History.prototype.navigate,function(t,e,i){var s=n("unloadRouterPrompt",e,i);s?confirm(s+" \n\nAre you sure you want to leave this page?")&&t.call(this,e,i):t.call(this,e,i)}),window.onbeforeunload=function(t){return n("unloadWindowPrompt",t)},_.extend(Backbone.Model.prototype,{unsaved:{},_trackingChanges:!1,_originalAttrs:{},_unsavedChanges:{},startTracking:function(){return this._unsavedConfig=_.extend({},{prompt:"You have unsaved changes!",unloadRouterPrompt:!1,unloadWindowPrompt:!1},this.unsaved||{}),this._trackingChanges=!0,this._resetTracking(),this._triggerUnsavedChanges(),this},stopTracking:function(){return this._trackingChanges=!1,this._originalAttrs={},this._unsavedChanges={},this._triggerUnsavedChanges(),this},restartTracking:function(){return this._resetTracking(),this._triggerUnsavedChanges(),this},resetAttributes:function(){if(this._trackingChanges)return this.set(this._originalAttrs),this._resetTracking(),this._triggerUnsavedChanges(),this},unsavedAttributes:function(t){if(!t)return!_.isEmpty(this._unsavedChanges)&&_.clone(this._unsavedChanges);var e,n=!1,i=this._unsavedChanges;for(var s in t)_.isEqual(i[s],e=t[s])||((n||(n={}))[s]=e);return n},_resetTracking:function(){this._originalAttrs=_.clone(this.attributes),this._unsavedChanges={}},_triggerUnsavedChanges:function(){this.trigger("unsavedChanges",!_.isEmpty(this._unsavedChanges),_.clone(this._unsavedChanges),this),this.unsaved&&e(this)}}),Backbone.Model.prototype.set=_.wrap(Backbone.Model.prototype.set,function(t,e,n,i){var s,o;return null==e?this:("object"==typeof e?(s=e,i=n):(s={})[e]=n,i||(i={}),o=t.call(this,s,i),this._trackingChanges&&!i.silent&&!i.trackit_silent&&(_.each(s,_.bind(function(t,e){_.isEqual(this._originalAttrs[e],t)?delete this._unsavedChanges[e]:this._unsavedChanges[e]=t},this)),this._triggerUnsavedChanges()),o)}),Backbone.sync=_.wrap(Backbone.sync,function(t,e,n,i){return i||(i={}),"update"!=e&&"create"!=e&&"patch"!=e||(i.success=_.wrap(i.success,_.bind(function(t,e,i,s){var o;return t&&(o=t.call(this,e,i,s)),n._trackingChanges&&(n._resetTracking(),n._triggerUnsavedChanges()),o},this))),t(e,n,i)})}(),Backbone.ComputedFields=function(t,e){var n=function(t){this.model=t,this._computedFields=[],this.initialize()};return e.extend(n.prototype,{initialize:function(){e.bindAll(this,"_bindModelEvents","_computeFieldValue","_dependentFields","_isModelInitialized","_lookUpComputedFields","_thenComputedChanges","_thenDependentChanges","_toJSON","_wrapJSON","initialize"),this._lookUpComputedFields(),this._bindModelEvents(),this._wrapJSON()},_lookUpComputedFields:function(){for(var t in this.model.computed){var e=this.model.computed[t];e&&(e.set||e.get)&&this._computedFields.push({name:t,field:e})}},_bindModelEvents:function(){e.each(this._computedFields,function(t){var n=t.name,i=t.field,s=e.bind(function(){var t=this._computeFieldValue(i);this.model.set(n,t,{skipChangeEvent:!0})},this),o=e.bind(function(t,e,s){if((!s||!s.skipChangeEvent)&&i.set){var o=this._dependentFields(i.depends);e=e||this.model.get(n),i.set.call(this.model,e,o),this.model.set(o,s)}},this);this._thenDependentChanges(i.depends,s),this._thenComputedChanges(n,o),this._isModelInitialized()&&s()},this)},_isModelInitialized:function(){return!e.isEmpty(this.model.attributes)},_thenDependentChanges:function(t,n){e.each(t,function(t){"string"==typeof t&&this.model.on("change:"+t,n),"function"==typeof t&&t.call(this.model,n)},this)},_thenComputedChanges:function(t,e){this.model.on("change:"+t,e)},_wrapJSON:function(){this.model.toJSON=e.wrap(this.model.toJSON,this._toJSON)},_toJSON:function(t){var n=Array.prototype.slice.call(arguments,1),i=t.apply(this.model,n),s=!!(n[0]||{}).computedFields,o=s?{}:e.reduce(this._computedFields,function(t,e){return!1===e.field.toJSON&&t.push(e.name),t},[]);return e.omit(i,o)},_computeFieldValue:function(t){if(t&&t.get){var e=this._dependentFields(t.depends);return t.get.call(this.model,e)}},_dependentFields:function(t){return e.reduce(t,function(t,e){return t[e]=this.model.get(e),t},{},this)}}),n}(Backbone,_),function(t){Backbone._sync=Backbone.sync,Backbone.sync=function(e,n,i){if(!i.noCSRF){var s=i.beforeSend;i.beforeSend=function(e){var n=t('meta[name="csrf-token"]').attr("content");if(n&&e.setRequestHeader("X-CSRF-Token",n),s)return s.apply(this,arguments)}}return null==i.data&&n&&("create"===e||"update"===e||"patch"===e)&&(i.contentType="application/json",data=JSON.stringify(i.attrs||n.toJSON(i)),n.paramRoot?(data={},data[n.paramRoot]=n.toJSON(i)):data=n.toJSON(),i.data=JSON.stringify(data)),Backbone._sync(e,n,i)}}(jQuery),function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.Handlebars=t.Handlebars||e()}(this,function(){var t=function(){"use strict";function t(t){this.string=t}var e;return t.prototype.toString=function(){return""+this.string},e=t}(),e=function(t){"use strict";function e(t){return l[t]}function n(t){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],n)&&(t[n]=arguments[e][n]);return t}function i(t){return t instanceof a?t.toString():null==t?"":t?(t=""+t,p.test(t)?t.replace(c,e):t):t+""}function s(t){return!t&&0!==t||!(!d(t)||0!==t.length)}function o(t,e){return(t?t+".":"")+e}var r={},a=t,l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},c=/[&<>"'`]/g,p=/[&<>"'`]/;r.extend=n;var u=Object.prototype.toString;r.toString=u;var h=function(t){return"function"==typeof t};h(/x/)&&(h=function(t){return"function"==typeof t&&"[object Function]"===u.call(t)});var h;r.isFunction=h;var d=Array.isArray||function(t){return!(!t||"object"!=typeof t)&&"[object Array]"===u.call(t)};return r.isArray=d,r.escapeExpression=i,r.isEmpty=s,r.appendContextPath=o,r}(t),n=function(){"use strict";function t(t,e){var i;e&&e.firstLine&&(i=e.firstLine,t+=" - "+i+":"+e.firstColumn);for(var s=Error.prototype.constructor.call(this,t),o=0;o<n.length;o++)this[n[o]]=s[n[o]];i&&(this.lineNumber=i,this.column=e.firstColumn)}var e,n=["description","fileName","lineNumber","message","name","number","stack"];return t.prototype=new Error,e=t}(),i=function(t,e){"use strict";function n(t,e){this.helpers=t||{},this.partials=e||{},i(this)}function i(t){t.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new r("Missing helper: '"+arguments[arguments.length-1].name+"'")}),t.registerHelper("blockHelperMissing",function(e,n){var i=n.inverse,s=n.fn;if(!0===e)return s(this);if(!1===e||null==e)return i(this);if(p(e))return e.length>0?(n.ids&&(n.ids=[n.name]),t.helpers.each(e,n)):i(this);if(n.data&&n.ids){var r=m(n.data);r.contextPath=o.appendContextPath(n.data.contextPath,n.name),n={data:r}}return s(e,n)}),t.registerHelper("each",function(t,e){if(!e)throw new r("Must pass iterator to #each");var n=e.fn,i=e.inverse,s=0,a="",l,c;if(e.data&&e.ids&&(c=o.appendContextPath(e.data.contextPath,e.ids[0])+"."),u(t)&&(t=t.call(this)),e.data&&(l=m(e.data)),t&&"object"==typeof t)if(p(t))for(var h=t.length;s<h;s++)l&&(l.index=s,l.first=0===s,l.last=s===t.length-1,c&&(l.contextPath=c+s)),a+=n(t[s],{data:l});else for(var d in t)t.hasOwnProperty(d)&&(l&&(l.key=d,l.index=s,l.first=0===s,c&&(l.contextPath=c+d)),a+=n(t[d],{data:l}),s++);return 0===s&&(a=i(this)),a}),t.registerHelper("if",function(t,e){return u(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||o.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,n){return t.helpers.if.call(this,e,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),t.registerHelper("with",function(t,e){u(t)&&(t=t.call(this));var n=e.fn;if(!o.isEmpty(t)){if(e.data&&e.ids){var i=m(e.data);i.contextPath=o.appendContextPath(e.data.contextPath,e.ids[0]),e={data:i}}return n(t,e)}return e.inverse(this)}),t.registerHelper("log",function(e,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;t.log(i,e)}),t.registerHelper("lookup",function(t,e){return t&&t[e]})}var s={},o=t,r=e,a="2.0.0";s.VERSION="2.0.0";var l=6;s.COMPILER_REVISION=6;var c={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};s.REVISION_CHANGES=c;var p=o.isArray,u=o.isFunction,h=o.toString,d="[object Object]";s.HandlebarsEnvironment=n,n.prototype={constructor:n,logger:_,log:f,registerHelper:function(t,e){if(h.call(t)===d){if(e)throw new r("Arg not supported with multiple helpers");o.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){h.call(t)===d?o.extend(this.partials,t):this.partials[t]=e},unregisterPartial:function(t){delete this.partials[t]}};var _={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(t,e){if(_.level<=t){var n=_.methodMap[t];"undefined"!=typeof console&&console[n]&&console[n].call(console,e)}}};s.logger=_;var f=_.log;s.log=f;var m=function(t){var e=o.extend({},t);return e._parent=t,e};return s.createFrame=m,s}(e,n),s=function(t,e,n){"use strict";function i(t){var e=t&&t[0]||1,n=h;if(e!==n){if(e<n){var i=d[n],s=d[e];throw new u("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+s+").")}throw new u("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function s(t,e){if(!e)throw new u("No environment passed to template");if(!t||!t.main)throw new u("Unknown template object: "+typeof t);e.VM.checkRevision(t.compiler);var n=function(n,i,s,o,r,a,l,c,h){r&&(o=p.extend({},o,r));var d=e.VM.invokePartial.call(this,n,s,o,a,l,c,h);if(null==d&&e.compile){var _={helpers:a,partials:l,data:c,depths:h};l[s]=e.compile(n,{data:void 0!==c,compat:t.compat},e),d=l[s](o,_)}if(null!=d){if(i){for(var f=d.split("\n"),m=0,y=f.length;m<y&&(f[m]||m+1!==y);m++)f[m]=i+f[m];d=f.join("\n")}return d}throw new u("The partial "+s+" could not be compiled when running in runtime-only mode")},i={lookup:function(t,e){for(var n=t.length,i=0;i<n;i++)if(t[i]&&null!=t[i][e])return t[i][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:p.escapeExpression,invokePartial:n,fn:function(e){return t[e]},programs:[],program:function(t,e,n){var i=this.programs[t],s=this.fn(t);return e||n?i=o(this,t,s,e,n):i||(i=this.programs[t]=o(this,t,s)),i},data:function(t,e){for(;t&&e--;)t=t._parent;return t},merge:function(t,e){var n=t||e;return t&&e&&t!==e&&(n=p.extend({},e,t)),n},noop:e.VM.noop,compilerInfo:t.compiler},s=function(e,n){n=n||{};var o=n.data;s._setup(n),!n.partial&&t.useData&&(o=l(e,o));var r;return t.useDepths&&(r=n.depths?[e].concat(n.depths):[e]),t.main.call(i,e,i.helpers,i.partials,o,r)};return s.isTop=!0,s._setup=function(n){n.partial?(i.helpers=n.helpers,i.partials=n.partials):(i.helpers=i.merge(n.helpers,e.helpers),t.usePartial&&(i.partials=i.merge(n.partials,e.partials)))},s._child=function(e,n,s){if(t.useDepths&&!s)throw new u("must pass parent depths");return o(i,e,t[e],n,s)},s}function o(t,e,n,i,s){var o=function(e,o){return o=o||{},n.call(t,e,t.helpers,t.partials,o.data||i,s&&[e].concat(s))};return o.program=e,o.depth=s?s.length:0,o}function r(t,e,n,i,s,o,r){var a={partial:!0,helpers:i,partials:s,data:o,depths:r};if(void 0===t)throw new u("The partial "+e+" could not be found");if(t instanceof Function)return t(n,a)}function a(){return""}function l(t,e){return e&&"root"in e||(e=e?_(e):{},e.root=t),e}var c={},p=t,u=e,h=n.COMPILER_REVISION,d=n.REVISION_CHANGES,_=n.createFrame;return c.checkRevision=i,c.template=s,c.program=o,c.invokePartial=r,c.noop=a,c}(e,n,i),o=function(t,e,n,i,s){"use strict";var o,r=t,a=e,l=n,c=i,p=s,u=function(){var t=new r.HandlebarsEnvironment;return c.extend(t,r),t.SafeString=a,t.Exception=l,t.Utils=c,t.escapeExpression=c.escapeExpression,t.VM=p,t.template=function(e){return p.template(e,t)},t},h=u();return h.create=u,h.default=h,o=h}(i,t,n,e,s),r=function(t){"use strict";function e(t){t=t||{},this.firstLine=t.first_line,this.firstColumn=t.first_column,this.lastColumn=t.last_column,this.lastLine=t.last_line}var n,i=t,s={ProgramNode:function(t,n,i){e.call(this,i),this.type="program",this.statements=t,this.strip=n},MustacheNode:function(t,n,i,o,r){if(e.call(this,r),this.type="mustache",this.strip=o,null!=i&&i.charAt){var a=i.charAt(3)||i.charAt(2);this.escaped="{"!==a&&"&"!==a}else this.escaped=!!i;t instanceof s.SexprNode?this.sexpr=t:this.sexpr=new s.SexprNode(t,n),this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(t,n,i){e.call(this,i),this.type="sexpr",this.hash=n;var s=this.id=t[0],o=this.params=t.slice(1);this.isHelper=!!o.length||!!n,this.eligibleHelper=this.isHelper||s.isSimple},PartialNode:function(t,n,i,s,o){e.call(this,o),this.type="partial",this.partialName=t,this.context=n,this.hash=i,this.strip=s,this.strip.inlineStandalone=!0},BlockNode:function(t,n,i,s,o){e.call(this,o),this.type="block",this.mustache=t,this.program=n,this.inverse=i,this.strip=s,i&&!n&&(this.isInverse=!0)},RawBlockNode:function(t,n,o,r){if(e.call(this,r),t.sexpr.id.original!==o)throw new i(t.sexpr.id.original+" doesn't match "+o,this);n=new s.ContentNode(n,r),this.type="block",this.mustache=t,this.program=new s.ProgramNode([n],{},r)},ContentNode:function(t,n){e.call(this,n),this.type="content",this.original=this.string=t},HashNode:function(t,n){e.call(this,n),this.type="hash",this.pairs=t},IdNode:function(t,n){e.call(this,n),this.type="ID";for(var s="",o=[],r=0,a="",l=0,c=t.length;l<c;l++){var p=t[l].part;if(s+=(t[l].separator||"")+p,".."===p||"."===p||"this"===p){if(o.length>0)throw new i("Invalid path: "+s,this);".."===p?(r++,a+="../"):this.isScoped=!0}else o.push(p)}this.original=s,this.parts=o,this.string=o.join("."),this.depth=r,this.idName=a+this.string,this.isSimple=1===t.length&&!this.isScoped&&0===r,this.stringModeValue=this.string},PartialNameNode:function(t,n){e.call(this,n),this.type="PARTIAL_NAME",this.name=t.original},DataNode:function(t,n){e.call(this,n),this.type="DATA",this.id=t,this.stringModeValue=t.stringModeValue,this.idName="@"+t.stringModeValue},StringNode:function(t,n){e.call(this,n),this.type="STRING",this.original=this.string=this.stringModeValue=t},NumberNode:function(t,n){e.call(this,n),this.type="NUMBER",this.original=this.number=t,this.stringModeValue=Number(t)},BooleanNode:function(t,n){e.call(this,n),this.type="BOOLEAN",this.bool=t,this.stringModeValue="true"===t},CommentNode:function(t,n){e.call(this,n),this.type="comment",this.comment=t,this.strip={inlineStandalone:!0}}};return n=s}(n),a=function(){"use strict";var t,e=function(){function t(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,CONTENT:12,COMMENT:13,openRawBlock:14,END_RAW_BLOCK:15,OPEN_RAW_BLOCK:16,sexpr:17,CLOSE_RAW_BLOCK:18,openBlock:19,block_option0:20,closeBlock:21,openInverse:22,block_option1:23,OPEN_BLOCK:24,CLOSE:25,OPEN_INVERSE:26,inverseAndProgram:27,INVERSE:28,OPEN_ENDBLOCK:29,path:30,OPEN:31,OPEN_UNESCAPED:32,CLOSE_UNESCAPED:33,OPEN_PARTIAL:34,partialName:35,param:36,partial_option0:37,partial_option1:38,sexpr_repetition0:39,sexpr_option0:40,dataName:41,STRING:42,NUMBER:43,BOOLEAN:44,OPEN_SEXPR:45,CLOSE_SEXPR:46,hash:47,hash_repetition_plus0:48,hashSegment:49,ID:50,EQUALS:51,DATA:52,pathSegments:53,SEP:54,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",12:"CONTENT",13:"COMMENT",15:"END_RAW_BLOCK",16:"OPEN_RAW_BLOCK",18:"CLOSE_RAW_BLOCK",24:"OPEN_BLOCK",25:"CLOSE",26:"OPEN_INVERSE",28:"INVERSE",29:"OPEN_ENDBLOCK",31:"OPEN",32:"OPEN_UNESCAPED",33:"CLOSE_UNESCAPED",34:"OPEN_PARTIAL",42:"STRING",43:"NUMBER",44:"BOOLEAN",45:"OPEN_SEXPR",46:"CLOSE_SEXPR",50:"ID",51:"EQUALS",52:"DATA",54:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[10,3],[14,3],[9,4],[9,4],[19,3],[22,3],[27,2],[21,3],[8,3],[8,3],[11,5],[11,4],[17,3],[17,1],[36,1],[36,1],[36,1],[36,1],[36,1],[36,3],[47,1],[49,3],[35,1],[35,1],[35,1],[41,2],[30,1],[53,3],[53,1],[6,0],[6,2],[20,0],[20,1],[23,0],[23,1],[37,0],[37,1],[38,0],[38,1],[39,0],[39,2],[40,0],[40,1],[48,1],[48,2]],performAction:function(t,e,n,i,s,o,r){var a=o.length-1;switch(s){case 1:return i.prepareProgram(o[a-1].statements,!0),o[a-1];case 2:this.$=new i.ProgramNode(i.prepareProgram(o[a]),{},this._$);break;case 3:this.$=o[a];break;case 4:this.$=o[a];break;case 5:this.$=o[a];break;case 6:this.$=o[a];break;case 7:this.$=new i.ContentNode(o[a],this._$);break;case 8:this.$=new i.CommentNode(o[a],this._$);break;case 9:this.$=new i.RawBlockNode(o[a-2],o[a-1],o[a],this._$);break;case 10:this.$=new i.MustacheNode(o[a-1],null,"","",this._$);break;case 11:this.$=i.prepareBlock(o[a-3],o[a-2],o[a-1],o[a],!1,this._$);break;case 12:this.$=i.prepareBlock(o[a-3],o[a-2],o[a-1],o[a],!0,this._$);break;case 13:this.$=new i.MustacheNode(o[a-1],null,o[a-2],i.stripFlags(o[a-2],o[a]),this._$);break;case 14:this.$=new i.MustacheNode(o[a-1],null,o[a-2],i.stripFlags(o[a-2],o[a]),this._$);break;case 15:this.$={strip:i.stripFlags(o[a-1],o[a-1]),program:o[a]};break;case 16:this.$={path:o[a-1],strip:i.stripFlags(o[a-2],o[a])};break;case 17:this.$=new i.MustacheNode(o[a-1],null,o[a-2],i.stripFlags(o[a-2],o[a]),this._$);break;case 18:this.$=new i.MustacheNode(o[a-1],null,o[a-2],i.stripFlags(o[a-2],o[a]),this._$);break;case 19:this.$=new i.PartialNode(o[a-3],o[a-2],o[a-1],i.stripFlags(o[a-4],o[a]),this._$);break;case 20:this.$=new i.PartialNode(o[a-2],void 0,o[a-1],i.stripFlags(o[a-3],o[a]),this._$);break;case 21:this.$=new i.SexprNode([o[a-2]].concat(o[a-1]),o[a],this._$);break;case 22:this.$=new i.SexprNode([o[a]],null,this._$);break;case 23:this.$=o[a];break;case 24:this.$=new i.StringNode(o[a],this._$);break;case 25:this.$=new i.NumberNode(o[a],this._$);break;case 26:this.$=new i.BooleanNode(o[a],this._$);break;case 27:this.$=o[a];break;case 28:o[a-1].isHelper=!0,this.$=o[a-1];break;case 29:this.$=new i.HashNode(o[a],this._$);break;case 30:this.$=[o[a-2],o[a]];break;case 31:this.$=new i.PartialNameNode(o[a],this._$);break;case 32:this.$=new i.PartialNameNode(new i.StringNode(o[a],this._$),this._$);break;case 33:this.$=new i.PartialNameNode(new i.NumberNode(o[a],this._$));break;case 34:this.$=new i.DataNode(o[a],this._$);break;case 35:this.$=new i.IdNode(o[a],this._$);break;case 36:o[a-2].push({part:o[a],separator:o[a-1]}),this.$=o[a-2];break;case 37:this.$=[{part:o[a]}];break;case 38:this.$=[];break;case 39:o[a-1].push(o[a]);break;case 48:this.$=[];break;case 49:o[a-1].push(o[a]);break;case 52:this.$=[o[a]];break;case 53:o[a-1].push(o[a])}},table:[{3:1,4:2,5:[2,38],6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],31:[2,38],32:[2,38],34:[2,38]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:[1,10],13:[1,11],14:16,16:[1,20],19:14,22:15,24:[1,18],26:[1,19],28:[2,2],29:[2,2],31:[1,12],32:[1,13],34:[1,17]},{1:[2,1]},{5:[2,39],12:[2,39],13:[2,39],16:[2,39],24:[2,39],26:[2,39],28:[2,39],29:[2,39],31:[2,39],32:[2,39],34:[2,39]},{5:[2,3],12:[2,3],13:[2,3],16:[2,3],24:[2,3],26:[2,3],28:[2,3],29:[2,3],31:[2,3],32:[2,3],34:[2,3]},{5:[2,4],12:[2,4],13:[2,4],16:[2,4],24:[2,4],26:[2,4],28:[2,4],29:[2,4],31:[2,4],32:[2,4],34:[2,4]},{5:[2,5],12:[2,5],13:[2,5],16:[2,5],24:[2,5],26:[2,5],28:[2,5],29:[2,5],31:[2,5],32:[2,5],34:[2,5]},{5:[2,6],12:[2,6],13:[2,6],16:[2,6],24:[2,6],26:[2,6],28:[2,6],29:[2,6],31:[2,6],32:[2,6],34:[2,6]},{5:[2,7],12:[2,7],13:[2,7],16:[2,7],24:[2,7],26:[2,7],28:[2,7],29:[2,7],31:[2,7],32:[2,7],34:[2,7]},{5:[2,8],12:[2,8],13:[2,8],16:[2,8],24:[2,8],26:[2,8],28:[2,8],29:[2,8],31:[2,8],32:[2,8],34:[2,8]},{17:21,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:27,30:22,41:23,50:[1,26],52:[1,25],53:24},{4:28,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],28:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{4:29,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],28:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{12:[1,30]},{30:32,35:31,42:[1,33],43:[1,34],50:[1,26],53:24},{17:35,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:36,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:37,30:22,41:23,50:[1,26],52:[1,25],53:24},{25:[1,38]},{18:[2,48],25:[2,48],33:[2,48],39:39,42:[2,48],43:[2,48],44:[2,48],45:[2,48],46:[2,48],50:[2,48],
52:[2,48]},{18:[2,22],25:[2,22],33:[2,22],46:[2,22]},{18:[2,35],25:[2,35],33:[2,35],42:[2,35],43:[2,35],44:[2,35],45:[2,35],46:[2,35],50:[2,35],52:[2,35],54:[1,40]},{30:41,50:[1,26],53:24},{18:[2,37],25:[2,37],33:[2,37],42:[2,37],43:[2,37],44:[2,37],45:[2,37],46:[2,37],50:[2,37],52:[2,37],54:[2,37]},{33:[1,42]},{20:43,27:44,28:[1,45],29:[2,40]},{23:46,27:47,28:[1,45],29:[2,42]},{15:[1,48]},{25:[2,46],30:51,36:49,38:50,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],47:57,48:58,49:60,50:[1,59],52:[1,25],53:24},{25:[2,31],42:[2,31],43:[2,31],44:[2,31],45:[2,31],50:[2,31],52:[2,31]},{25:[2,32],42:[2,32],43:[2,32],44:[2,32],45:[2,32],50:[2,32],52:[2,32]},{25:[2,33],42:[2,33],43:[2,33],44:[2,33],45:[2,33],50:[2,33],52:[2,33]},{25:[1,61]},{25:[1,62]},{18:[1,63]},{5:[2,17],12:[2,17],13:[2,17],16:[2,17],24:[2,17],26:[2,17],28:[2,17],29:[2,17],31:[2,17],32:[2,17],34:[2,17]},{18:[2,50],25:[2,50],30:51,33:[2,50],36:65,40:64,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],46:[2,50],47:66,48:58,49:60,50:[1,59],52:[1,25],53:24},{50:[1,67]},{18:[2,34],25:[2,34],33:[2,34],42:[2,34],43:[2,34],44:[2,34],45:[2,34],46:[2,34],50:[2,34],52:[2,34]},{5:[2,18],12:[2,18],13:[2,18],16:[2,18],24:[2,18],26:[2,18],28:[2,18],29:[2,18],31:[2,18],32:[2,18],34:[2,18]},{21:68,29:[1,69]},{29:[2,41]},{4:70,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{21:71,29:[1,69]},{29:[2,43]},{5:[2,9],12:[2,9],13:[2,9],16:[2,9],24:[2,9],26:[2,9],28:[2,9],29:[2,9],31:[2,9],32:[2,9],34:[2,9]},{25:[2,44],37:72,47:73,48:58,49:60,50:[1,74]},{25:[1,75]},{18:[2,23],25:[2,23],33:[2,23],42:[2,23],43:[2,23],44:[2,23],45:[2,23],46:[2,23],50:[2,23],52:[2,23]},{18:[2,24],25:[2,24],33:[2,24],42:[2,24],43:[2,24],44:[2,24],45:[2,24],46:[2,24],50:[2,24],52:[2,24]},{18:[2,25],25:[2,25],33:[2,25],42:[2,25],43:[2,25],44:[2,25],45:[2,25],46:[2,25],50:[2,25],52:[2,25]},{18:[2,26],25:[2,26],33:[2,26],42:[2,26],43:[2,26],44:[2,26],45:[2,26],46:[2,26],50:[2,26],52:[2,26]},{18:[2,27],25:[2,27],33:[2,27],42:[2,27],43:[2,27],44:[2,27],45:[2,27],46:[2,27],50:[2,27],52:[2,27]},{17:76,30:22,41:23,50:[1,26],52:[1,25],53:24},{25:[2,47]},{18:[2,29],25:[2,29],33:[2,29],46:[2,29],49:77,50:[1,74]},{18:[2,37],25:[2,37],33:[2,37],42:[2,37],43:[2,37],44:[2,37],45:[2,37],46:[2,37],50:[2,37],51:[1,78],52:[2,37],54:[2,37]},{18:[2,52],25:[2,52],33:[2,52],46:[2,52],50:[2,52]},{12:[2,13],13:[2,13],16:[2,13],24:[2,13],26:[2,13],28:[2,13],29:[2,13],31:[2,13],32:[2,13],34:[2,13]},{12:[2,14],13:[2,14],16:[2,14],24:[2,14],26:[2,14],28:[2,14],29:[2,14],31:[2,14],32:[2,14],34:[2,14]},{12:[2,10]},{18:[2,21],25:[2,21],33:[2,21],46:[2,21]},{18:[2,49],25:[2,49],33:[2,49],42:[2,49],43:[2,49],44:[2,49],45:[2,49],46:[2,49],50:[2,49],52:[2,49]},{18:[2,51],25:[2,51],33:[2,51],46:[2,51]},{18:[2,36],25:[2,36],33:[2,36],42:[2,36],43:[2,36],44:[2,36],45:[2,36],46:[2,36],50:[2,36],52:[2,36],54:[2,36]},{5:[2,11],12:[2,11],13:[2,11],16:[2,11],24:[2,11],26:[2,11],28:[2,11],29:[2,11],31:[2,11],32:[2,11],34:[2,11]},{30:79,50:[1,26],53:24},{29:[2,15]},{5:[2,12],12:[2,12],13:[2,12],16:[2,12],24:[2,12],26:[2,12],28:[2,12],29:[2,12],31:[2,12],32:[2,12],34:[2,12]},{25:[1,80]},{25:[2,45]},{51:[1,78]},{5:[2,20],12:[2,20],13:[2,20],16:[2,20],24:[2,20],26:[2,20],28:[2,20],29:[2,20],31:[2,20],32:[2,20],34:[2,20]},{46:[1,81]},{18:[2,53],25:[2,53],33:[2,53],46:[2,53],50:[2,53]},{30:51,36:82,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],50:[1,26],52:[1,25],53:24},{25:[1,83]},{5:[2,19],12:[2,19],13:[2,19],16:[2,19],24:[2,19],26:[2,19],28:[2,19],29:[2,19],31:[2,19],32:[2,19],34:[2,19]},{18:[2,28],25:[2,28],33:[2,28],42:[2,28],43:[2,28],44:[2,28],45:[2,28],46:[2,28],50:[2,28],52:[2,28]},{18:[2,30],25:[2,30],33:[2,30],46:[2,30],50:[2,30]},{5:[2,16],12:[2,16],13:[2,16],16:[2,16],24:[2,16],26:[2,16],28:[2,16],29:[2,16],31:[2,16],32:[2,16],34:[2,16]}],defaultActions:{4:[2,1],44:[2,41],47:[2,43],57:[2,47],63:[2,10],70:[2,15],73:[2,45]},parseError:function(t,e){throw new Error(t)},parse:function(t){function e(t){s.length=s.length-2*t,o.length=o.length-t,r.length=r.length-t}function n(){var t;return t=i.lexer.lex()||1,"number"!=typeof t&&(t=i.symbols_[t]||t),t}var i=this,s=[0],o=[null],r=[],a=this.table,l="",c=0,p=0,u=0,h=2,d=1;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var _=this.lexer.yylloc;r.push(_);var f=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var m,y,v,b,g,w,k={},P,A,x,S;;){if(v=s[s.length-1],this.defaultActions[v]?b=this.defaultActions[v]:(null!==m&&void 0!==m||(m=n()),b=a[v]&&a[v][m]),void 0===b||!b.length||!b[0]){var T="";if(!u){S=[];for(P in a[v])this.terminals_[P]&&P>2&&S.push("'"+this.terminals_[P]+"'");T=this.lexer.showPosition?"Parse error on line "+(c+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+S.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(c+1)+": Unexpected "+(1==m?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(T,{text:this.lexer.match,token:this.terminals_[m]||m,line:this.lexer.yylineno,loc:_,expected:S})}}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+m);switch(b[0]){case 1:s.push(m),o.push(this.lexer.yytext),r.push(this.lexer.yylloc),s.push(b[1]),m=null,y?(m=y,y=null):(p=this.lexer.yyleng,l=this.lexer.yytext,c=this.lexer.yylineno,_=this.lexer.yylloc,u>0&&u--);break;case 2:if(A=this.productions_[b[1]][1],k.$=o[o.length-A],k._$={first_line:r[r.length-(A||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(A||1)].first_column,last_column:r[r.length-1].last_column},f&&(k._$.range=[r[r.length-(A||1)].range[0],r[r.length-1].range[1]]),w=this.performAction.call(k,l,p,c,this.yy,b[1],o,r),void 0!==w)return w;A&&(s=s.slice(0,-1*A*2),o=o.slice(0,-1*A),r=r.slice(0,-1*A)),s.push(this.productions_[b[1]][0]),o.push(k.$),r.push(k._$),x=a[s[s.length-2]][s[s.length-1]],s.push(x);break;case 3:return!0}}return!0}},n=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var s=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[s[0],s[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,n,i,s,o;this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),a=0;a<r.length&&(!(n=this._input.match(this.rules[r[a]]))||e&&!(n[0].length>e[0].length)||(e=n,i=a,this.options.flex));a++);return e?(o=e[0].match(/(?:\r\n?|\n).*/g),o&&(this.yylineno+=o.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:o?o[o.length-1].length-o[o.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,r[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return void 0!==t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return t.options={},t.performAction=function(t,e,n,i){function s(t,n){return e.yytext=e.yytext.substr(t,e.yyleng-n)}var o=i;switch(n){case 0:if("\\\\"===e.yytext.slice(-2)?(s(0,1),this.begin("mu")):"\\"===e.yytext.slice(-1)?(s(0,1),this.begin("emu")):this.begin("mu"),e.yytext)return 12;break;case 1:return 12;case 2:return this.popState(),12;case 3:return e.yytext=e.yytext.substr(5,e.yyleng-9),this.popState(),15;case 4:return 12;case 5:return s(0,4),this.popState(),13;case 6:return 45;case 7:return 46;case 8:return 16;case 9:return this.popState(),this.begin("raw"),18;case 10:return 34;case 11:return 24;case 12:return 29;case 13:return this.popState(),28;case 14:return this.popState(),28;case 15:return 26;case 16:return 26;case 17:return 32;case 18:return 31;case 19:this.popState(),this.begin("com");break;case 20:return s(3,5),this.popState(),13;case 21:return 31;case 22:return 51;case 23:return 50;case 24:return 50;case 25:return 54;case 26:break;case 27:return this.popState(),33;case 28:return this.popState(),25;case 29:return e.yytext=s(1,2).replace(/\\"/g,'"'),42;case 30:return e.yytext=s(1,2).replace(/\\'/g,"'"),42;case 31:return 52;case 32:return 44;case 33:return 44;case 34:return 43;case 35:return 50;case 36:return e.yytext=s(1,2),50;case 37:return"INVALID";case 38:return 5}},t.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{\/)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],t.conditions={mu:{rules:[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[5],inclusive:!1},raw:{rules:[3,4],inclusive:!1},INITIAL:{rules:[0,1,38],inclusive:!0}},t}();return e.lexer=n,t.prototype=e,e.Parser=t,new t}();return t=e}(),l=function(t){"use strict";function e(t,e){return{left:"~"===t.charAt(2),right:"~"===e.charAt(e.length-3)}}function n(t,e,n,i,l,p){if(t.sexpr.id.original!==i.path.original)throw new c(t.sexpr.id.original+" doesn't match "+i.path.original,t);var u=n&&n.program,h={left:t.strip.left,right:i.strip.right,openStandalone:o(e.statements),closeStandalone:s((u||e).statements)};if(t.strip.right&&r(e.statements,null,!0),u){var d=n.strip;d.left&&a(e.statements,null,!0),d.right&&r(u.statements,null,!0),i.strip.left&&a(u.statements,null,!0),s(e.statements)&&o(u.statements)&&(a(e.statements),r(u.statements))}else i.strip.left&&a(e.statements,null,!0);return l?new this.BlockNode(t,u,e,h,p):new this.BlockNode(t,e,u,h,p)}function i(t,e){for(var n=0,i=t.length;n<i;n++){var l=t[n],c=l.strip;if(c){var p=s(t,n,e,"partial"===l.type),u=o(t,n,e),h=c.openStandalone&&p,d=c.closeStandalone&&u,_=c.inlineStandalone&&p&&u;c.right&&r(t,n,!0),c.left&&a(t,n,!0),_&&(r(t,n),a(t,n)&&"partial"===l.type&&(l.indent=/([ \t]+$)/.exec(t[n-1].original)?RegExp.$1:"")),h&&(r((l.program||l.inverse).statements),a(t,n)),d&&(r(t,n),a((l.inverse||l.program).statements))}}return t}function s(t,e,n){void 0===e&&(e=t.length);var i=t[e-1],s=t[e-2];return i?"content"===i.type?(s||!n?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(i.original):void 0:n}function o(t,e,n){void 0===e&&(e=-1);var i=t[e+1],s=t[e+2];return i?"content"===i.type?(s||!n?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(i.original):void 0:n}function r(t,e,n){var i=t[null==e?0:e+1];if(i&&"content"===i.type&&(n||!i.rightStripped)){var s=i.string;i.string=i.string.replace(n?/^\s+/:/^[ \t]*\r?\n?/,""),i.rightStripped=i.string!==s}}function a(t,e,n){var i=t[null==e?t.length-1:e-1];if(i&&"content"===i.type&&(n||!i.leftStripped)){var s=i.string;return i.string=i.string.replace(n?/\s+$/:/[ \t]+$/,""),i.leftStripped=i.string!==s,i.leftStripped}}var l={},c=t;return l.stripFlags=e,l.prepareBlock=n,l.prepareProgram=i,l}(n),c=function(t,e,n,i){"use strict";function s(t){return t.constructor===a.ProgramNode?t:(r.yy=p,r.parse(t))}var o={},r=t,a=e,l=n,c=i.extend;o.parser=r;var p={};return c(p,l,a),o.parse=s,o}(a,r,l,e),p=function(t,e){"use strict";function n(){}function i(t,e,n){if(null==t||"string"!=typeof t&&t.constructor!==n.AST.ProgramNode)throw new a("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);e=e||{},"data"in e||(e.data=!0),e.compat&&(e.useDepths=!0);var i=n.parse(t),s=(new n.Compiler).compile(i,e);return(new n.JavaScriptCompiler).compile(s,e)}function s(t,e,n){function i(){var i=n.parse(t),s=(new n.Compiler).compile(i,e),o=(new n.JavaScriptCompiler).compile(s,e,void 0,!0);return n.template(o)}if(null==t||"string"!=typeof t&&t.constructor!==n.AST.ProgramNode)throw new a("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);e=e||{},"data"in e||(e.data=!0),e.compat&&(e.useDepths=!0);var s,o=function(t,e){return s||(s=i()),s.call(this,t,e)};return o._setup=function(t){return s||(s=i()),s._setup(t)},o._child=function(t,e,n){return s||(s=i()),s._child(t,e,n)},o}function o(t,e){if(t===e)return!0;if(l(t)&&l(e)&&t.length===e.length){for(var n=0;n<t.length;n++)if(!o(t[n],e[n]))return!1;return!0}}var r={},a=t,l=e.isArray,c=[].slice;return r.Compiler=n,n.prototype={compiler:n,equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var n=0;n<e;n++){var i=this.opcodes[n],s=t.opcodes[n];if(i.opcode!==s.opcode||!o(i.args,s.args))return!1}for(e=this.children.length,n=0;n<e;n++)if(!this.children[n].equals(t.children[n]))return!1;return!0},guid:0,compile:function(t,e){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=e,this.stringParams=e.stringParams,this.trackIds=e.trackIds;var n=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},n)for(var i in n)this.options.knownHelpers[i]=n[i];return this.accept(t)},accept:function(t){return this[t.type](t)},program:function(t){for(var e=t.statements,n=0,i=e.length;n<i;n++)this.accept(e[n]);return this.isSimple=1===i,this.depths.list=this.depths.list.sort(function(t,e){return t-e}),this},compileProgram:function(t){var e=(new this.compiler).compile(t,this.options),n=this.guid++,i;this.usePartial=this.usePartial||e.usePartial,this.children[n]=e;for(var s=0,o=e.depths.list.length;s<o;s++)(i=e.depths.list[s])<2||this.addDepth(i-1);return n},block:function(t){var e=t.mustache,n=t.program,i=t.inverse;n&&(n=this.compileProgram(n)),i&&(i=this.compileProgram(i));var s=e.sexpr,o=this.classifySexpr(s);"helper"===o?this.helperSexpr(s,n,i):"simple"===o?(this.simpleSexpr(s),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue",s.id.original)):(this.ambiguousSexpr(s,n,i),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(t){var e=t.pairs,n,i;for(this.opcode("pushHash"),n=0,i=e.length;n<i;n++)this.pushParam(e[n][1]);for(;n--;)this.opcode("assignToHash",e[n][0]);this.opcode("popHash")},partial:function(t){var e=t.partialName;this.usePartial=!0,t.hash?this.accept(t.hash):this.opcode("push","undefined"),t.context?this.accept(t.context):(this.opcode("getContext",0),this.opcode("pushContext")),this.opcode("invokePartial",e.name,t.indent||""),this.opcode("append")},content:function(t){t.string&&this.opcode("appendContent",t.string)},mustache:function(t){this.sexpr(t.sexpr),t.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousSexpr:function(t,e,n){var i=t.id,s=i.parts[0],o=null!=e||null!=n;this.opcode("getContext",i.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",n),this.ID(i),this.opcode("invokeAmbiguous",s,o)},simpleSexpr:function(t){var e=t.id;"DATA"===e.type?this.DATA(e):e.parts.length?this.ID(e):(this.addDepth(e.depth),this.opcode("getContext",e.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(t,e,n){var i=this.setupFullMustacheParams(t,e,n),s=t.id,o=s.parts[0];if(this.options.knownHelpers[o])this.opcode("invokeKnownHelper",i.length,o);else{if(this.options.knownHelpersOnly)throw new a("You specified knownHelpersOnly, but used the unknown helper "+o,t);s.falsy=!0,this.ID(s),this.opcode("invokeHelper",i.length,s.original,s.isSimple)}},sexpr:function(t){var e=this.classifySexpr(t);"simple"===e?this.simpleSexpr(t):"helper"===e?this.helperSexpr(t):this.ambiguousSexpr(t)},ID:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth),t.parts[0]?this.opcode("lookupOnContext",t.parts,t.falsy,t.isScoped):this.opcode("pushContext")},DATA:function(t){this.options.data=!0,this.opcode("lookupData",t.id.depth,t.id.parts)},STRING:function(t){this.opcode("pushString",t.string)},NUMBER:function(t){this.opcode("pushLiteral",t.number)},BOOLEAN:function(t){this.opcode("pushLiteral",t.bool)},comment:function(){},opcode:function(t){this.opcodes.push({opcode:t,args:c.call(arguments,1)})},addDepth:function(t){0!==t&&(this.depths[t]||(this.depths[t]=!0,this.depths.list.push(t)))},classifySexpr:function(t){var e=t.isHelper,n=t.eligibleHelper,i=this.options;if(n&&!e){var s=t.id.parts[0];i.knownHelpers[s]?e=!0:i.knownHelpersOnly&&(n=!1)}return e?"helper":n?"ambiguous":"simple"},pushParams:function(t){for(var e=0,n=t.length;e<n;e++)this.pushParam(t[e])},pushParam:function(t){this.stringParams?(t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",t.stringModeValue,t.type),"sexpr"===t.type&&this.sexpr(t)):(this.trackIds&&this.opcode("pushId",t.type,t.idName||t.stringModeValue),this.accept(t))},setupFullMustacheParams:function(t,e,n){var i=t.params;return this.pushParams(i),this.opcode("pushProgram",e),this.opcode("pushProgram",n),t.hash?this.hash(t.hash):this.opcode("emptyHash"),i}},r.precompile=i,r.compile=s,r}(n,e),u=function(t,e){"use strict";function n(t){this.value=t}function i(){}var s,o=t.COMPILER_REVISION,r=t.REVISION_CHANGES,a=e;i.prototype={nameLookup:function(t,e){return i.isValidJavaScriptVariableName(e)?t+"."+e:t+"['"+e+"']"},depthedLookup:function(t){return this.aliases.lookup="this.lookup",'lookup(depths, "'+t+'")'},compilerInfo:function(){var t=o;return[t,r[t]]},appendToBuffer:function(t){return this.environment.isSimple?"return "+t+";":{appendToBuffer:!0,content:t,toString:function(){return"buffer += "+t+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(t,e,n,i){this.environment=t,this.options=e,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!i,this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(t,e),this.useDepths=this.useDepths||t.depths.list.length||this.options.compat;var s=t.opcodes,o,r,l;for(r=0,l=s.length;r<l;r++)o=s[r],this[o.opcode].apply(this,o.args);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new a("Compile completed with content left on stack");var c=this.createFunctionContext(i);if(!this.isChild){var p={compiler:this.compilerInfo(),main:c},u=this.context.programs;for(r=0,l=u.length;r<l;r++)u[r]&&(p[r]=u[r]);return this.environment.usePartial&&(p.usePartial=!0),this.options.data&&(p.useData=!0),this.useDepths&&(p.useDepths=!0),this.options.compat&&(p.compat=!0),i||(p.compiler=JSON.stringify(p.compiler),p=this.objectLiteral(p)),p}return c},preamble:function(){this.lastContext=0,this.source=[]},createFunctionContext:function(t){var e="",n=this.stackVars.concat(this.registers.list);n.length>0&&(e+=", "+n.join(", "));for(var i in this.aliases)this.aliases.hasOwnProperty(i)&&(e+=", "+i+"="+this.aliases[i]);var s=["depth0","helpers","partials","data"];this.useDepths&&s.push("depths");var o=this.mergeSource(e);return t?(s.push(o),Function.apply(this,s)):"function("+s.join(",")+") {\n  "+o+"}"},mergeSource:function(t){for(var e="",n,i=!this.forceBuffer,s,o=0,r=this.source.length;o<r;o++){var a=this.source[o];a.appendToBuffer?n=n?n+"\n    + "+a.content:a.content:(n&&(e?e+="buffer += "+n+";\n  ":(s=!0,e=n+";\n  "),n=void 0),e+=a+"\n  ",this.environment.isSimple||(i=!1))}return i?!n&&e||(e+="return "+(n||'""')+";\n"):(t+=", buffer = "+(s?"":this.initializeBuffer()),e+=n?"return buffer + "+n+";\n":"return buffer;\n"),t&&(e="var "+t.substring(2)+(s?"":";\n  ")+e),e},blockValue:function(t){this.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=[this.contextName(0)];this.setupParams(t,0,e);var n=this.popStack();e.splice(1,0,n),this.push("blockHelperMissing.call("+e.join(", ")+")")},ambiguousBlockValue:function(){this.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=[this.contextName(0)];this.setupParams("",0,t,!0),this.flushInline();var e=this.topStack();t.splice(1,0,e),this.pushSource("if (!"+this.lastHelper+") { "+e+" = blockHelperMissing.call("+t.join(", ")+"); }")},appendContent:function(t){this.pendingContent&&(t=this.pendingContent+t),this.pendingContent=t},append:function(){this.flushInline();var t=this.popStack();this.pushSource("if ("+t+" != null) { "+this.appendToBuffer(t)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(t){this.lastContext=t},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(t,e,n){var i=0,s=t.length;for(n||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(t[i++]));i<s;i++)this.replaceStack(function(n){var s=this.nameLookup(n,t[i],"context");return e?" && "+s:" != null ? "+s+" : "+n})},lookupData:function(t,e){t?this.pushStackLiteral("this.data(data, "+t+")"):this.pushStackLiteral("data");for(var n=e.length,i=0;i<n;i++)this.replaceStack(function(t){return" && "+this.nameLookup(t,e[i],"data")})},resolvePossibleLambda:function(){this.aliases.lambda="this.lambda",this.push("lambda("+this.popStack()+", "+this.contextName(0)+")")},pushStringParam:function(t,e){this.pushContext(),this.pushString(e),"sexpr"!==e&&("string"==typeof t?this.pushString(t):this.pushStackLiteral(t))},emptyHash:function(){this.pushStackLiteral("{}"),this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var t=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push("{"+t.ids.join(",")+"}"),this.stringParams&&(this.push("{"+t.contexts.join(",")+"}"),this.push("{"+t.types.join(",")+"}")),this.push("{\n    "+t.values.join(",\n    ")+"\n  }")},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},push:function(t){return this.inlineStack.push(t),t},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){null!=t?this.pushStackLiteral(this.programExpression(t)):this.pushStackLiteral(null)},invokeHelper:function(t,e,n){this.aliases.helperMissing="helpers.helperMissing";var i=this.popStack(),s=this.setupHelper(t,e),o=(n?s.name+" || ":"")+i+" || helperMissing";this.push("(("+o+").call("+s.callParams+"))")},invokeKnownHelper:function(t,e){var n=this.setupHelper(t,e);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(t,e){this.aliases.functionType='"function"',this.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var n=this.popStack();this.emptyHash();var i=this.setupHelper(0,t,e),s=this.lastHelper=this.nameLookup("helpers",t,"helper");this.push("((helper = (helper = "+s+" || "+n+") != null ? helper : helperMissing"+(i.paramsInit?"),("+i.paramsInit:"")+"),(typeof helper === functionType ? helper.call("+i.callParams+") : helper))")},invokePartial:function(t,e){var n=[this.nameLookup("partials",t,"partial"),"'"+e+"'","'"+t+"'",this.popStack(),this.popStack(),"helpers","partials"];this.options.data?n.push("data"):this.options.compat&&n.push("undefined"),this.options.compat&&n.push("depths"),this.push("this.invokePartial("+n.join(", ")+")")},assignToHash:function(t){var e=this.popStack(),n,i,s;this.trackIds&&(s=this.popStack()),this.stringParams&&(i=this.popStack(),n=this.popStack());var o=this.hash;n&&o.contexts.push("'"+t+"': "+n),i&&o.types.push("'"+t+"': "+i),s&&o.ids.push("'"+t+"': "+s),o.values.push("'"+t+"': ("+e+")")},pushId:function(t,e){"ID"===t||"DATA"===t?this.pushString(e):"sexpr"===t?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:i,compileChildren:function(t,e){for(var n=t.children,i,s,o=0,r=n.length;o<r;o++){i=n[o],s=new this.compiler;var a=this.matchExistingProgram(i);null==a?(this.context.programs.push(""),a=this.context.programs.length,i.index=a,i.name="program"+a,this.context.programs[a]=s.compile(i,e,this.context,!this.precompile),this.context.environments[a]=i,this.useDepths=this.useDepths||s.useDepths):(i.index=a,i.name="program"+a)}},matchExistingProgram:function(t){for(var e=0,n=this.context.environments.length;e<n;e++){var i=this.context.environments[e];if(i&&i.equals(t))return e}},programExpression:function(t){var e=this.environment.children[t],n=e.depths.list,i=this.useDepths,s,o=[e.index,"data"];return i&&o.push("depths"),"this.program("+o.join(", ")+")"},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},pushStackLiteral:function(t){return this.push(new n(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),t&&this.source.push(t)},pushStack:function(t){this.flushInline();var e=this.incrStack();return this.pushSource(e+" = "+t+";"),this.compileStack.push(e),e},replaceStack:function(t){var e="",i=this.isInline(),s,o,r;if(!this.isInline())throw new a("replaceStack on non-inline");var l=this.popStack(!0);if(l instanceof n)e=s=l.value,r=!0;else{o=!this.stackSlot;var c=o?this.incrStack():this.topStackName();e="("+this.push(c)+" = "+l+")",s=this.topStack()}var p=t.call(this,s);r||this.popStack(),o&&this.stackSlot--,this.push("("+e+p+")")},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;if(t.length){this.inlineStack=[];for(var e=0,i=t.length;e<i;e++){var s=t[e];s instanceof n?this.compileStack.push(s):this.pushStack(s)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),i=(e?this.inlineStack:this.compileStack).pop();if(!t&&i instanceof n)return i.value;if(!e){if(!this.stackSlot)throw new a("Invalid stack pop");this.stackSlot--}return i},topStack:function(){var t=this.isInline()?this.inlineStack:this.compileStack,e=t[t.length-1];return e instanceof n?e.value:e},contextName:function(t){return this.useDepths&&t?"depths["+t+"]":"depth"+t},quotedString:function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(this.quotedString(n)+":"+t[n]);return"{"+e.join(",")+"}"},setupHelper:function(t,e,n){var i=[];return{params:i,paramsInit:this.setupParams(e,t,i,n),name:this.nameLookup("helpers",e,"helper"),callParams:[this.contextName(0)].concat(i).join(", ")}},setupOptions:function(t,e,n){var i={},s=[],o=[],r=[],a,l,c;i.name=this.quotedString(t),i.hash=this.popStack(),this.trackIds&&(i.hashIds=this.popStack()),this.stringParams&&(i.hashTypes=this.popStack(),i.hashContexts=this.popStack()),l=this.popStack(),c=this.popStack(),(c||l)&&(c||(c="this.noop"),l||(l="this.noop"),i.fn=c,i.inverse=l);for(var p=e;p--;)a=this.popStack(),n[p]=a,this.trackIds&&(r[p]=this.popStack()),this.stringParams&&(o[p]=this.popStack(),s[p]=this.popStack());return this.trackIds&&(i.ids="["+r.join(",")+"]"),this.stringParams&&(i.types="["+o.join(",")+"]",i.contexts="["+s.join(",")+"]"),this.options.data&&(i.data="data"),i},setupParams:function(t,e,n,i){var s=this.objectLiteral(this.setupOptions(t,e,n));return i?(this.useRegister("options"),n.push("options"),"options="+s):(n.push(s),"")}};for(var l="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),c=i.RESERVED_WORDS={},p=0,u=l.length;p<u;p++)c[l[p]]=!0;return i.isValidJavaScriptVariableName=function(t){return!i.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t)},s=i}(i,n);return function(t,e,n,i,s){"use strict";var o,r=t,a=e,l=n.parser,c=n.parse,p=i.Compiler,u=i.compile,h=i.precompile,d=s,_=r.create,f=function(){var t=_();return t.compile=function(e,n){return u(e,n,t)},t.precompile=function(e,n){return h(e,n,t)},t.AST=a,t.Compiler=p,t.JavaScriptCompiler=d,t.Parser=l,t.parse=c,t};return r=f(),r.create=f,r.default=r,o=r}(o,r,c,p,u)}),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.activity_summary=Handlebars.template({1:function(t,e,n,i){var s,o="function",r=e.helperMissing,a=this.escapeExpression;return"    <tr>\n    <td><strong>"+a((s=null!=(s=e.name||(null!=t?t.name:t))?s:r,"function"==typeof s?s.call(t,{name:"name",hash:{},data:i
}):s))+"</strong></td>\n    <td>"+a((e.toFixed||t&&t.toFixed||r).call(t,null!=t?t.hours:t,2,{name:"toFixed",hash:{},data:i}))+"</td>\n    <td>"+a((e.toFixed||t&&t.toFixed||r).call(t,null!=t?t.pas:t,3,{name:"toFixed",hash:{},data:i}))+"</td>\n    </tr>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var s,o=e.helperMissing,r=this.escapeExpression,a="<table>\n  <thead>\n    <tr>\n      <th>&nbsp;</th>\n      <th>Hours</th>\n      <th>PAs</th>\n    </tr>\n  </thead>\n  <tbody>\n";return s=e.each.call(t,null!=t?t.categories:t,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=s&&(a+=s),a+"  </tbody>\n  <tbody>\n    <tr>\n      <td>Core</td>\n      <td>"+r((e.toFixed||t&&t.toFixed||o).call(t,null!=(s=null!=(s=null!=t?t.sub_totals:t)?s.core:s)?s.hours:s,2,{name:"toFixed",hash:{},data:i}))+"</td>\n      <td>"+r((e.toFixed||t&&t.toFixed||o).call(t,null!=(s=null!=(s=null!=t?t.sub_totals:t)?s.core:s)?s.pas:s,3,{name:"toFixed",hash:{},data:i}))+"</td>\n    </tr>\n    <tr>\n      <td>APA</td>\n      <td>"+r((e.toFixed||t&&t.toFixed||o).call(t,null!=(s=null!=(s=null!=t?t.sub_totals:t)?s.apa:s)?s.hours:s,2,{name:"toFixed",hash:{},data:i}))+"</td>\n      <td>"+r((e.toFixed||t&&t.toFixed||o).call(t,null!=(s=null!=(s=null!=t?t.sub_totals:t)?s.apa:s)?s.pas:s,3,{name:"toFixed",hash:{},data:i}))+"</td>\n    </tr>\n    <tr>\n      <td>ATC</td>\n      <td>"+r((e.toFixed||t&&t.toFixed||o).call(t,null!=(s=null!=(s=null!=t?t.sub_totals:t)?s.atc:s)?s.hours:s,2,{name:"toFixed",hash:{},data:i}))+"</td>\n      <td>"+r((e.toFixed||t&&t.toFixed||o).call(t,null!=(s=null!=(s=null!=t?t.sub_totals:t)?s.atc:s)?s.pas:s,3,{name:"toFixed",hash:{},data:i}))+"</td>\n    </tr>\n  </tbody>\n  <tfoot>\n    <tr>\n      <td>Total</td>\n      <td>"+r((e.toFixed||t&&t.toFixed||o).call(t,null!=(s=null!=t?t.total:t)?s.hours:s,2,{name:"toFixed",hash:{},data:i}))+"</td>\n      <td>"+r((e.toFixed||t&&t.toFixed||o).call(t,null!=(s=null!=t?t.total:t)?s.pas:s,3,{name:"toFixed",hash:{},data:i}))+"</td>\n    </tr>\n  </tfoot>\n</table>"},useData:!0}),this.HandlebarsTemplates.activity_summary}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.additional_external=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"<div class='header'>\n  <h3>Additional NHS responsibilities and / or external duties</h3>\n</div>\n<div class='main'>\n  <div class='rc job_plan_gn_additional_responsibilities'></div>\n  <p>Your ARs and EDs from the Timetable in Section 3:</p>\n  <table class='ars'>\n    <thead>\n      <tr>\n        <th>Repeat</th>\n        <th class='start_time'>Start</th>\n        <th class='end_time'>End</th>\n        <th>Activity / Location</th>\n        <th class='hours'>Hours</th>\n        <th class='pas'>PA</th>\n      </tr>\n    </thead>\n    <tbody></tbody>\n  </table>\n  <p>Use this section to go into more details on exactly what AR and/or ED activities are undertaken.</p>\n  <table id='ars_notes'>\n    <thead>\n      <tr>\n        <th>Duty / Responsibility</th>\n        <th>Estimate of time involved</th>\n        <th>When will the work be scheduled? i.e. during NHS Time, annual leave, other personal time etc</th>\n        <th>If the work is undertaken during NHS time, how will the NHS be reimbursed? i.e fees paid to Trust, time shifting etc</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr class='blank'>\n        <td>-</td>\n        <td>-</td>\n        <td>-</td>\n        <td>-</td>\n      </tr>\n    </tbody>\n  </table>\n  <p class='right'>\n    <a class='button positive add-ars-note' href='#'>Add Note</a>\n  </p>\n  <div id='ars-note-forms'></div>\n</div>"},useData:!0}),this.HandlebarsTemplates.additional_external}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.additional_pas=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"<div class='header'>\n  <h3>Additional PAs / Additional to Contract</h3>\n</div>\n<div class='main'>\n  <h3>Additional PAs (APA)</h3>\n  <div class='rc job_plan_gn_additional_programmed_activities'></div>\n  <h4>APA Activities</h4>\n  <table id='apa_activities'></table>\n  <form>\n    <fieldset>\n      <ol>\n        <li>\n          <fieldset>\n            <legend>Are you undertaking private medical practice as defined in the terms of service?</legend>\n            <label>\n              <input class='private_practice' id='private_practice_yes' name='private_practice' type='radio' value='true' />\n              Yes\n            </label>\n            <label>\n              <input class='private_practice' id='private_practice_no' name='private_practice' type='radio' value='false' />\n              No\n            </label>\n          </fieldset>\n        </li>\n        <li>\n          <fieldset>\n            <legend>If yes, is this indicated in your job plan?</legend>\n            <label>\n              <input class='in_job_plan' id='in_job_plan_yes' name='in_job_plan' type='radio' value='true' />\n              Yes\n            </label>\n            <label>\n              <input class='in_job_plan' id='in_job_plan_no' name='in_job_plan' type='radio' value='false' />\n              No\n            </label>\n          </fieldset>\n        </li>\n        <li>\n          <fieldset>\n            <legend>Are you already working an additional programmed activity above your main commitment?</legend>\n            <label>\n              <input class='additional_activity' id='additional_activity_yes' name='additional_activity' type='radio' value='true' />\n              Yes\n            </label>\n            <label>\n              <input class='additional_activity' id='additional_activity_no' name='additional_activity' type='radio' value='false' />\n              No\n            </label>\n          </fieldset>\n        </li>\n        <li class='last'>\n          <p class='right'>\n            <a class='button positive save' href='#'>Save</a>\n            <a class='button cancel' href='#'>Cancel</a>\n          </p>\n        </li>\n      </ol>\n    </fieldset>\n  </form>\n  <h3>Additional to Contract (ATC)</h3>\n  <h4>ATC Activities</h4>\n  <table id='atc_activities'></table>\n</div>"},useData:!0}),this.HandlebarsTemplates.additional_pas}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.ars_note_form=Handlebars.template({1:function(t,e,n,i){return"<h3>Add AR Note</h3>\n"},3:function(t,e,n,i){return"<h3>Editing AR Note</h3>"},5:function(t,e,n,i){var s,o="<div id='errorExplanation'>\n  <h2>There was a problem saving this AR Note to the database.</h2>\n  <p>There were problems with the following fields:</p>\n  <ul>\n";return s=e.each.call(t,null!=t?t.error_messages:t,{name:"each",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=s&&(o+=s),o+"  </ul>\n</div>"},6:function(t,e,n,i){var s=this.lambda;return"    <li>"+(0,this.escapeExpression)(s(t,t))+"</li>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var s,o,r="function",a=e.helperMissing,l=this.escapeExpression,c="";return s=e.if.call(t,null!=t?t.is_new:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=s&&(c+=s),c+="\n",s=e.if.call(t,null!=t?t.error_messages:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=s&&(c+=s),c+"\n<fieldset>\n  <ol>\n    <li class='first'>\n      <label for='responsibility'>Duty / Responsibility</label>\n      <textarea class='responsibility' id='responsibility' type='text' value='"+l((o=null!=(o=e.responsibility||(null!=t?t.responsibility:t))?o:a,typeof o===r?o.call(t,{name:"responsibility",hash:{},data:i}):o))+"'></textarea>\n    </li>\n    <li>\n      <label for='time_invloved'>Number of SPAs per week</label>\n      <input class='time_invloved' id='time_invloved' type='text' value='"+l((o=null!=(o=e.time_invloved||(null!=t?t.time_invloved:t))?o:a,typeof o===r?o.call(t,{name:"time_invloved",hash:{},data:i}):o))+"' />\n    </li>\n    <li>\n      <label for='when_work_scheduled'>When will the work be scheduled?  i.e. during NHS Time, annual leave, other personal time etc.</label>\n      <textarea class='when_work_scheduled' id='when_work_scheduled' type='text' value='"+l((o=null!=(o=e.when_work_scheduled||(null!=t?t.when_work_scheduled:t))?o:a,typeof o===r?o.call(t,{name:"when_work_scheduled",hash:{},data:i}):o))+"'></textarea>\n    </li>\n    <li>\n      <label for='how_nhs_reimbursed'>If the work is undertaken during NHS time, how will the NHS be reimbursed? i.e fees paid to Trust, time shifting etc.</label>\n      <textarea class='how_nhs_reimbursed' id='how_nhs_reimbursed' type='text' value='"+l((o=null!=(o=e.how_nhs_reimbursed||(null!=t?t.how_nhs_reimbursed:t))?o:a,typeof o===r?o.call(t,{name:"how_nhs_reimbursed",hash:{},data:i}):o))+"'></textarea>\n    </li>\n    <li class='last'>\n      <p class='right'>\n        <a class='button positive save' href='#'>Save</a>\n        <a class='button cancel' href='#'>Cancel</a>\n      </p>\n    </li>\n  </ol>\n</fieldset>"},useData:!0}),this.HandlebarsTemplates.ars_note_form}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.ars_note_row=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var s,o="function",r=e.helperMissing,a=this.escapeExpression;return"<td class='responsibility'>"+a((s=null!=(s=e.responsibility||(null!=t?t.responsibility:t))?s:r,typeof s===o?s.call(t,{name:"responsibility",hash:{},data:i}):s))+"</td>\n<td class='time_invloved'>"+a((s=null!=(s=e.time_invloved||(null!=t?t.time_invloved:t))?s:r,typeof s===o?s.call(t,{name:"time_invloved",hash:{},data:i}):s))+"</td>\n<td class='when_work_scheduled'>"+a((s=null!=(s=e.when_work_scheduled||(null!=t?t.when_work_scheduled:t))?s:r,typeof s===o?s.call(t,{name:"when_work_scheduled",hash:{},data:i}):s))+"</td>\n<td class='how_nhs_reimbursed'>"+a((s=null!=(s=e.how_nhs_reimbursed||(null!=t?t.how_nhs_reimbursed:t))?s:r,typeof s===o?s.call(t,{name:"how_nhs_reimbursed",hash:{},data:i}):s))+"</td>\n<td>\n  <a class='no-pdf edit' href='#'>Edit</a>\n</td>\n<td>\n  <a class='no-pdf destroy' href='#'>Remove</a>\n</td>"},useData:!0}),this.HandlebarsTemplates.ars_note_row}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.ars_table=Handlebars.template({1:function(t,e,n,i){var s,o="function",r=e.helperMissing,a=this.escapeExpression;return'  <tr>    \n    <td class="schedule_description">'+a((s=null!=(s=e.schedule_description||(null!=t?t.schedule_description:t))?s:r,typeof s===o?s.call(t,{name:"schedule_description",hash:{},data:i}):s))+'</td>\n    <td class="start_time">'+a((s=null!=(s=e.start_time||(null!=t?t.start_time:t))?s:r,typeof s===o?s.call(t,{name:"start_time",hash:{},data:i}):s))+'</td>\n    <td class="end_time">'+a((s=null!=(s=e.end_time||(null!=t?t.end_time:t))?s:r,typeof s===o?s.call(t,{name:"end_time",hash:{},data:i}):s))+'</td>\n    <td class="activity">\n      '+a((s=null!=(s=e.categorisation||(null!=t?t.categorisation:t))?s:r,typeof s===o?s.call(t,{name:"categorisation",hash:{},data:i}):s))+": "+a((s=null!=(s=e.subcategorisation||(null!=t?t.subcategorisation:t))?s:r,typeof s===o?s.call(t,{name:"subcategorisation",hash:{},data:i}):s))+"<br/>\n      "+a((s=null!=(s=e.location||(null!=t?t.location:t))?s:r,typeof s===o?s.call(t,{name:"location",hash:{},data:i}):s))+"<br/>\n      "+a((s=null!=(s=e.description||(null!=t?t.description:t))?s:r,typeof s===o?s.call(t,{name:"description",hash:{},data:i}):s))+'\n    </td>\n    <td class="hours">'+a((e.toFixed||t&&t.toFixed||r).call(t,null!=t?t.hours:t,2,{name:"toFixed",hash:{},data:i}))+'</td>\n    <td class="pas">'+a((e.toFixed||t&&t.toFixed||r).call(t,null!=t?t.pas:t,2,{name:"toFixed",hash:{},data:i}))+"</td>\n  <tr>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var s;return s=e.each.call(t,null!=t?t.rows:t,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=s?s:""},useData:!0}),this.HandlebarsTemplates.ars_table}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.breakdown_footer_row=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"<td>\n  <strong>Total</strong>\n</td>\n<td>\n  <div id='hours'></div>\n</td>\n<td>\n  <div id='pas'></div>\n</td>\n<td>\n  <div id='hours_per_pa'></div>\n</td>\n<td colspan='4'></td>"},useData:!0}),this.HandlebarsTemplates.breakdown_footer_row}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.breakdown_header_row=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var s,o="function",r=e.helperMissing;return"<td colspan='6'>\n  <h3>\n    <strong>"+(0,this.escapeExpression)((s=null!=(s=e.categorisation||(null!=t?t.categorisation:t))?s:r,"function"==typeof s?s.call(t,{name:"categorisation",hash:{},data:i}):s))+"</strong>\n  </h3>\n</td>"},useData:!0}),this.HandlebarsTemplates.breakdown_header_row}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.breakdown_job_content_row=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var s,o,r="function",a=e.helperMissing,l=this.escapeExpression,c="<td class='edit activity'>";return o=null!=(o=e.one_line_summary||(null!=t?t.one_line_summary:t))?o:a,s="function"==typeof o?o.call(t,{name:"one_line_summary",hash:{},data:i}):o,null!=s&&(c+=s),c+"</td>\n<td class='edit hours_per_week'>"+l((e.toFixed||t&&t.toFixed||a).call(t,null!=t?t.hours:t,2,{name:"toFixed",hash:{},data:i}))+"</td>\n<td class='edit pas_per_week'>"+l((e.toFixed||t&&t.toFixed||a).call(t,null!=t?t.pas:t,3,{name:"toFixed",hash:{},data:i}))+"</td>\n<td class='edit hours_per_pa'>"+l((e.toFixed||t&&t.toFixed||a).call(t,null!=t?t.hours_per_pa:t,3,{name:"toFixed",hash:{},data:i}))+"</td>\n<td class='edit'>\n  <a class='no-pdf edit' href='#'>Edit</a>\n</td>\n<td>\n  <a class='no-pdf destroy' href='#'>Remove</a>\n</td>"},useData:!0}),this.HandlebarsTemplates.breakdown_job_content_row}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.breakdown_job_content_table=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"<thead class='no-pdf'>\n  <tr>\n    <th class='activity'>Activity</th>\n    <th class='hours_per_week'>Hours / week</th>\n    <th class='pas_per_week'>PAs / week</th>\n    <th class='hours_per_pa'>Hours / PA</th>\n    <th class='edit'></th>\n    <th class='destroy'></th>\n  </tr>\n</thead>\n<tbody class='no-pdf'>\n  <tr class='blank'>\n    <td>-</td>\n    <td>-</td>\n    <td>-</td>\n    <td>-</td>\n    <td>-</td>\n    <td>-</td>\n  </tr>\n</tbody>"},useData:!0}),this.HandlebarsTemplates.breakdown_job_content_table}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.calendar_selector=Handlebars.template({1:function(t,e,n,i){return'      <td class="dot"></td>\n'},3:function(t,e,n,i){var s,o="";return s=e.if.call(t,null!=t?t.first_monday_week:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=s&&(o+=s),o},4:function(t,e,n,i){var s,o="function",r=e.helperMissing,a=this.escapeExpression;return'        <td class="dot month-name" colspan="'+a((s=null!=(s=e.week_of_month||(null!=t?t.week_of_month:t))?s:r,"function"==typeof s?s.call(t,{name:"week_of_month",hash:{},data:i}):s))+'">&nbsp;'+a((e.subString||t&&t.subString||r).call(t,null!=t?t.month_name:t,3,{name:"subString",hash:{},data:i}))+"</td>\n"},6:function(t,e,n,i){var s,o=e.helperMissing,r=this.escapeExpression,a='      <tr>\n        <td class="day-letter">'+r((e.subString||t&&t.subString||o).call(t,i&&i.key,1,{name:"subString",hash:{},data:i}))+"</td>\n";return s=e.each.call(t,t,{name:"each",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=s&&(a+=s),a+"      </tr>\n"},7:function(t,e,n,i){var s,o,r="function",a=e.helperMissing,l=this.escapeExpression,c='          <td class="dot day '+l((o=null!=(o=e.css_class||(null!=t?t.css_class:t))?o:a,typeof o===r?o.call(t,{name:"css_class",hash:{},data:i}):o))+" ";return s=e.each.call(t,null!=t?t.job_contents:t,{name:"each",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=s&&(c+=s),c+'" style="background: '+l((o=null!=(o=e.color||(null!=t?t.color:t))?o:a,typeof o===r?o.call(t,{name:"color",hash:{},data:i}):o))+';" data-week-number="'+l((o=null!=(o=e.week_number||(null!=t?t.week_number:t))?o:a,typeof o===r?o.call(t,{name:"week_number",hash:{},data:i}):o))+'"></td>\n'},8:function(t,e,n,i){var s,o="function",r=e.helperMissing;return(0,this.escapeExpression)((s=null!=(s=e.job_content_id||(null!=t?t.job_content_id:t))?s:r,"function"==typeof s?s.call(t,{name:"job_content_id",hash:{},data:i}):s))+" "},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var s,o=this.lambda,r=this.escapeExpression,a='<table class="cal-select">\n  <tbody>\n    <tr class="month-names">\n      <td>&nbsp;</td>\n';return s=e.unless.call(t,null!=(s=null!=(s=null!=(s=null!=t?t.days:t)?s.Monday:s)?s[0]:s)?s.first_monday_week:s,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=s&&(a+=s),s=e.each.call(t,null!=(s=null!=t?t.days:t)?s.Monday:s,{name:"each",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=s&&(a+=s),a+="    </tr>\n",s=e.each.call(t,null!=t?t.days:t,{name:"each",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=s&&(a+=s),a+'  </tbody>\n</table>\n\n<div id="cal-select-heading" class="no-pdf">\n  <h3><span class="week-start">'+r(o(null!=(s=null!=t?t.selected:t)?s.week_start:s,t))+'</span> - <span class="week-end">'+r(o(null!=(s=null!=t?t.selected:t)?s.week_end:s,t))+'</span></h3>\n</div>\n\n<div id="cal-select-buttons">\n  <a class="last_week button navigation">\n    prev\n  </a>\n  <a class="next_week button navigation">\n    next\n  </a>\n</div>'},useData:!0}),this.HandlebarsTemplates.calendar_selector}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.calendar_table=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"<div class='panel job-content-view'>\n  <form>\n    <fieldset>\n      <div id='calendar-selector'></div>\n    </fieldset>\n  </form>\n</div>\n<table class='no-pdf' id='calendar-days'>\n  <thead>\n    <tr>\n      <th class='day'>&nbsp;</th>\n      <th class='start_time'>Start</th>\n      <th class='end_time'>End</th>\n      <th class='categorisation'></th>\n      <th class='activity'>Activity</th>\n      <th class='hours'>Hours</th>\n      <th class='pas'>PAs</th>\n      <th class='edit'></th>\n      <th class='destroy'></th>\n    </tr>\n  </thead>\n</table>"},useData:!0}),this.HandlebarsTemplates.calendar_table}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.calendar_table_day_row=Handlebars.template({1:function(t,e,n,i){var s,o=e.helperMissing,r=this.escapeExpression,a="function";return'<tr>\n<td class="day">'+r((e.subString||t&&t.subString||o).call(t,null!=t?t.day_name:t,3,{name:"subString",hash:{},data:i}))+"&nbsp;<span class='grayed'>"+r((s=null!=(s=e.mday||(null!=t?t.mday:t))?s:o,"function"==typeof s?s.call(t,{name:"mday",hash:{},data:i}):s))+" "+r((e.subString||t&&t.subString||o).call(t,null!=t?t.month_name:t,3,{name:"subString",hash:{},data:i}))+'</span></td>\n<td class="day_start">-</td>\n<td class="day_end">-</td>\n<td class="categorisation">-</td>\n<td class="activity">-</td>\n<td class="hours">-</td>\n<td class="pas">-</td>\n<td class="edit">-</td>\n<td class="destroy">-</td>\n</tr>\n'},3:function(t,e,n,i,s){var o,r,a="function",l=e.helperMissing,c=this.escapeExpression,p=this.lambda,u='<tr class="job-content jc-'+c((r=null!=(r=e.job_content_id||(null!=t?t.job_content_id:t))?r:l,typeof r===a?r.call(t,{name:"job_content_id",hash:{},data:i}):r))+'" data-job-content-id="'+c((r=null!=(r=e.job_content_id||(null!=t?t.job_content_id:t))?r:l,typeof r===a?r.call(t,{name:"job_content_id",hash:{},data:i}):r))+'">\n<td class="day edit">'+c((e.subString||t&&t.subString||l).call(t,null!=s[1]?s[1].day_name:s[1],3,{name:"subString",hash:{},data:i}))+"&nbsp;<span class='grayed'>"+c(p(null!=s[1]?s[1].mday:s[1],t))+" "+c((e.subString||t&&t.subString||l).call(t,null!=s[1]?s[1].month_name:s[1],3,{name:"subString",hash:{},data:i}))+'</span></td>\n<td class="day_start edit">'+c((r=null!=(r=e.day_start||(null!=t?t.day_start:t))?r:l,typeof r===a?r.call(t,{name:"day_start",hash:{},data:i}):r))+'</td>\n<td class="day_end edit">'+c((r=null!=(r=e.day_end||(null!=t?t.day_end:t))?r:l,typeof r===a?r.call(t,{name:"day_end",hash:{},data:i}):r))+'</td>\n<td class="categorisation edit"><strong>'+c((r=null!=(r=e.categorisation||(null!=t?t.categorisation:t))?r:l,typeof r===a?r.call(t,{name:"categorisation",hash:{},data:i}):r))+'</strong></td>\n<td class="activity edit">\n  ';return o=e.if.call(t,null!=t?t.benchmark:t,{name:"if",hash:{},fn:this.program(4,i,s),inverse:this.noop,data:i}),null!=o&&(u+=o),u+="\n  ",o=e.if.call(t,null!=t?t.annualised:t,{name:"if",hash:{},fn:this.program(6,i,s),inverse:this.noop,data:i}),null!=o&&(u+=o),u+="\n  ",o=e.if.call(t,null!=t?t.prospective_cover:t,{name:"if",hash:{},fn:this.program(8,i,s),inverse:this.noop,data:i}),null!=o&&(u+=o),u+="\n  ",o=e.if.call(t,null!=t?t.additional_to_contract:t,{name:"if",hash:{},fn:this.program(10,i,s),inverse:this.noop,data:i}),null!=o&&(u+=o),u+="\n  ",o=e.if.call(t,null!=t?t.subcategorisation:t,{name:"if",hash:{},fn:this.program(12,i,s),inverse:this.noop,data:i}),null!=o&&(u+=o),u+="\n  ",o=e.if.call(t,null!=t?t.location:t,{name:"if",hash:{},fn:this.program(14,i,s),inverse:this.noop,data:i}),null!=o&&(u+=o),u+="\n  ",o=e.if.call(t,null!=t?t.description:t,{name:"if",hash:{},fn:this.program(16,i,s),inverse:this.noop,data:i}),null!=o&&(u+=o),u+'\n</td>\n<td class="hours edit">'+c((e.toFixed||t&&t.toFixed||l).call(t,null!=t?t.hours:t,2,{name:"toFixed",hash:{},data:i}))+'</td>\n<td class="pas edit">'+c((e.toFixed||t&&t.toFixed||l).call(t,null!=t?t.pas_by_day:t,3,{name:"toFixed",hash:{},data:i}))+'</td>\n<td class="edit"><a href="#">Edit</a></td>\n<td><a data-job-content-id="'+c((r=null!=(r=e.job_content_id||(null!=t?t.job_content_id:t))?r:l,typeof r===a?r.call(t,{name:"job_content_id",hash:{},data:i}):r))+'" class="destroy" href="#">Remove</a></td>\n</tr>\n'},4:function(t,e,n,i){var s,o="function",r=e.helperMissing;return"<div>"+(0,this.escapeExpression)((s=null!=(s=e.benchmark||(null!=t?t.benchmark:t))?s:r,"function"==typeof s?s.call(t,{name:"benchmark",hash:{},data:i}):s))+"</div>"},6:function(t,e,n,i){var s=e.helperMissing;return"<div>OVERRIDE: "+(0,this.escapeExpression)((e.toFixed||t&&t.toFixed||s).call(t,null!=t?t.number_per_year:t,3,{name:"toFixed",hash:{},data:i}))+" per year</div>"},8:function(t,e,n,i){return"<div>PROSPECTIVE COVER</div>"},10:function(t,e,n,i){return"<div>ADDITIONAL TO CONTRACT</div>"},12:function(t,e,n,i){var s,o="function",r=e.helperMissing;return"<div>"+(0,this.escapeExpression)((s=null!=(s=e.subcategorisation||(null!=t?t.subcategorisation:t))?s:r,"function"==typeof s?s.call(t,{name:"subcategorisation",hash:{},data:i}):s))+"</div>"},14:function(t,e,n,i){var s,o="function",r=e.helperMissing;return"<div><em>"+(0,this.escapeExpression)((s=null!=(s=e.location||(null!=t?t.location:t))?s:r,"function"==typeof s?s.call(t,{name:"location",hash:{},data:i}):s))+"</em></div>"},16:function(t,e,n,i){var s,o="function",r=e.helperMissing;return"<div>"+(0,this.escapeExpression)((s=null!=(s=e.description||(null!=t?t.description:t))?s:r,"function"==typeof s?s.call(t,{name:"description",hash:{},data:i}):s))+"</div>"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,s){var o,r="";return o=e.unless.call(t,null!=t?t.events:t,{name:"unless",hash:{},fn:this.program(1,i,s),inverse:this.noop,data:i}),null!=o&&(r+=o),o=e.each.call(t,null!=t?t.events:t,{name:"each",hash:{},fn:this.program(3,i,s),inverse:this.noop,data:i}),null!=o&&(r+=o),r},useData:!0,useDepths:!0}),this.HandlebarsTemplates.calendar_table_day_row}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.comment=Handlebars.template({1:function(t,e,n,i){return"    <br />\n    <a class='no-pdf destroy' href='#'>Remove Comment</a>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var s,o,r="function",a=e.helperMissing,l=this.escapeExpression,c="<div class='icon'>\n  C\n</div>\n<div class='detail'>\n  <div class='content'>\n    ";return o=null!=(o=e.html_content||(null!=t?t.html_content:t))?o:a,s=typeof o===r?o.call(t,{name:"html_content",hash:{},data:i}):o,null!=s&&(c+=s),c+="\n  </div>\n  <p class='meta'>\n    <strong>\n      By:\n      "+l((o=null!=(o=e.commenter_name||(null!=t?t.commenter_name:t))?o:a,typeof o===r?o.call(t,{name:"commenter_name",hash:{},data:i}):o))+"\n    </strong>\n    <br />\n    "+l((o=null!=(o=e.created_at_formatted||(null!=t?t.created_at_formatted:t))?o:a,typeof o===r?o.call(t,{name:"created_at_formatted",hash:{},data:i}):o))+"\n",s=e.if.call(t,null!=t?t["permission_to_destroy?"]:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=s&&(c+=s),c+"  </p>\n</div>"},useData:!0}),this.HandlebarsTemplates.comment}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.comment_form=Handlebars.template({1:function(t,e,n,i){var s,o="<div id='errorExplanation'>\n  <h2>There was a problem saving this comment to the database.</h2>\n  <p>There were problems with the following fields:</p>\n  <ul>\n";return s=e.each.call(t,null!=t?t.error_messages:t,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=s&&(o+=s),o+"  </ul>\n</div>"},2:function(t,e,n,i){var s=this.lambda;return"    <li>"+(0,this.escapeExpression)(s(t,t))+"</li>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var s,o,r="function",a=e.helperMissing,l=this.escapeExpression,c="";return s=e.if.call(t,null!=t?t.error_messages:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=s&&(c+=s),c+"\n<form>\n  <textarea class='content' id='content' type='text' value='"+l((o=null!=(o=e.content||(null!=t?t.content:t))?o:a,"function"==typeof o?o.call(t,{name:"content",hash:{},data:i}):o))+"'></textarea>\n  <p>\n    <a class='button positive save' href='#'>Add Comment</a>\n  </p>\n</form>"},useData:!0}),this.HandlebarsTemplates.comment_form}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.compulsory_signator_roles=Handlebars.template({1:function(t,e,n,i){var s,o="  <h3>Compulsory Signatories</h3>\n  <p> The job plan must be signed off by";return s=e.each.call(t,null!=t?t.collection:t,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=s&&(o+=s),o+'</p>\n  <div class="signatory_roles"></div>\n'},2:function(t,e,n,i){var s,o,r="function",a=e.helperMissing,l=this.escapeExpression,c="";return s=e.unless.call(t,i&&i.first,{name:"unless",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=s&&(c+=s),c+="&nbsp;a&nbsp;<strong>"+l((o=null!=(o=e.name||(null!=t?t.name:t))?o:a,"function"==typeof o?o.call(t,{name:"name",hash:{},data:i}):o))+"</strong>",s=e.if.call(t,i&&i.last,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=s&&(c+=s),c},3:function(t,e,n,i){var s,o="";return s=e.if.call(t,i&&i.last,{name:"if",hash:{},fn:this.program(4,i),inverse:this.program(6,i),data:i}),null!=s&&(o+=s),o},4:function(t,e,n,i){return"&nbsp;and"},6:function(t,e,n,i){return","},8:function(t,e,n,i){return"."},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var s;return s=e.if.call(t,null!=t?t.collection:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=s?s:""},useData:!0}),this.HandlebarsTemplates.compulsory_signator_roles}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.contracted_pas=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var s,o="function",r=e.helperMissing,a=this.escapeExpression;return"<h3>Contracted PAs</h3>\n<div class='rc job_plan_gn_contract_pas'></div>\n<p>Please enter the number of PAs in your contract for:</p>\n<form>\n  <fieldset>\n    <ol>\n      <li>\n        <label for='contracted_dcc'>Direct clinical care</label>\n        <input class='contracted_dcc' id='contracted_dcc' type='text' value='"+a((s=null!=(s=e.contracted_dcc||(null!=t?t.contracted_dcc:t))?s:r,typeof s===o?s.call(t,{name:"contracted_dcc",hash:{},data:i}):s))+"' />\n      </li>\n      <li>\n        <label for='contracted_spa'>Supporting professional activities</label>\n        <input class='contracted_spa' id='contracted_spa' type='text' value='"+a((s=null!=(s=e.contracted_spa||(null!=t?t.contracted_spa:t))?s:r,typeof s===o?s.call(t,{name:"contracted_spa",hash:{},data:i}):s))+"' />\n      </li>\n      <li>\n        <label for='contracted_other'>Other activities</label>\n        <input class='contracted_other' id='contracted_other' type='text' value='"+a((s=null!=(s=e.contracted_other||(null!=t?t.contracted_other:t))?s:r,typeof s===o?s.call(t,{name:"contracted_other",hash:{},data:i}):s))+"' />\n      </li>\n      <li>\n        <label for='reason_for_increase' style='text-align:left;'>\n          If there is a discrepancy between the number of PAs in your job plan and those in your contract, please indicate the reason\n        </label>\n        <textarea class='autosizejs reason_for_increase' id='reason_for_increase' name='reason_for_increase'>"+a((s=null!=(s=e.reason_for_increase||(null!=t?t.reason_for_increase:t))?s:r,typeof s===o?s.call(t,{name:"reason_for_increase",hash:{},data:i}):s))+"</textarea>\n      </li>\n      <li class='last'>\n        <p class='right'>\n          <a class='button positive save' href='#'>Save</a>\n          <a class='button cancel' href='#'>Cancel</a>\n        </p>\n      </li>\n    </ol>\n  </fieldset>\n</form>"},useData:!0}),this.HandlebarsTemplates.contracted_pas}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.edocs_table=Handlebars.template({1:function(t,e,n,i){var s,o="function",r=e.helperMissing,a=this.escapeExpression;return"    <tr>\n    <td><a href='"+a((s=null!=(s=e.source_url||(null!=t?t.source_url:t))?s:r,typeof s===o?s.call(t,{name:"source_url",hash:{},data:i}):s))+"' target='_blank'>"+a((s=null!=(s=e.title||(null!=t?t.title:t))?s:r,typeof s===o?s.call(t,{name:"title",hash:{},data:i}):s))+"</a></td>\n    <td><a href='#' class='destroy' data-edoc-id='"+a((s=null!=(s=e.id||(null!=t?t.id:t))?s:r,typeof s===o?s.call(t,{name:"id",hash:{},data:i}):s))+"'>Remove</a></td>\n    </tr>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var s,o="<table class='table'>\n  <thead>\n    <tr>\n      <th>Document</th>\n    </tr>\n  </thead>\n  <tbody>\n";return s=e.each.call(t,t,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=s&&(o+=s),o+"  </tbody>\n</table>"},useData:!0}),this.HandlebarsTemplates.edocs_table}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.fee_paying_services=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){
return"<div class='header'>\n  <h3>Fee Paying Services</h3>\n</div>\n<div class='main'>\n  <div class='rc job_plan_gn_fee_paying_services'></div>\n  <form>\n    <fieldset>\n      <ol>\n        <li>\n          <p>\n            Fee Paying services are defined in Schedule 10 of â€˜Terms and Conditions â€“ Consultants (England) 2003â€™ available here:\n            <br />\n            <a href='http://www.nhsemployers.org/SiteCollectionDocuments/Consultant_Contract_V8_Revised_Terms_and_Conditions_220808_aw.pdf'>\n              Terms and Conditions\n            </a>\n          </p>\n        </li>\n        <li>\n          <fieldset>\n            <legend>Do you undertake fee paying services?</legend>\n            <label>\n              <input class='fee_paying_services' id='fee_paying_services_yes' name='fee_paying_services' type='radio' value='true' />\n              Yes\n            </label>\n            <label>\n              <input class='fee_paying_services' id='fee_paying_services_no' name='fee_paying_services' type='radio' value='false' />\n              No\n            </label>\n          </fieldset>\n        </li>\n        <li>\n          <fieldset>\n            <legend>If yes, is the fee associated with this work appropriately managed in accordance with terms of the contract?\"</legend>\n            <label>\n              <input class='fee_in_contract' id='fee_in_contract_yes' name='fee_in_contract' type='radio' value='true' />\n              Yes\n            </label>\n            <label>\n              <input class='fee_in_contract' id='fee_in_contract_no' name='fee_in_contract' type='radio' value='false' />\n              No\n            </label>\n          </fieldset>\n        </li>\n        <li class='last'>\n          <p class='right'>\n            <a class='button positive save' href='#'>Save</a>\n            <a class='button cancel' href='#'>Cancel</a>\n          </p>\n        </li>\n      </ol>\n    </fieldset>\n  </form>\n</div>"},useData:!0}),this.HandlebarsTemplates.fee_paying_services}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.general_discussion=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var s,o="function",r=e.helperMissing,a=this.escapeExpression;return"<div class='header'>\n  <h3>"+a((s=null!=(s=e.title||(null!=t?t.title:t))?s:r,typeof s===o?s.call(t,{name:"title",hash:{},data:i}):s))+"</h3>\n</div>\n<div class='main'>\n  <div class='rc'></div>\n  <form>\n    <fieldset>\n      <ol>\n        <li>\n          <label for='general_discussion' style='text-align:left;'>\n            "+a((s=null!=(s=e.title||(null!=t?t.title:t))?s:r,typeof s===o?s.call(t,{name:"title",hash:{},data:i}):s))+"\n          </label>\n          <textarea class='general_discussion' id='general_discussion' name='general_discussion'>"+a((s=null!=(s=e.general_discussion||(null!=t?t.general_discussion:t))?s:r,typeof s===o?s.call(t,{name:"general_discussion",hash:{},data:i}):s))+"</textarea>\n        </li>\n        <li class='last'>\n          <p class='right'>\n            <a class='button positive save' href='#'>Save</a>\n            <a class='button cancel' href='#'>Cancel</a>\n          </p>\n        </li>\n      </ol>\n    </fieldset>\n  </form>\n  <h3>Attached Documents</h3>\n  <div id='edocs'></div>\n  <form id='edoc_form'></form>\n</div>"},useData:!0}),this.HandlebarsTemplates.general_discussion}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.general_info=Handlebars.template({1:function(t,e,n,i){var s,o="<div id='errorExplanation'>\n    <h2>There was a problem saving this job plan</h2>\n    <p>There were problems with the following fields:</p>\n    <ul>\n";return s=e.each.call(t,null!=t?t.error_messages:t,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=s&&(o+=s),o+"    </ul>\n  </div>"},2:function(t,e,n,i){var s=this.lambda;return"      <li>"+(0,this.escapeExpression)(s(t,t))+"</li>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var s,o,r="function",a=e.helperMissing,l=this.escapeExpression,c="<div class='header'>\n  <h3>General Information</h3>\n</div>\n<div class='main'>\n  <div class='rc job_plan_gn_general_information'></div>\n  ";return s=e.if.call(t,null!=t?t.error_messages:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=s&&(c+=s),c+"\n  <form>\n    <fieldset>\n      <ol>\n        <li>\n          <label for='effective_date'>\n            Effective Date <br/>\n            e.g. 1st April 2017\n          </label>\n          <input class='effective_date' id='effective_date' type='text' value='"+l((o=null!=(o=e.effective_date||(null!=t?t.effective_date:t))?o:a,typeof o===r?o.call(t,{name:"effective_date",hash:{},data:i}):o))+"' />\n        </li>\n        <li>\n          <label for='working_weeks'>Attending / Working Weeks</label>\n          <input class='working_weeks' id='working_weeks' type='text' value='"+l((o=null!=(o=e.working_weeks||(null!=t?t.working_weeks:t))?o:a,typeof o===r?o.call(t,{name:"working_weeks",hash:{},data:i}):o))+"' />\n        </li>\n        <li>\n          <label for='job_title'>Job Title</label>\n          <input class='job_title' id='job_title' type='text' value='"+l((o=null!=(o=e.job_title||(null!=t?t.job_title:t))?o:a,typeof o===r?o.call(t,{name:"job_title",hash:{},data:i}):o))+"' />\n        </li>\n        <li>\n          <label for='speciality'>Speciality</label>\n          <select id='speciality'></select>\n        </li>\n        <li>\n          <label for='directorate'>Directorate</label>\n          <select id='directorate'></select>\n        </li>\n        <li>\n          <label for='default_employer'>Main Employer</label>\n          <select id='default_employer'></select>\n        </li>\n        <li>\n          <label for='default_location'>Main place of work</label>\n          <input class='default_location' id='default_location' type='text' value='"+l((o=null!=(o=e.default_location||(null!=t?t.default_location:t))?o:a,typeof o===r?o.call(t,{name:"default_location",hash:{},data:i}):o))+"' />\n          <select id='default_location_dropdown'></select>\n        </li>\n        <li>\n          <fieldset>\n            <legend>Contract type</legend>\n            <label for='contract_type_Pre 2003 Contract'>\n              <input class='contract_type' name='contract_type' type='radio' value='Pre 2003 Contract' />\n              Pre 2003 Contract\n            </label>\n            <label for='contract_type_Post 2003 Contract'>\n              <input class='contract_type' name='contract_type' type='radio' value='Post 2003 Contract' />\n              Post 2003 Contract\n            </label>\n            <label for='contract_type_Clinical Academic Contract'>\n              <input class='contract_type' name='contract_type' type='radio' value='Clinical Academic Contract' />\n              Clinical Academic Contract\n            </label>\n            <label for='contract_type_SAS 2008 Contract'>\n              <input class='contract_type' name='contract_type' type='radio' value='SAS 2008 Contract' />\n              SAS 2008 Contract\n            </label>\n          </fieldset>\n        </li>\n        <li>\n          <label for='european_working_directive_opt_out'>Do you wish to opt out of the European Working Time Directive?</label>\n          <input class='european_working_directive_opt_out' name='european_working_directive_opt_out' type='checkbox' value='1' />\n          Yes\n        </li>\n        <li>\n          <label for='current_pay_threshold'>Current pay threshold</label>\n          <input class='current_pay_threshold' id='current_pay_threshold' type='text' value='"+l((o=null!=(o=e.current_pay_threshold||(null!=t?t.current_pay_threshold:t))?o:a,typeof o===r?o.call(t,{name:"current_pay_threshold",hash:{},data:i}):o))+"' />\n        </li>\n        <li class='last'>\n          <p class='right'>\n            <a class='button positive save' href='#'>Save</a>\n            <a class='button cancel' href='#'>Cancel</a>\n          </p>\n        </li>\n      </ol>\n    </fieldset>\n  </form>\n</div>"},useData:!0}),this.HandlebarsTemplates.general_info}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.instructions=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"<div class='header'>\n  <h3>Instructions</h3>\n</div>\n<div class='main'>\n  <div class='rc'></div>\n</div>"},useData:!0}),this.HandlebarsTemplates.instructions}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.job_content_form=Handlebars.template({1:function(t,e,n,i){var s,o="<div id='errorExplanation'>\n  <h2>There was a problem saving this activity to the database.</h2>\n  <p>There were problems with the following fields:</p>\n  <ul>\n";return s=e.each.call(t,null!=t?t.error_messages:t,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=s&&(o+=s),o+"  </ul>\n</div>"},2:function(t,e,n,i){var s=this.lambda;return"    <li>"+(0,this.escapeExpression)(s(t,t))+"</li>\n"},4:function(t,e,n,i){return"        <p>\n          <label for='benchmarks'>Subcategory</label>\n          <select id='benchmarks'></select>\n        </p>\n"},6:function(t,e,n,i){return"          <a class='button big positive create save' href='#'>Create</a>\n"},8:function(t,e,n,i){return"          <a class='button big positive edit save' href='#'>Save</a>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var s,o,r="function",a=e.helperMissing,l=this.escapeExpression,c="";return s=e.if.call(t,null!=t?t.error_messages:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=s&&(c+=s),c+="\n<form>\n  <h2>Categorisation</h2>\n  <fieldset>\n    <ol>\n      <li class='first'>\n        <p>\n          <label for='categorisation'>Category</label>\n          <select id='categorisation'></select>\n        </p>\n",s=e.if.call(t,null!=t?t.has_benchmarks:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=s&&(c+=s),c+="        <p>\n          <label>Activity</label>\n          <select id='subcategorisation'></select>\n        </p>\n        <p>\n          <label for='on_call_true'>Type</label>\n          <input checked='checked' class='activity_type' name='activity_type' type='radio' value='Core'>Core (default)</input>\n          <input class='activity_type' name='activity_type' type='radio' value='ATC'>Additional to Contract</input>\n          <input class='activity_type' name='activity_type' type='radio' value='APA'>Additional Programmed Activity</input>\n        </p>\n      </li>\n      <li class='tags'>\n        <p>\n          <label>Tags:</label>\n          <select data-placeholder='Select tags...' id='tags' multiple='multiple'></select>\n        </p>\n      </li>\n      <li>\n        <p>\n          <label>Employer</label>\n          <select id='employer'></select>\n        </p>\n      </li>\n      <li>\n        <p>\n          <label for='location'>Location</label>\n          <input class='location' id='location' placeholder='Enter a location...' type='text' value='"+l((o=null!=(o=e.location||(null!=t?t.location:t))?o:a,typeof o===r?o.call(t,{name:"location",hash:{},data:i}):o))+"' />\n          <select id='location_dropdown'></select>\n        </p>\n      </li>\n      <li>\n        <p>\n          <label for='location'>Description</label>\n          <br />\n          <textarea class='description' id='description' placeholder='Enter a brief description...' type='text' value='"+l((o=null!=(o=e.description||(null!=t?t.description:t))?o:a,typeof o===r?o.call(t,{name:"description",hash:{},data:i}):o))+"'></textarea>\n        </p>\n      </li>\n      <li>\n        <p>\n          <label for='on_call_true'>On Call</label>\n          <input class='on_call' name='on_call' type='radio' value='true'>Yes</input>\n          <input class='on_call' name='on_call' type='radio' value='false'>No</input>\n        </p>\n      </li>\n    </ol>\n  </fieldset>\n  <br />\n  <br />\n  <h2>Schedule</h2>\n  <fieldset>\n    <ol>\n      <li>\n        <p>\n          <label>Scheduled</label>\n          <input class='scheduled' id='scheduled_true' name='scheduled' type='radio' value='true'>Yes</input>\n          <input class='scheduled' id='scheduled_false' name='scheduled' type='radio' value='false'>No</input>\n        </p>\n      </li>\n    </ol>\n  </fieldset>\n  <fieldset class='schedule'>\n    <ol>\n      <li>\n        <p>\n          <label for='repeats'>Repeats</label>\n          <select id='repeats'></select>\n        </p>\n      </li>\n      <li class='repeats daily'>\n        <p>\n          <strong>Every</strong>\n          <select class='every_n repeats_every_n_days' id='repeats_every_n_days' style='width: 40px;' value='"+l((o=null!=(o=e.repeats_every_n_days||(null!=t?t.repeats_every_n_days:t))?o:a,typeof o===r?o.call(t,{name:"repeats_every_n_days",hash:{},data:i}):o))+"'></select>\n          day(s)\n        </p>\n      </li>\n      <li class='repeats weekly'>\n        <p>\n          <strong>Every</strong>\n          <select class='every_n repeats_every_n_weeks' id='repeats_every_n_weeks' style='width: 40px;' value='"+l((o=null!=(o=e.repeats_every_n_weeks||(null!=t?t.repeats_every_n_weeks:t))?o:a,typeof o===r?o.call(t,{name:"repeats_every_n_weeks",hash:{},data:i}):o))+"'></select>\n          week(s) on\n        </p>\n        <table class='days_of_week'>\n          <tbody>\n            <tr>\n              <td class='clickable_td' data-value='Monday'>Monday</td>\n              <td class='clickable_td' data-value='Tuesday'>Tuesday</td>\n              <td class='clickable_td' data-value='Wednesday'>Wednesday</td>\n              <td class='clickable_td' data-value='Thursday'>Thursday</td>\n              <td class='clickable_td' data-value='Friday'>Friday</td>\n              <td class='clickable_td' data-value='Saturday'>Saturday</td>\n              <td class='clickable_td' data-value='Sunday'>Sunday</td>\n            </tr>\n          </tbody>\n        </table>\n        <div class='rota-weeks'>\n          <p>On weeks:</p>\n          <table class='rota'>\n            <tbody>\n              <tr class='rota-week-selector'></tr>\n            </tbody>\n          </table>\n        </div>\n      </li>\n      <li class='repeats monthly'>\n        <p>\n          <strong>Every</strong>\n          <select class='every_n repeats_every_n_months' id='repeats_every_n_months' style='width: 40px;' value='"+l((o=null!=(o=e.repeats_every_n_months||(null!=t?t.repeats_every_n_months:t))?o:a,typeof o===r?o.call(t,{name:"repeats_every_n_months",hash:{},data:i}):o))+"'></select>\n          month(s)\n        </p>\n        <p>\n          <input class='repeats_monthly' name='repeats_monthly' type='radio' value='on'>On the...</input>\n          <input class='repeats_monthly' name='repeats_monthly' type='radio' value='each'>Each...</input>\n        </p>\n        <p>\n          <select class='monthly_on' id='repeats_monthly_on_ordinals' multiple='multiple' style='width: 60px; height: 10em;'></select>\n          <select class='monthly_on' id='repeats_monthly_on_days_of_the_week' multiple='multiple' style='height: 10em;'></select>\n        </p>\n        <table class='days_of_month'>\n          <tbody>\n            <tr>\n              <td class='clickable_td' data-value='1'>1</td>\n              <td class='clickable_td' data-value='2'>2</td>\n              <td class='clickable_td' data-value='3'>3</td>\n              <td class='clickable_td' data-value='4'>4</td>\n              <td class='clickable_td' data-value='5'>5</td>\n              <td class='clickable_td' data-value='6'>6</td>\n              <td class='clickable_td' data-value='7'>7</td>\n            </tr>\n            <tr>\n              <td class='clickable_td' data-value='8'>8</td>\n              <td class='clickable_td' data-value='9'>9</td>\n              <td class='clickable_td' data-value='10'>10</td>\n              <td class='clickable_td' data-value='11'>11</td>\n              <td class='clickable_td' data-value='12'>12</td>\n              <td class='clickable_td' data-value='13'>13</td>\n              <td class='clickable_td' data-value='14'>14</td>\n            </tr>\n            <tr>\n              <td class='clickable_td' data-value='15'>15</td>\n              <td class='clickable_td' data-value='16'>16</td>\n              <td class='clickable_td' data-value='17'>17</td>\n              <td class='clickable_td' data-value='18'>18</td>\n              <td class='clickable_td' data-value='19'>19</td>\n              <td class='clickable_td' data-value='20'>20</td>\n              <td class='clickable_td' data-value='21'>21</td>\n            </tr>\n            <tr>\n              <td class='clickable_td' data-value='22'>22</td>\n              <td class='clickable_td' data-value='23'>23</td>\n              <td class='clickable_td' data-value='24'>24</td>\n              <td class='clickable_td' data-value='25'>25</td>\n              <td class='clickable_td' data-value='26'>26</td>\n              <td class='clickable_td' data-value='27'>27</td>\n              <td class='clickable_td' data-value='28'>28</td>\n            </tr>\n            <tr>\n              <td class='clickable_td' data-value='29'>29</td>\n              <td class='clickable_td' data-value='30'>30</td>\n              <td class='clickable_td' data-value='31'>31</td>\n            </tr>\n          </tbody>\n        </table>\n      </li>\n      <li class='repeats yearly'>\n        <p>\n          <strong>Every</strong>\n          <input class='every_n repeats_every_n_years' id='repeats_every_n_years' placeholder='0' type='text' value='"+l((o=null!=(o=e.repeats_every_n_years||(null!=t?t.repeats_every_n_years:t))?o:a,typeof o===r?o.call(t,{name:"repeats_every_n_years",hash:{},data:i}):o))+"' />\n          year(s) in\n        </p>\n        <table class='months_of_year'>\n          <tbody>\n            <tr>\n              <td class='clickable_td' data-value='1'>January</td>\n              <td class='clickable_td' data-value='2'>February</td>\n              <td class='clickable_td' data-value='3'>March</td>\n              <td class='clickable_td' data-value='4'>April</td>\n            </tr>\n            <tr>\n              <td class='clickable_td' data-value='5'>May</td>\n              <td class='clickable_td' data-value='6'>June</td>\n              <td class='clickable_td' data-value='7'>July</td>\n              <td class='clickable_td' data-value='8'>August</td>\n            </tr>\n            <tr>\n              <td class='clickable_td' data-value='9'>September</td>\n              <td class='clickable_td' data-value='10'>October</td>\n              <td class='clickable_td' data-value='11'>November</td>\n              <td class='clickable_td' data-value='12'>December</td>\n            </tr>\n          </tbody>\n        </table>\n      </li>\n      <li>\n        <p>\n          <label for='start_time'>Start Time</label>\n          <select class='start_time_hours time' style='width: 50px;'></select>\n          <span>:</span>\n          <select class='start_time_minutes time' style='width: 50px;'></select>\n        </p>\n      </li>\n      <li>\n        <p>\n          <label for='end_time'>End Time</label>\n          <select class='end_time_hours time' style='width: 50px;'></select>\n          <span>:</span>\n          <select class='end_time_minutes time' style='width: 50px;'></select>\n        </p>\n      </li>\n    </ol>\n  </fieldset>\n  <br />\n  <br />\n  <h2>Summary</h2>\n  <fieldset class='schedule'>\n    <br />\n    <a class='button positive recalculate' href='#'>Save & Recalculate</a>\n    <ol>\n      <li>\n        <table class='summary per_occurrence'>\n          <thead>\n            <tr>\n              <th>Per Occurrence</th>\n              <th class='non_premium'>Non-Premium Time</th>\n              <th class='premium'>Premium Time</th>\n              <th class='total_title'></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td>Hours Worked</td>\n              <td class='summary_data non_premium'>"+l((e.toFixed||t&&t.toFixed||a).call(t,null!=t?t.non_premium_hours_per_occurrence:t,3,{name:"toFixed",hash:{},data:i}))+"</td>\n              <td class='summary_data premium'>"+l((e.toFixed||t&&t.toFixed||a).call(t,null!=t?t.premium_hours_per_occurrence:t,3,{name:"toFixed",hash:{},data:i}))+"</td>\n              <td class='summary_data'>"+l((e.toFixed||t&&t.toFixed||a).call(t,null!=t?t.hours_per_occurrence:t,3,{name:"toFixed",hash:{},data:i}))+"</td>\n            </tr>\n            <tr>\n              <td>PAs Accumulated</td>\n              <td class='summary_data non_premium'>"+l((e.toFixed||t&&t.toFixed||a).call(t,null!=t?t.non_premium_pas_per_occurrence:t,3,{name:"toFixed",hash:{},data:i}))+"</td>\n              <td class='summary_data premium'>"+l((e.toFixed||t&&t.toFixed||a).call(t,null!=t?t.premium_pas_per_occurrence:t,3,{name:"toFixed",hash:{},data:i}))+"</td>\n              <td class='summary_data'>"+l((e.toFixed||t&&t.toFixed||a).call(t,null!=t?t.pas_per_occurrence:t,3,{name:"toFixed",hash:{},data:i}))+"</td>\n            </tr>\n          </tbody>\n        </table>\n        <table class='summary'>\n          <thead>\n            <tr>\n              <th>Per Worked Week</th>\n              <th class='non_premium'>Non-Premium Time</th>\n              <th class='premium'>Premium Time</th>\n              <th class='total_title'></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td>Occurrences</td>\n              <td class='summary_data non_premium'>"+l((e.toFixed||t&&t.toFixed||a).call(t,null!=t?t.non_premium_occurrences_per_week:t,3,{name:"toFixed",hash:{},data:i}))+"</td>\n              <td class='summary_data premium'>"+l((e.toFixed||t&&t.toFixed||a).call(t,null!=t?t.premium_occurrences_per_week:t,3,{name:"toFixed",hash:{},data:i}))+"</td>\n              <td class='summary_data'>"+l((e.toFixed||t&&t.toFixed||a).call(t,null!=t?t.occurrences_per_week:t,3,{name:"toFixed",hash:{},data:i}))+"</td>\n            </tr>\n            <tr>\n              <td>Hours Worked</td>\n              <td class='summary_data non_premium'>"+l((e.toFixed||t&&t.toFixed||a).call(t,null!=t?t.non_premium_hours_per_week:t,3,{name:"toFixed",hash:{},data:i}))+"</td>\n              <td class='summary_data premium'>"+l((e.toFixed||t&&t.toFixed||a).call(t,null!=t?t.premium_hours_per_week:t,3,{name:"toFixed",hash:{},data:i}))+"</td>\n              <td class='summary_data'>"+l((e.toFixed||t&&t.toFixed||a).call(t,null!=t?t.hours_per_week:t,3,{name:"toFixed",hash:{},data:i}))+"</td>\n            </tr>\n            <tr>\n              <td>PAs Accumulated</td>\n              <td class='summary_data non_premium'>"+l((e.toFixed||t&&t.toFixed||a).call(t,null!=t?t.non_premium_pas_per_week:t,3,{name:"toFixed",hash:{},data:i}))+"</td>\n              <td class='summary_data premium'>"+l((e.toFixed||t&&t.toFixed||a).call(t,null!=t?t.premium_pas_per_week:t,3,{name:"toFixed",hash:{},data:i}))+"</td>\n              <td class='summary_data'>"+l((e.toFixed||t&&t.toFixed||a).call(t,null!=t?t.pas_per_week:t,3,{name:"toFixed",hash:{},data:i}))+"</td>\n            </tr>\n          </tbody>\n        </table>\n        <table class='summary'>\n          <thead>\n            <tr>\n              <th>Per Year</th>\n              <th class='non_premium'>Non-Premium Time</th>\n              <th class='premium'>Premium Time</th>\n              <th class='total_title'></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td>Occurrences</td>\n              <td class='summary_data non_premium'>"+l((e.toFixed||t&&t.toFixed||a).call(t,null!=t?t.worked_non_premium_occurrences_per_year:t,3,{name:"toFixed",hash:{},data:i}))+"</td>\n              <td class='summary_data premium'>"+l((e.toFixed||t&&t.toFixed||a).call(t,null!=t?t.worked_premium_occurrences_per_year:t,3,{name:"toFixed",hash:{},data:i}))+"</td>\n              <td>\n                <div id='prospective_cover'>\n                  Prospective Cover?\n                  <input class='prospective_cover' name='prospective_cover' type='checkbox' value='1' />\n                </div>\n                <div class='summary_data'>"+l((e.toFixed||t&&t.toFixed||a).call(t,null!=t?t.worked_occurrences_per_year:t,3,{name:"toFixed",hash:{},data:i}))+"</div>\n              </td>\n            </tr>\n            <tr>\n              <td>Hours Worked</td>\n              <td class='summary_data non_premium'>"+l((e.toFixed||t&&t.toFixed||a).call(t,null!=t?t.worked_non_premium_hours_per_year:t,3,{name:"toFixed",hash:{},data:i}))+"</td>\n              <td class='summary_data premium'>"+l((e.toFixed||t&&t.toFixed||a).call(t,null!=t?t.worked_premium_hours_per_year:t,3,{name:"toFixed",hash:{},data:i}))+"</td>\n              <td class='summary_data'>"+l((e.toFixed||t&&t.toFixed||a).call(t,null!=t?t.worked_hours_per_year:t,3,{name:"toFixed",hash:{},data:i}))+"</td>\n            </tr>\n          </tbody>\n        </table>\n        <br />\n        <a class='summary' href='#' id='view_breakdown_toggle'>Override Occurrences</a>\n        <div class='view_breakdown'>\n          <table class='summary'>\n            <thead>\n              <tr>\n                <th>Per Year, Ignoring Leave</th>\n                <th class='non_premium'>Non-Premium Time</th>\n                <th class='premium'>Premium Time</th>\n                <th class='total_title'></th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr>\n                <td>Occurrences (if no leave were taken)</td>\n                <td class='summary_data non_premium'>"+l((e.toFixed||t&&t.toFixed||a).call(t,null!=t?t.non_premium_occurrences_per_year:t,3,{name:"toFixed",hash:{},data:i}))+"</td>\n                <td class='summary_data premium'>"+l((e.toFixed||t&&t.toFixed||a).call(t,null!=t?t.premium_occurrences_per_year:t,3,{name:"toFixed",hash:{},data:i}))+"</td>\n                <td>\n                  <div id='annualised'>\n                    Override?\n                    <input class='annualised' name='annualised' type='checkbox' value='1' />\n                  </div>\n                  <div class='number_per_year'>\n                    <select class='every_n number_per_year' id='number_per_year' style='width: 50px;' value='"+l((o=null!=(o=e.repeats_every_n_months||(null!=t?t.repeats_every_n_months:t))?o:a,typeof o===r?o.call(t,{name:"repeats_every_n_months",hash:{},data:i}):o))+"'></select>\n                  </div>\n                  <div class='occurrences_per_year summary_data'>\n                    "+l((e.toFixed||t&&t.toFixed||a).call(t,null!=t?t.occurrences_per_year:t,3,{name:"toFixed",hash:{},data:i}))+"\n                  </div>\n                </td>\n              </tr>\n              <tr>\n                <td>Hours Worked (if no leave were taken)</td>\n                <td class='summary_data non_premium'>"+l((e.toFixed||t&&t.toFixed||a).call(t,null!=t?t.non_premium_hours_per_year:t,3,{name:"toFixed",hash:{},data:i}))+"</td>\n                <td class='summary_data premium'>"+l((e.toFixed||t&&t.toFixed||a).call(t,null!=t?t.premium_hours_per_year:t,3,{name:"toFixed",hash:{},data:i}))+"</td>\n                <td class='summary_data'>"+l((e.toFixed||t&&t.toFixed||a).call(t,null!=t?t.hours_per_year:t,3,{name:"toFixed",hash:{},data:i}))+"</td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </li>\n      <br />\n      <a href='#' id='advanced_when_toggle'>Advanced</a>\n      <input class='advanced_when' id='advanced_when' name='advanced_when' type='checkbox' />\n    </ol>\n  </fieldset>\n  <fieldset class='advanced_when'>\n    <ol>\n      <li>\n        <p>\n          <label for='from_date'>Start Date</label>\n          <input class='from_date' id='from_date' placeholder='yyyy-mm-dd' readonly='readonly' type='text' value='"+l((o=null!=(o=e.from_date||(null!=t?t.from_date:t))?o:a,typeof o===r?o.call(t,{name:"from_date",hash:{},data:i}):o))+"' />\n        </p>\n      </li>\n      <li>\n        <p>\n          <label for='until_date'>End Date</label>\n          <input class='from_date' id='until_date' placeholder='yyyy-mm-dd' readonly='readonly' type='text' value='"+l((o=null!=(o=e.until_date||(null!=t?t.until_date:t))?o:a,typeof o===r?o.call(t,{name:"until_date",hash:{},data:i}):o))+"' />\n        </p>\n      </li>\n      <li>\n        <p>\n          <label>Override Hours and PAs</label>\n          <input class='override_calculations' name='override_calculations' type='radio' value='true'>Yes</input>\n          <input class='override_calculations' name='override_calculations' type='radio' value='false'>No</input>\n        </p>\n      </li>\n    </ol>\n  </fieldset>\n  <fieldset class='hours_and_pas'>\n    <ol>\n      <li>\n        <p>\n          <label>Hours per week</label>\n          <input class='hours' id='hours' placeholder='0' type='text' value='"+l((o=null!=(o=e.hours||(null!=t?t.hours:t))?o:a,typeof o===r?o.call(t,{name:"hours",hash:{},data:i}):o))+"' />\n        </p>\n      </li>\n      <li>\n        <p>\n          <label>PAs per week</label>\n          <input class='pas' id='pas' placeholder='0' type='text' value='"+l((o=null!=(o=e.pas||(null!=t?t.pas:t))?o:a,typeof o===r?o.call(t,{name:"pas",hash:{},data:i}):o))+"' />\n        </p>\n      </li>\n    </ol>\n  </fieldset>\n  <fieldset>\n    <ol>\n      <li class='last buttons'>\n        <p class='right'>\n",s=e.if.call(t,null!=t?t.is_new:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.program(8,i),data:i}),null!=s&&(c+=s),c+"          <a class='button big cancel' href='#'>Cancel</a>\n        </p>\n      </li>\n    </ol>\n  </fieldset>\n</form>"},useData:!0}),this.HandlebarsTemplates.job_content_form}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.job_content_row=Handlebars.template({1:function(t,e,n,i){return"<td></td>\n"},3:function(t,e,n,i){return"<td class='drag_handle'></td>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var s,o,r="function",a=e.helperMissing,l=this.escapeExpression,c="";return s=e.if.call(t,null!=t?t.is_pdf:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=s&&(c+=s),c+="<td class='edit start_time'>"+l((o=null!=(o=e.start_time_formatted||(null!=t?t.start_time_formatted:t))?o:a,typeof o===r?o.call(t,{name:"start_time_formatted",hash:{},data:i}):o))+"</td>\n<td class='edit end_time'>"+l((o=null!=(o=e.end_time_formatted||(null!=t?t.end_time_formatted:t))?o:a,typeof o===r?o.call(t,{name:"end_time_formatted",hash:{},data:i}):o))+"</td>\n<td class='edit categorisation'>\n  <strong>"+l((o=null!=(o=e.categorisation||(null!=t?t.categorisation:t))?o:a,typeof o===r?o.call(t,{name:"categorisation",hash:{},data:i}):o))+"</strong>\n</td>\n<td class='edit activity'>",o=null!=(o=e.summary||(null!=t?t.summary:t))?o:a,s=typeof o===r?o.call(t,{name:"summary",hash:{},data:i}):o,null!=s&&(c+=s),c+"</td>\n<td class='edit hours_per_week'>"+l((e.toFixed||t&&t.toFixed||a).call(t,null!=t?t.hours:t,2,{name:"toFixed",hash:{},data:i}))+"</td>\n<td class='edit pas_per_week'>"+l((e.toFixed||t&&t.toFixed||a).call(t,null!=t?t.pas:t,3,{name:"toFixed",hash:{},data:i}))+"</td>\n<td class='edit'>\n  <a class='no-pdf edit' href='#'>Edit</a>\n</td>\n<td>\n  <a class='no-pdf destroy' href='#'>Remove</a>\n</td>"},useData:!0}),this.HandlebarsTemplates.job_content_row}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.job_content_sort_picker=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){
return"<div class='no-pdf'>\n  Sort by:\n</div>\n<label class='no-pdf'>\n  <input class='sort' name='sort_method' type='radio' value='chronological_order' />\n  Weekday\n</label>\n<label class='no-pdf'>\n  <input class='sort' name='sort_method' type='radio' value='order' />\n  Custom\n</label>\n<label class='no-pdf'>\n  <input class='sort' name='sort_method' type='radio' value='categorisation' />\n  Category\n</label>"},useData:!0}),this.HandlebarsTemplates.job_content_sort_picker}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.job_content_table=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"<thead>\n  <tr>\n    <th class='drag_handle_header'></th>\n    <th class='start_time'>Start</th>\n    <th class='end_time'>End</th>\n    <th class='categorisation'></th>\n    <th class='activity'>Activity</th>\n    <th class='hours_per_week'>Hours / week</th>\n    <th class='pas_per_week'>PAs / week</th>\n    <th class='edit'></th>\n    <th class='destroy'></th>\n  </tr>\n</thead>\n<tbody>\n  <tr class='blank'>\n    <td>-</td>\n    <td>-</td>\n    <td>-</td>\n    <td>-</td>\n    <td>-</td>\n    <td>-</td>\n    <td>-</td>\n    <td>-</td>\n    <td>-</td>\n  </tr>\n</tbody>"},useData:!0}),this.HandlebarsTemplates.job_content_table}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.job_plan_status=Handlebars.template({1:function(t,e,n,i){return"<p>\n  <a class='button positive big send_for_sign_off' href='#'>\n    Submit for Sign Off\n  </a>\n</p>"},3:function(t,e,n,i){return"<p>\n  <a class='button negative big revert_to_draft' href='#'>\n    Revert to Draft\n  </a>\n</p>"},5:function(t,e,n,i){return"<p>\n  <a class='button negative big reject_job_plan' href='#'>\n    Revert to Submitted\n  </a>\n</p>"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var s,o="";return s=e.if.call(t,null!=t?t["permission_to_send_for_sign_off?"]:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=s&&(o+=s),o+="\n",s=e.if.call(t,null!=t?t["permission_to_revert_to_draft?"]:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=s&&(o+=s),o+="\n",s=e.if.call(t,null!=t?t["permission_to_reject_job_plan?"]:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=s&&(o+=s),o},useData:!0}),this.HandlebarsTemplates.job_plan_status}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.meetings=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var s,o="function",r=e.helperMissing;return"<div class='header'>\n  <h3>Meetings</h3>\n</div>\n<div class='main'>\n  <div class='rc job_plan_gn_meetings'></div>\n  <form>\n    <fieldset>\n      <ol>\n        <li>\n          <label for='meetings_info' style='text-align:left;'>\n            Dates of job plan meetings and names of those present\n          </label>\n          <textarea class='meetings_info' id='meetings_info' name='meetings_info'>"+(0,this.escapeExpression)((s=null!=(s=e.meetings_info||(null!=t?t.meetings_info:t))?s:r,"function"==typeof s?s.call(t,{name:"meetings_info",hash:{},data:i}):s))+"</textarea>\n        </li>\n        <li class='last'>\n          <p class='right'>\n            <a class='button positive save' href='#'>Save</a>\n            <a class='button cancel' href='#'>Cancel</a>\n          </p>\n        </li>\n      </ol>\n    </fieldset>\n  </form>\n</div>"},useData:!0}),this.HandlebarsTemplates.meetings}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.nav_col=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return""},useData:!0}),this.HandlebarsTemplates.nav_col}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.nav_row=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var s,o="function",r=e.helperMissing,a=this.escapeExpression;return"<a href='#section/"+a((s=null!=(s=e.id||(null!=t?t.id:t))?s:r,typeof s===o?s.call(t,{name:"id",hash:{},data:i}):s))+"'>\n  <div class='number'>\n    <h3>"+a((s=null!=(s=e.number||(null!=t?t.number:t))?s:r,typeof s===o?s.call(t,{name:"number",hash:{},data:i}):s))+"</h3>\n  </div>\n  <div class='title'>\n    <h3>"+a((s=null!=(s=e.title||(null!=t?t.title:t))?s:r,typeof s===o?s.call(t,{name:"title",hash:{},data:i}):s))+"</h3>\n  </div>\n</a>"},useData:!0}),this.HandlebarsTemplates.nav_row}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.new_activity=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"<a class='button positive big new_activity' href='#'>\n  New Activity\n</a>"},useData:!0}),this.HandlebarsTemplates.new_activity}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.non_compulsory_signator_roles=Handlebars.template({1:function(t,e,n,i){var s,o,r="function",a=e.helperMissing,l=this.escapeExpression,c="  <h3>"+l((o=null!=(o=e.title||(null!=t?t.title:t))?o:a,"function"==typeof o?o.call(t,{name:"title",hash:{},data:i}):o))+"</h3>\n  <p> The job plan may be signed off by";return s=e.each.call(t,null!=t?t.collection:t,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=s&&(c+=s),c+'</p>\n  <div class="signatory_roles"></div>\n'},2:function(t,e,n,i){var s,o,r="function",a=e.helperMissing,l=this.escapeExpression,c="";return s=e.unless.call(t,i&&i.first,{name:"unless",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=s&&(c+=s),c+="&nbsp;a&nbsp;<strong>"+l((o=null!=(o=e.name||(null!=t?t.name:t))?o:a,"function"==typeof o?o.call(t,{name:"name",hash:{},data:i}):o))+"</strong>",s=e.if.call(t,i&&i.last,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=s&&(c+=s),c},3:function(t,e,n,i){var s,o="";return s=e.if.call(t,i&&i.last,{name:"if",hash:{},fn:this.program(4,i),inverse:this.program(6,i),data:i}),null!=s&&(o+=s),o},4:function(t,e,n,i){return"&nbsp;and/or"},6:function(t,e,n,i){return","},8:function(t,e,n,i){return"."},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var s;return s=e.if.call(t,null!=t?t.collection:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=s?s:""},useData:!0}),this.HandlebarsTemplates.non_compulsory_signator_roles}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.objectives=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"<div class='header'>\n  <h3>Objectives</h3>\n</div>\n<div class='main'>\n  <h2>The SMART mnemonic</h2>\n  <dl>\n    <dt>SPECIFIC</dt>\n    <dd>What would you like to achieve?</dd>\n    <dt>MEASURABLE</dt>\n    <dd>How will you know when you've achieved it?</dd>\n    <dt>ATTAINABLE</dt>\n    <dd>Is the objective achievable and attainable?</dd>\n    <dt>REALISTIC</dt>\n    <dd>Can you realistically achieve the objective with the resources you have?</dd>\n    <dt>TIME BOUNDED</dt>\n    <dd>When do you hope to achieve it by?</dd>\n  </dl>\n  <div class='rc job_plan_gn_objectives'></div>\n  <h2>Trust Objectives</h2>\n  <div class='rc job_plan_trust_objectives'></div>\n  <h2>Speciality Objectives</h2>\n  <div class='rc job_plan_gn_speciality_objectives'></div>\n  <table id='speciality_objectives'>\n    <thead>\n      <tr>\n        <th>SMART objective</th>\n      </tr>\n    </thead>\n    <tbody></tbody>\n  </table>\n  <p class='right'>\n    <a class='button positive new-speciality-objective' href='#'>Add Speciality Objective</a>\n  </p>\n  <div id='speciality-objective-forms'></div>\n  <h2>Personal Objectives</h2>\n  <div class='rc job_plan_gn_personal_objectives'></div>\n  <table id='personal_objectives'>\n    <thead>\n      <tr>\n        <th>SMART objective</th>\n      </tr>\n    </thead>\n    <tbody></tbody>\n  </table>\n  <p class='right'>\n    <a class='button positive new-personal-objective' href='#'>Add Personal Objective</a>\n  </p>\n  <div id='personal-objective-forms'></div>\n</div>"},useData:!0}),this.HandlebarsTemplates.objectives}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.on_call_supplement=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var s,o="function",r=e.helperMissing,a=this.escapeExpression;return"<div class='header'>\n  <h3>On Call Availability Supplement</h3>\n</div>\n<div class='main'>\n  <div class='rc job_plan_gn_on_call_supplement'></div>\n  <h4>On Call Activities</h4>\n  <table id='on_call_activities'></table>\n  <form>\n    <fieldset>\n      <ol>\n        <li>\n          <label>On-Call Frequency</label>\n          <fieldset>\n            <label for='ocas_freq_High frequency: 1 in 1 to 1 in 4'>\n              <input class='ocas_freq' name='ocas_freq' type='radio' value='High frequency: 1 in 1 to 1 in 4' />\n              High frequency: 1 in 1 to 1 in 4\n            </label>\n            <label for='ocas_freq_Medium frequency: 1 in 5 to 1 in 8'>\n              <input class='ocas_freq' name='ocas_freq' type='radio' value='Medium frequency: 1 in 5 to 1 in 8' />\n              Medium frequency: 1 in 5 to 1 in 8\n            </label>\n            <label for='ocas_freq_Low frequency: 1 in 9 or less frequent'>\n              <input class='ocas_freq' name='ocas_freq' type='radio' value='Low frequency: 1 in 9 or less frequent' />\n              Low frequency: 1 in 9 or less frequent\n            </label>\n          </fieldset>\n        </li>\n        <li>\n          <label for='on_call_category'>Agreed category (A,B or SAS)</label>\n          <select id='on_call_category'></select>\n        </li>\n        <li>\n          <label for='on_call_supplement'>On call supplement</label>\n          <input class='on_call_supplement' id=':on_call_supplement' type='text' value='"+a((s=null!=(s=e[":on_call_supplement"]||(null!=t?t[":on_call_supplement"]:t))?s:r,typeof s===o?s.call(t,{name:":on_call_supplement",hash:{},data:i}):s))+"' />\n        </li>\n        <li>\n          <label for='on_call_rota' style='text-align:left;'>\n            Additional breakdown of frequency e.g. 1:12 midweek nights, 1:6 weekend\n          </label>\n          <textarea class='autosizejs on_call_rota' id='on_call_rota' name='on_call_rota'>"+a((s=null!=(s=e.on_call_rota||(null!=t?t.on_call_rota:t))?s:r,typeof s===o?s.call(t,{name:"on_call_rota",hash:{},data:i}):s))+"</textarea>\n        </li>\n        <li class='last'>\n          <p class='right'>\n            <a class='button positive save' href='#'>Save</a>\n            <a class='button cancel' href='#'>Cancel</a>\n          </p>\n        </li>\n      </ol>\n    </fieldset>\n  </form>\n</div>"},useData:!0}),this.HandlebarsTemplates.on_call_supplement}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.other_agreements=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var s,o="function",r=e.helperMissing;return"<div class='header'>\n  <h3>Other Agreements</h3>\n</div>\n<div class='main'>\n  <div class='rc job_plan_gn_other_agreements'></div>\n  <form>\n    <fieldset>\n      <ol>\n        <li>\n          <label for='other_agreements' style='text-align:left;'>\n            Detail any other specific agreements in place regarding how the job plan operates.\n          </label>\n          <textarea class='other_agreements' id='other_agreements' name='other_agreements'>"+(0,this.escapeExpression)((s=null!=(s=e.other_agreements||(null!=t?t.other_agreements:t))?s:r,"function"==typeof s?s.call(t,{name:"other_agreements",hash:{},data:i}):s))+"</textarea>\n        </li>\n        <li class='last'>\n          <p class='right'>\n            <a class='button positive save' href='#'>Save</a>\n            <a class='button cancel' href='#'>Cancel</a>\n          </p>\n        </li>\n      </ol>\n    </fieldset>\n  </form>\n</div>"},useData:!0}),this.HandlebarsTemplates.other_agreements}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.overlapping_event_row=Handlebars.template({1:function(t,e,n,i){var s,o="function",r=e.helperMissing;return"<div>"+(0,this.escapeExpression)((s=null!=(s=e.benchmark||(null!=t?t.benchmark:t))?s:r,"function"==typeof s?s.call(t,{name:"benchmark",hash:{},data:i}):s))+"</div>"},3:function(t,e,n,i){var s=e.helperMissing;return"<div>OVERRIDE: "+(0,this.escapeExpression)((e.toFixed||t&&t.toFixed||s).call(t,null!=t?t.number_per_year:t,3,{name:"toFixed",hash:{},data:i}))+" per year</div>"},5:function(t,e,n,i){return"<div>PROSPECTIVE COVER</div>"},7:function(t,e,n,i){return"<div>ADDITIONAL TO CONTRACT</div>"},9:function(t,e,n,i){var s,o="function",r=e.helperMissing;return"<div>"+(0,this.escapeExpression)((s=null!=(s=e.subcategorisation||(null!=t?t.subcategorisation:t))?s:r,"function"==typeof s?s.call(t,{name:"subcategorisation",hash:{},data:i}):s))+"</div>"},11:function(t,e,n,i){var s,o="function",r=e.helperMissing;return"<div><em>"+(0,this.escapeExpression)((s=null!=(s=e.location||(null!=t?t.location:t))?s:r,"function"==typeof s?s.call(t,{name:"location",hash:{},data:i}):s))+"</em></div>"},13:function(t,e,n,i){var s,o="function",r=e.helperMissing;return"<div>"+(0,this.escapeExpression)((s=null!=(s=e.description||(null!=t?t.description:t))?s:r,"function"==typeof s?s.call(t,{name:"description",hash:{},data:i}):s))+"</div>"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var s,o,r="function",a=e.helperMissing,l=this.escapeExpression,c='<tr class="job-content jc-'+l((o=null!=(o=e.job_content_id||(null!=t?t.job_content_id:t))?o:a,typeof o===r?o.call(t,{name:"job_content_id",hash:{},data:i}):o))+'" data-job-content-id="'+l((o=null!=(o=e.job_content_id||(null!=t?t.job_content_id:t))?o:a,typeof o===r?o.call(t,{name:"job_content_id",hash:{},data:i}):o))+'">\n  <td class="day edit">'+l((e.subString||t&&t.subString||a).call(t,null!=t?t.day_name:t,3,{name:"subString",hash:{},data:i}))+"&nbsp;<span class='grayed'>"+l((o=null!=(o=e.mday||(null!=t?t.mday:t))?o:a,typeof o===r?o.call(t,{name:"mday",hash:{},data:i}):o))+" "+l((e.subString||t&&t.subString||a).call(t,null!=t?t.month_name:t,3,{name:"subString",hash:{},data:i}))+'</span></td>\n  <td class="day_start edit">'+l((o=null!=(o=e.day_start||(null!=t?t.day_start:t))?o:a,typeof o===r?o.call(t,{name:"day_start",hash:{},data:i}):o))+'</td>\n  <td class="day_end edit">'+l((o=null!=(o=e.day_end||(null!=t?t.day_end:t))?o:a,typeof o===r?o.call(t,{name:"day_end",hash:{},data:i}):o))+'</td>\n  <td class="categorisation edit"><strong>'+l((o=null!=(o=e.categorisation||(null!=t?t.categorisation:t))?o:a,typeof o===r?o.call(t,{name:"categorisation",hash:{},data:i}):o))+'</strong></td>\n  <td class="activity edit">\n    ';return s=e.if.call(t,null!=t?t.benchmark:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=s&&(c+=s),c+="\n    ",s=e.if.call(t,null!=t?t.annualised:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=s&&(c+=s),c+="\n    ",s=e.if.call(t,null!=t?t.prospective_cover:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=s&&(c+=s),c+="\n    ",s=e.if.call(t,null!=t?t.additional_to_contract:t,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=s&&(c+=s),c+="\n    ",s=e.if.call(t,null!=t?t.subcategorisation:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=s&&(c+=s),c+="\n    ",s=e.if.call(t,null!=t?t.location:t,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=s&&(c+=s),c+="\n    ",s=e.if.call(t,null!=t?t.description:t,{name:"if",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=s&&(c+=s),c+'\n  </td>\n  <td class="hours edit">'+l((e.toFixed||t&&t.toFixed||a).call(t,null!=t?t.hours:t,2,{name:"toFixed",hash:{},data:i}))+'</td>\n  <td class="pas edit">'+l((e.toFixed||t&&t.toFixed||a).call(t,null!=t?t.pas_by_day:t,3,{name:"toFixed",hash:{},data:i}))+'</td>\n  <td class="edit"><a href="#">Edit</a></td>\n  <td><a data-job-content-id="'+l((o=null!=(o=e.job_content_id||(null!=t?t.job_content_id:t))?o:a,typeof o===r?o.call(t,{name:"job_content_id",hash:{},data:i}):o))+'" class="destroy" href="#">Remove</a></td>\n</tr>'},useData:!0}),this.HandlebarsTemplates.overlapping_event_row}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.overlapping_events_table=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"<table class='no-pdf' id='overlapping-events'>\n  <caption>Please note: Depending on how you and your trust utilise the system, clashes DO NOT necessarily mean that the job plan is incorrect. They are highlighted to help avoid accidental mistakes, and can be ignored if you are aware of the reason for the clash.</caption>\n  <thead>\n    <tr>\n      <th class='day'>&nbsp;</th>\n      <th class='start_time'>Start</th>\n      <th class='end_time'>End</th>\n      <th class='categorisation'></th>\n      <th class='activity'>Activity</th>\n      <th class='hours'>Hours</th>\n      <th class='pas'>PAs</th>\n      <th class='edit'></th>\n      <th class='destroy'></th>\n    </tr>\n  </thead>\n  <tfoot id='summary'>\n    <tr>\n      <td colspan='9'>Displaying first 10 clashes</td>\n    </tr>\n  </tfoot>\n</table>"},useData:!0}),this.HandlebarsTemplates.overlapping_events_table}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.sign_off=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"<div class='header'>\n  <h3>Sign Off</h3>\n</div>\n<div class='main'>\n  <div class='rc job_plan_gn_sign_off'></div>\n  <table>\n    <tbody></tbody>\n  </table>\n</div>"},useData:!0}),this.HandlebarsTemplates.sign_off}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.signatories=Handlebars.template({1:function(t,e,n,i){return"<p class='right'>\n    <a class='button positive new-signatory' href='#'>Add Signatory</a>\n  </p>"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var s,o,r="function",a=e.helperMissing,l=this.escapeExpression,c="<div class='header'>\n  <h3>Signatories</h3>\n</div>\n<div class='main'>\n  <div class='rc job_plan_gn_signators'></div>\n  <h4>"+l((o=null!=(o=e.text_where_job_plan_owner_cannot_manage_signatories||(null!=t?t.text_where_job_plan_owner_cannot_manage_signatories:t))?o:a,"function"==typeof o?o.call(t,{name:"text_where_job_plan_owner_cannot_manage_signatories",hash:{},data:i}):o))+"</h4>\n  <div id='compulsory_signator_roles'></div>\n  <div id='non_compulsory_signator_roles'></div>\n  <table class='additional-signatories'>\n    <thead>\n      <tr>\n        <th>Tier</th>\n        <th>Name</th>\n        <th>Role</th>\n        <th>Email</th>\n      </tr>\n    </thead>\n    <tbody></tbody>\n  </table>\n  ";return s=e.if.call(t,null!=t?t.can_create_signatories:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=s&&(c+=s),c+"\n  <div id='signatory-forms'></div>\n</div>"},useData:!0}),this.HandlebarsTemplates.signatories}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.signatory_form=Handlebars.template({1:function(t,e,n,i){return"<h3>Add Signatory</h3>\n"},3:function(t,e,n,i){var s,o="function",r=e.helperMissing,a=this.escapeExpression;return"<h3>Editing Signatory: "+a((s=null!=(s=e.first_name||(null!=t?t.first_name:t))?s:r,typeof s===o?s.call(t,{name:"first_name",hash:{},data:i}):s))+" "+a((s=null!=(s=e.last_name||(null!=t?t.last_name:t))?s:r,typeof s===o?s.call(t,{name:"last_name",hash:{},data:i}):s))+"</h3>"},5:function(t,e,n,i){var s,o="<div id='errorExplanation'>\n  <h2>There was a problem saving this signatory to the database.</h2>\n  <p>There were problems with the following fields:</p>\n  <ul>\n";return s=e.each.call(t,null!=t?t.error_messages:t,{name:"each",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=s&&(o+=s),o+"  </ul>\n</div>"},6:function(t,e,n,i){var s=this.lambda;return"    <li>"+(0,this.escapeExpression)(s(t,t))+"</li>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var s,o,r="function",a=e.helperMissing,l=this.escapeExpression,c="";return s=e.if.call(t,null!=t?t.is_new:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=s&&(c+=s),c+="\n",s=e.if.call(t,null!=t?t.error_messages:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=s&&(c+=s),c+"\n<fieldset>\n  <ol>\n    <li class='first'>\n      <label for='tier'>Tier</label>\n      <input class='tier' id='tier' type='text' value='"+l((o=null!=(o=e.tier||(null!=t?t.tier:t))?o:a,typeof o===r?o.call(t,{name:"tier",hash:{},data:i}):o))+"' />\n    </li>\n    <li>\n      <label for='email'>Email</label>\n      <input class='email' id='email' type='text' value='"+l((o=null!=(o=e.email||(null!=t?t.email:t))?o:a,typeof o===r?o.call(t,{name:"email",hash:{},data:i}):o))+"' />\n    </li>\n    <li>\n      <label for='first_name'>First Name</label>\n      <input class='first_name' id='first_name' type='text' value='"+l((o=null!=(o=e.first_name||(null!=t?t.first_name:t))?o:a,typeof o===r?o.call(t,{name:"first_name",hash:{},data:i}):o))+"' />\n    </li>\n    <li>\n      <label for='last_name'>Last Name</label>\n      <input class='last_name' id='last_name' type='text' value='"+l((o=null!=(o=e.last_name||(null!=t?t.last_name:t))?o:a,typeof o===r?o.call(t,{name:"last_name",hash:{},data:i}):o))+"' />\n    </li>\n    <li>\n      <label for='role'>Role</label>\n      <input class='role' id='role' type='text' value='"+l((o=null!=(o=e.role||(null!=t?t.role:t))?o:a,typeof o===r?o.call(t,{name:"role",hash:{},data:i}):o))+"' />\n    </li>\n    <li class='last'>\n      <p class='right'>\n        <a class='button positive save' href='#'>Save</a>\n        <a class='button cancel' href='#'>Cancel</a>\n      </p>\n    </li>\n  </ol>\n</fieldset>"},useData:!0}),this.HandlebarsTemplates.signatory_form}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.signatory_from_role_form=Handlebars.template({1:function(t,e,n,i){var s,o="<div id='errorExplanation'>\n  <h2>There was a problem saving this signatory to the database.</h2>\n  <p>There were problems with the following fields:</p>\n  <ul>\n";return s=e.each.call(t,null!=t?t.error_messages:t,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=s&&(o+=s),o+"  </ul>\n</div>"},2:function(t,e,n,i){var s=this.lambda;return"    <li>"+(0,this.escapeExpression)(s(t,t))+"</li>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var s,o="";return s=e.if.call(t,null!=t?t.error_messages:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=s&&(o+=s),o+"\n<p>\n  <select class='possible-signatories'></select>\n  <a class='button positive add-signatory'>Add</a>\n</p>"},useData:!0}),this.HandlebarsTemplates.signatory_from_role_form}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.signatory_role=Handlebars.template({1:function(t,e,n,i){return"<div class='new-signatory-from-role no-pdf'></div>"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var s,o,r="function",a=e.helperMissing,l=this.escapeExpression,c="<h4>"+l((o=null!=(o=e.name||(null!=t?t.name:t))?o:a,"function"==typeof o?o.call(t,{name:"name",hash:{},data:i}):o))+"</h4>\n";return s=e.if.call(t,null!=t?t.can_create_signatories:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=s&&(c+=s),c},useData:!0}),this.HandlebarsTemplates.signatory_role}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.signatory_row=Handlebars.template({1:function(t,e,n,i){return"<a class='no-pdf edit' href='#'>Edit</a>"},3:function(t,e,n,i){return"<a class='no-pdf destroy' href='#'>Remove</a>"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var s,o,r="function",a=e.helperMissing,l=this.escapeExpression,c="<td class='tier'>"+l((o=null!=(o=e.tier||(null!=t?t.tier:t))?o:a,typeof o===r?o.call(t,{name:"tier",hash:{},data:i}):o))+"</td>\n<td class='name'>"+l((o=null!=(o=e.first_name||(null!=t?t.first_name:t))?o:a,typeof o===r?o.call(t,{name:"first_name",hash:{},data:i}):o))+" "+l((o=null!=(o=e.last_name||(null!=t?t.last_name:t))?o:a,typeof o===r?o.call(t,{name:"last_name",hash:{},data:i}):o))+"</td>\n<td class='role'>"+l((o=null!=(o=e.role||(null!=t?t.role:t))?o:a,typeof o===r?o.call(t,{name:"role",hash:{},data:i}):o))+"</td>\n<td class='email'>"+l((o=null!=(o=e.email||(null!=t?t.email:t))?o:a,typeof o===r?o.call(t,{name:"email",hash:{},data:i}):o))+"</td>\n<td>\n  ";return s=e.if.call(t,null!=t?t.can_update_signatories:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=s&&(c+=s),c+="\n</td>\n<td>\n  ",s=e.if.call(t,null!=t?t.can_destroy_signatories:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=s&&(c+=s),c+"\n</td>"},useData:!0}),this.HandlebarsTemplates.signatory_row}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.signatory_table=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"<tr class='blank'>\n  <td>-</td>\n  <td>-</td>\n  <td>-</td>\n  <td>-</td>\n</tr>"},useData:!0}),this.HandlebarsTemplates.signatory_table}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.signature_row=Handlebars.template({1:function(t,e,n,i){var s,o="";return s=e.unless.call(t,null!=t?t["signed?"]:t,{name:"unless",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=s&&(o+=s),o},2:function(t,e,n,i){var s,o="function",r=e.helperMissing;return"      <br/><strong>Signature requested "+(0,this.escapeExpression)((s=null!=(s=e.sent_signature_request_at_formatted||(null!=t?t.sent_signature_request_at_formatted:t))?s:r,"function"==typeof s?s.call(t,{name:"sent_signature_request_at_formatted",hash:{},data:i}):s))+"</strong>\n"},4:function(t,e,n,i){return'    <br/>\n    <br/>\n    <a href="#" class="request-signature button">Send Reminder</a>\n'},6:function(t,e,n,i){var s,o="function",r=e.helperMissing;return"        "+(0,this.escapeExpression)((s=null!=(s=e.full_name_without_symbols||(null!=t?t.full_name_without_symbols:t))?s:r,"function"==typeof s?s.call(t,{name:"full_name_without_symbols",hash:{},data:i}):s))+"\n"},8:function(t,e,n,i){var s,o="function",r=e.helperMissing;return'        <span style="text-decoration:line-through">'+(0,this.escapeExpression)((s=null!=(s=e.full_name_without_symbols||(null!=t?t.full_name_without_symbols:t))?s:r,"function"==typeof s?s.call(t,{name:"full_name_without_symbols",hash:{},data:i}):s))+"</span>\n"},10:function(t,e,n,i){return'      <a href="#" class="sign button positive">Sign</a>\n'},12:function(t,e,n,i){return'      <a href="#" class="revoke button negative">Revoke</a>\n'},14:function(t,e,n,i){var s,o="function",r=e.helperMissing;return"    Signed on: "+(0,this.escapeExpression)((s=null!=(s=e.signed_at_formatted||(null!=t?t.signed_at_formatted:t))?s:r,"function"==typeof s?s.call(t,{name:"signed_at_formatted",hash:{},data:i}):s))+"\n"},16:function(t,e,n,i){var s,o="function",r=e.helperMissing;return"    Revoked on: "+(0,this.escapeExpression)((s=null!=(s=e.revoked_at_formatted||(null!=t?t.revoked_at_formatted:t))?s:r,"function"==typeof s?s.call(t,{name:"revoked_at_formatted",hash:{},data:i}):s))+"\n"},18:function(t,e,n,i){var s,o='      <div id="errorExplanation">\n        <h2>Action is required before this job plan can be signed:</h2>\n        <ul>\n';return s=e.each.call(t,null!=t?t.error_messages:t,{name:"each",hash:{},fn:this.program(19,i),inverse:this.noop,data:i}),null!=s&&(o+=s),o+"        </ul>\n      </div>\n"},19:function(t,e,n,i){var s=this.lambda;return"            <li>"+(0,this.escapeExpression)(s(t,t))+"</li>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var s,o,r="function",a=e.helperMissing,l=this.escapeExpression,c='<td class="name">\n  <strong>'+l((o=null!=(o=e.first_name||(null!=t?t.first_name:t))?o:a,typeof o===r?o.call(t,{name:"first_name",hash:{},data:i}):o))+" "+l((o=null!=(o=e.last_name||(null!=t?t.last_name:t))?o:a,typeof o===r?o.call(t,{name:"last_name",hash:{},data:i}):o))+"</strong><br/>\n  Tier: "+l((o=null!=(o=e.tier||(null!=t?t.tier:t))?o:a,typeof o===r?o.call(t,{name:"tier",hash:{},data:i}):o))+"<br/>\n  "+l((o=null!=(o=e.role||(null!=t?t.role:t))?o:a,typeof o===r?o.call(t,{name:"role",hash:{},data:i}):o))+"\n  <br/>\n  "+l((o=null!=(o=e.email||(null!=t?t.email:t))?o:a,typeof o===r?o.call(t,{name:"email",hash:{},data:i}):o))+"\n  <br/>\n";return s=e.if.call(t,null!=t?t.sent_signature_request_at_formatted:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=s&&(c+=s),s=e.if.call(t,null!=t?t["permission_to_request_signature?"]:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=s&&(c+=s),c+='</td>\n<td class="signature">\n  <p class="signature">\n    <span class="signature-font">\n',s=e.if.call(t,null!=t?t["signed?"]:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=s&&(c+=s),s=e.if.call(t,null!=t?t["revoked?"]:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=s&&(c+=s),c+="    </span>\n",s=e.if.call(t,null!=t?t["permission_to_sign?"]:t,{name:"if",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=s&&(c+=s),s=e.if.call(t,null!=t?t["permission_to_revoke?"]:t,{name:"if",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=s&&(c+=s),c+='    <span class="signature-font">&nbsp;</span>\n  </p>\n  <p>\n',s=e.if.call(t,null!=t?t.signed_at_formatted:t,{name:"if",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=s&&(c+=s),c+="  <br/>\n",s=e.if.call(t,null!=t?t["revoked?"]:t,{name:"if",hash:{},fn:this.program(16,i),inverse:this.noop,data:i}),null!=s&&(c+=s),c+="  </p>\n",s=e.if.call(t,null!=t?t.error_messages:t,{name:"if",hash:{},fn:this.program(18,i),inverse:this.noop,data:i}),null!=s&&(c+=s),c+"</td>\n\n"},useData:!0}),this.HandlebarsTemplates.signature_row}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.smart_form=Handlebars.template({1:function(t,e,n,i){return"<h3>Add SMART Objective</h3>\n"},3:function(t,e,n,i){return"<h3>Editing SMART Objective</h3>"},5:function(t,e,n,i){var s,o="<div id='errorExplanation'>\n  <h2>There was a problem saving this objective to the database.</h2>\n  <p>There were problems with the following fields:</p>\n  <ul>\n";return s=e.each.call(t,null!=t?t.error_messages:t,{name:"each",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=s&&(o+=s),o+"  </ul>\n</div>"},6:function(t,e,n,i){var s=this.lambda;return"    <li>"+(0,this.escapeExpression)(s(t,t))+"</li>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var s,o,r="function",a=e.helperMissing,l=this.escapeExpression,c="";return s=e.if.call(t,null!=t?t.is_new:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=s&&(c+=s),c+="\n",s=e.if.call(t,null!=t?t.error_messages:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=s&&(c+=s),c+"\n<fieldset>\n  <ol>\n    <li class='first'>\n      <label for='specific'>\n        SPECIFIC\n        <br />\n        What would you like to achieve?\n      </label>\n      <textarea class='specific' id='specific' type='text' value='"+l((o=null!=(o=e.specific||(null!=t?t.specific:t))?o:a,typeof o===r?o.call(t,{name:"specific",hash:{},data:i
}):o))+"'></textarea>\n    </li>\n    <li>\n      <label for='measurable'>\n        MEASURABLE\n        <br />\n        How will you know when you've achieved it?\n      </label>\n      <textarea class='measurable' id='measurable' type='text' value='"+l((o=null!=(o=e.measurable||(null!=t?t.measurable:t))?o:a,typeof o===r?o.call(t,{name:"measurable",hash:{},data:i}):o))+"'></textarea>\n    </li>\n    <li>\n      <label for='attainable'>\n        ATTAINABLE\n        <br />\n        Is the objective achievable and attainable?\n      </label>\n      <textarea class='attainable' id='attainable' type='text' value='"+l((o=null!=(o=e.attainable||(null!=t?t.attainable:t))?o:a,typeof o===r?o.call(t,{name:"attainable",hash:{},data:i}):o))+"'></textarea>\n    </li>\n    <li>\n      <label for='relevant'>\n        REALISTIC\n        <br />\n        Can you realistically achieve the objective with the resources you have?\n      </label>\n      <textarea class='relevant' id='relevant' type='text' value='"+l((o=null!=(o=e.relevant||(null!=t?t.relevant:t))?o:a,typeof o===r?o.call(t,{name:"relevant",hash:{},data:i}):o))+"'></textarea>\n    </li>\n    <li>\n      <label for='timely'>\n        TIME BOUNDED\n        <br />\n        When do you hope to achieve it by?\n      </label>\n      <textarea class='timely' id='timely' type='text' value='"+l((o=null!=(o=e.timely||(null!=t?t.timely:t))?o:a,typeof o===r?o.call(t,{name:"timely",hash:{},data:i}):o))+"'></textarea>\n    </li>\n    <li class='last'>\n      <p class='right'>\n        <a class='button positive save' href='#'>Save</a>\n        <a class='button cancel' href='#'>Cancel</a>\n      </p>\n    </li>\n  </ol>\n</fieldset>"},useData:!0}),this.HandlebarsTemplates.smart_form}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.smart_row=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var s,o="function",r=e.helperMissing,a=this.escapeExpression;return"<td class='specific'>\n  <strong>S:</strong>\n  "+a((s=null!=(s=e.specific||(null!=t?t.specific:t))?s:r,typeof s===o?s.call(t,{name:"specific",hash:{},data:i}):s))+"\n  <br />\n  <strong>M:</strong>\n  "+a((s=null!=(s=e.measurable||(null!=t?t.measurable:t))?s:r,typeof s===o?s.call(t,{name:"measurable",hash:{},data:i}):s))+"\n  <br />\n  <strong>A:</strong>\n  "+a((s=null!=(s=e.attainable||(null!=t?t.attainable:t))?s:r,typeof s===o?s.call(t,{name:"attainable",hash:{},data:i}):s))+"\n  <br />\n  <strong>R:</strong>\n  "+a((s=null!=(s=e.relevant||(null!=t?t.relevant:t))?s:r,typeof s===o?s.call(t,{name:"relevant",hash:{},data:i}):s))+"\n  <br />\n  <strong>T:</strong>\n  "+a((s=null!=(s=e.timely||(null!=t?t.timely:t))?s:r,typeof s===o?s.call(t,{name:"timely",hash:{},data:i}):s))+"\n</td>\n<td>\n  <a class='no-pdf edit' href='#'>Edit</a>\n</td>\n<td>\n  <a class='no-pdf destroy' href='#'>Remove</a>\n</td>"},useData:!0}),this.HandlebarsTemplates.smart_row}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.smart_table=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"<tr class='blank'>\n  <td>-</td>\n</tr>"},useData:!0}),this.HandlebarsTemplates.smart_table}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.spa_note_form=Handlebars.template({1:function(t,e,n,i){return"<h3>Add SPA Note</h3>\n"},3:function(t,e,n,i){return"<h3>Editing SPA Note</h3>"},5:function(t,e,n,i){var s,o="<div id='errorExplanation'>\n  <h2>There was a problem saving this SPA Note to the database.</h2>\n  <p>There were problems with the following fields:</p>\n  <ul>\n";return s=e.each.call(t,null!=t?t.error_messages:t,{name:"each",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=s&&(o+=s),o+"  </ul>\n</div>"},6:function(t,e,n,i){var s=this.lambda;return"    <li>"+(0,this.escapeExpression)(s(t,t))+"</li>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var s,o,r="function",a=e.helperMissing,l=this.escapeExpression,c="";return s=e.if.call(t,null!=t?t.is_new:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=s&&(c+=s),c+="\n",s=e.if.call(t,null!=t?t.error_messages:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=s&&(c+=s),c+"\n<fieldset>\n  <ol>\n    <li class='first'>\n      <label for='description'>Notes / Detail</label>\n      <textarea class='description' id='description' type='text' value='"+l((o=null!=(o=e.description||(null!=t?t.description:t))?o:a,typeof o===r?o.call(t,{name:"description",hash:{},data:i}):o))+"'></textarea>\n    </li>\n    <li>\n      <label for='spa_number'>Number of SPAs per week</label>\n      <input class='spa_number' id='spa_number' type='text' value='"+l((o=null!=(o=e.spa_number||(null!=t?t.spa_number:t))?o:a,typeof o===r?o.call(t,{name:"spa_number",hash:{},data:i}):o))+"' />\n    </li>\n    <li class='last'>\n      <p class='right'>\n        <a class='button positive save' href='#'>Save</a>\n        <a class='button cancel' href='#'>Cancel</a>\n      </p>\n    </li>\n  </ol>\n</fieldset>"},useData:!0}),this.HandlebarsTemplates.spa_note_form}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.spa_note_row=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var s,o="function",r=e.helperMissing,a=this.escapeExpression;return"<td class='description'>"+a((s=null!=(s=e.description||(null!=t?t.description:t))?s:r,typeof s===o?s.call(t,{name:"description",hash:{},data:i}):s))+"</td>\n<td class='spa_number'>"+a((s=null!=(s=e.spa_number||(null!=t?t.spa_number:t))?s:r,typeof s===o?s.call(t,{name:"spa_number",hash:{},data:i}):s))+"</td>\n<td>\n  <a class='no-pdf edit' href='#'>Edit</a>\n</td>\n<td>\n  <a class='no-pdf destroy' href='#'>Remove</a>\n</td>"},useData:!0}),this.HandlebarsTemplates.spa_note_row}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.spa_notes=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"<div class='header'>\n  <h3>Agreed SPA Activity</h3>\n</div>\n<div class='main'>\n  <div class='rc job_plan_gn_spa_activity'></div>\n  <p>Your SPAs from the Timetable in Section 3:</p>\n  <table class='spas'>\n    <thead>\n      <tr>\n        <th>Repeat</th>\n        <th class='start_time'>Start</th>\n        <th class='end_time'>End</th>\n        <th>Activity / Location</th>\n        <th class='hours'>Hours</th>\n        <th class='pas'>PA</th>\n      </tr>\n    </thead>\n    <tbody></tbody>\n  </table>\n  <p>Use this section to go into more details on exactly what SPA activities are undertaken.</p>\n  <table id='spa_notes'>\n    <thead>\n      <tr>\n        <th>Notes / Detail â€“ please record activity</th>\n        <th>Number of SPAs per week</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr class='blank'>\n        <td>-</td>\n        <td>-</td>\n      </tr>\n    </tbody>\n  </table>\n  <p class='right'>\n    <a class='button positive add-spa-note' href='#'>Add SPA Note</a>\n  </p>\n  <div id='spa-note-forms'></div>\n</div>"},useData:!0}),this.HandlebarsTemplates.spa_notes}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.spa_table=Handlebars.template({1:function(t,e,n,i){var s,o="function",r=e.helperMissing,a=this.escapeExpression;return'  <tr>    \n    <td class="schedule_description">'+a((s=null!=(s=e.schedule_description||(null!=t?t.schedule_description:t))?s:r,typeof s===o?s.call(t,{name:"schedule_description",hash:{},data:i}):s))+'</td>\n    <td class="start_time">'+a((s=null!=(s=e.start_time||(null!=t?t.start_time:t))?s:r,typeof s===o?s.call(t,{name:"start_time",hash:{},data:i}):s))+'</td>\n    <td class="end_time">'+a((s=null!=(s=e.end_time||(null!=t?t.end_time:t))?s:r,typeof s===o?s.call(t,{name:"end_time",hash:{},data:i}):s))+'</td>\n    <td class="activity">\n      '+a((s=null!=(s=e.categorisation||(null!=t?t.categorisation:t))?s:r,typeof s===o?s.call(t,{name:"categorisation",hash:{},data:i}):s))+": "+a((s=null!=(s=e.subcategorisation||(null!=t?t.subcategorisation:t))?s:r,typeof s===o?s.call(t,{name:"subcategorisation",hash:{},data:i}):s))+"<br/>\n      "+a((s=null!=(s=e.location||(null!=t?t.location:t))?s:r,typeof s===o?s.call(t,{name:"location",hash:{},data:i}):s))+"<br/>\n      "+a((s=null!=(s=e.description||(null!=t?t.description:t))?s:r,typeof s===o?s.call(t,{name:"description",hash:{},data:i}):s))+'\n    </td>\n    <td class="hours">'+a((e.toFixed||t&&t.toFixed||r).call(t,null!=t?t.hours:t,2,{name:"toFixed",hash:{},data:i}))+'</td>\n    <td class="pas">'+a((e.toFixed||t&&t.toFixed||r).call(t,null!=t?t.pas:t,2,{name:"toFixed",hash:{},data:i}))+"</td>\n  <tr>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var s;return s=e.each.call(t,null!=t?t.rows:t,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=s?s:""},useData:!0}),this.HandlebarsTemplates.spa_table}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.supporting_resources=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var s,o="function",r=e.helperMissing,a=this.escapeExpression;return"<div class='header'>\n  <h3>Supporting Resources</h3>\n</div>\n<div class='main'>\n  <div class='rc job_plan_gn_supporting_resources'></div>\n  <form>\n    <fieldset>\n      <ol>\n        <li>\n          <p>\n            Facilities and resources required for delivery of duties and objectives\n          </p>\n        </li>\n        <li>\n          <label for='staffing_support' style='text-align:left;'>\n            Staffing support\n          </label>\n          <textarea class='staffing_support' id='staffing_support' name='staffing_support'>"+a((s=null!=(s=e.staffing_support||(null!=t?t.staffing_support:t))?s:r,typeof s===o?s.call(t,{name:"staffing_support",hash:{},data:i}):s))+"</textarea>\n        </li>\n        <li>\n          <label for='accomodation' style='text-align:left;'>\n            Accommodation\n          </label>\n          <textarea class='accomodation' id='accomodation' name='accomodation'>"+a((s=null!=(s=e.accomodation||(null!=t?t.accomodation:t))?s:r,typeof s===o?s.call(t,{name:"accomodation",hash:{},data:i}):s))+"</textarea>\n        </li>\n        <li>\n          <label for='equipment' style='text-align:left;'>\n            Equipment\n          </label>\n          <textarea class='equipment' id='equipment' name='equipment'>"+a((s=null!=(s=e.equipment||(null!=t?t.equipment:t))?s:r,typeof s===o?s.call(t,{name:"equipment",hash:{},data:i}):s))+"</textarea>\n        </li>\n        <li>\n          <label for='any_other_resources' style='text-align:left;'>\n            Any other required resources\n          </label>\n          <textarea class='any_other_resources' id='any_other_resources' name='any_other_resources'>"+a((s=null!=(s=e.any_other_resources||(null!=t?t.any_other_resources:t))?s:r,typeof s===o?s.call(t,{name:"any_other_resources",hash:{},data:i}):s))+"</textarea>\n        </li>\n        <li class='last'>\n          <p class='right'>\n            <a class='button positive save' href='#'>Save</a>\n            <a class='button cancel' href='#'>Cancel</a>\n          </p>\n        </li>\n      </ol>\n    </fieldset>\n  </form>\n</div>"},useData:!0}),this.HandlebarsTemplates.supporting_resources}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.timetable=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"<div class='header'>\n  <h3>Timetable</h3>\n</div>\n<div id='new-activity'></div>\n<div id='timetable-tabs'></div>\n<div id='calendar'></div>\n<div id='breakdown'>\n  <table id='breakdown_job_contents'></table>\n</div>\n<div id='all-activities'>\n  <div id='job-content-sort-picker'></div>\n  <table id='job-contents'></table>\n</div>\n<div id='warning'></div>\n<div class='panel'>\n  <div class='rc job_plan_gn_job_content'></div>\n</div>\n<div class='panel' id='contracted-pas' style='margin-bottom: 0px;'></div>\n<div class='clear'></div>"},useData:!0}),this.HandlebarsTemplates.timetable}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.timetable_tabs=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"<ul class='no-pdf' id='subnav'>\n  <li class='tab' id='all-activities-tab'>\n    <a>\n      <h3>Overview</h3>\n    </a>\n  </li>\n  <li class='tab' id='breakdown-tab'>\n    <a>\n      <h3>Breakdown</h3>\n    </a>\n  </li>\n  <li class='tab' id='calendar-tab'>\n    <a>\n      <h3>Weekly Calendar</h3>\n    </a>\n  </li>\n</ul>"},useData:!0}),this.HandlebarsTemplates.timetable_tabs}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.title_header=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var s,o="function",r=e.helperMissing,a=this.escapeExpression;return"<div class='page-title-with-state'>\n  "+a((s=null!=(s=e.title||(null!=t?t.title:t))?s:r,typeof s===o?s.call(t,{name:"title",hash:{},data:i}):s))+" for\n  <span class='bold'>"+a((s=null!=(s=e.owner_name||(null!=t?t.owner_name:t))?s:r,typeof s===o?s.call(t,{name:"owner_name",hash:{},data:i}):s))+"</span>\n</div>\n<div class='state "+a((s=null!=(s=e.human_state_name_downcase||(null!=t?t.human_state_name_downcase:t))?s:r,typeof s===o?s.call(t,{name:"human_state_name_downcase",hash:{},data:i}):s))+"'>"+a((s=null!=(s=e.human_state_name_upcase||(null!=t?t.human_state_name_upcase:t))?s:r,typeof s===o?s.call(t,{name:"human_state_name_upcase",hash:{},data:i}):s))+"</div>\n<br class='clear' />"},useData:!0}),this.HandlebarsTemplates.title_header}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.warning_tab=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"<li class='tab' id='warning-tab'>\n  <a>\n    <h3>Clashing Activities</h3>\n  </a>\n</li>"},useData:!0}),this.HandlebarsTemplates.warning_tab}.call(this),Handlebars.registerHelper("toFixed",function(t,e){return void 0!==t&&null!==t?Number(t.toFixed(e)):Number((0).toFixed(e))}),Handlebars.registerHelper("subString",function(t,e){return"string"!=typeof t?null:t.substring(0,e)}),Handlebars.registerHelper("valueAt",function(t,e){return t[e]}),Handlebars.registerHelper("capitalize",function(t){return t.charAt(0).toUpperCase()+t.slice(1)}),function(){window.JPApp={Router:{},Models:{},Collections:{},Views:{},Helpers:{},dispatcher:_.clone(Backbone.Events),debug:{},job_content_categories:[],LOG_EVENTS:!1,ON_CALL_MATRIX:{High:{A:"8.0%",B:"3.0%",SAS:"6.0%"},Medium:{A:"5.0%",B:"2.0%",SAS:"4.0%"},Low:{A:"3.0%",B:"1.0%",SAS:"2.0%"}}},JPApp.App=function(){function t(t){this.options=t,this.options.bootstrap_data.current_user_id?JPApp.current_user_id=this.options.bootstrap_data.current_user_id:JPApp.current_guest_user_id=this.options.bootstrap_data.current_guest_user_id,JPApp.permissions=this.options.bootstrap_data.permissions,JPApp.pdf_action=this.options.bootstrap_data.pdf_action,JPApp.current_week_number=this.options.bootstrap_data.current_week_number,JPApp.day_names=this.options.bootstrap_data.day_names,JPApp.repeats_options=this.options.bootstrap_data.repeats_options,JPApp.sections=this.options.bootstrap_data.sections,JPApp.suggested_signatories_title=this.options.bootstrap_data.suggested_signatories_title,JPApp.directorates=this.options.bootstrap_data.directorates,JPApp.job_content_categories=new JPApp.Collections.Categories(this.options.bootstrap_data.job_content_categories),JPApp.job_content_benchmarks=new JPApp.Collections.Benchmarks(this.options.bootstrap_data.job_content_benchmarks),JPApp.job_content_subcategories=new JPApp.Collections.Subcategories(this.options.bootstrap_data.job_content_subcategories),JPApp.job_content_locations=new JPApp.Collections.Locations(this.options.bootstrap_data.job_content_locations),JPApp.common_employers=new JPApp.Collections.Employers(this.options.bootstrap_data.common_employers),JPApp.has_location_dropdown=this.options.bootstrap_data.has_location_dropdown,JPApp.has_benchmarks=this.options.bootstrap_data.has_benchmarks,JPApp.has_jp_tags=this.options.bootstrap_data.has_jp_tags,JPApp.tags=new JPApp.Collections.Tags(this.options.bootstrap_data.tags),JPApp.has_overlap_check=this.options.bootstrap_data.has_overlap_check,window.job_plan=new JPApp.Models.JobPlan(this.options.bootstrap_data.job_plan),window.specialities=new JPApp.Collections.Specialities(this.options.bootstrap_data.specialities)}return t.prototype.start=function(){return JPApp.Helpers.disable_forms(),window.nav_rows=new JPApp.Collections.NavRows(JPApp.sections),window.nav_col_view=new JPApp.Views.NavCol({collection:window.nav_rows}),window.activity_summary=new JPApp.Models.ActivitySummary,window.job_contents=new JPApp.Collections.JobContents,window.calendar_selector=new JPApp.Models.CalendarSelector({}),window.job_contents.fetch(),window.calendar_table_day_rows=new JPApp.Collections.CalendarTableDayRows,window.calendar_selector_view=new JPApp.Views.CalendarSelector({collection:window.calendar_table_day_rows,model:window.calendar_selector}),window.signatories=new JPApp.Collections.Signatories,window.spa_notes=new JPApp.Collections.SPANotes,window.ars_notes=new JPApp.Collections.ARSNotes,window.speciality_objectives=new JPApp.Collections.SpecialityObjectives,window.personal_objectives=new JPApp.Collections.PersonalObjectives,window.comments=new JPApp.Collections.Comments,window.activity_summary_view=new JPApp.Views.ActivitySummary({el:"#left-activity-summary",model:window.activity_summary}),window.title_header=new JPApp.Views.TitleHeader({model:window.job_plan}),window.compulsory_signator_roles=new JPApp.Collections.SignatorRoles(window.job_plan.get("compulsory_signatories"),{compulsory:!0}),window.non_compulsory_signator_roles=new JPApp.Collections.SignatorRoles(window.job_plan.get("non_compulsory_signatories"),{compulsory:!1}),window.suggested_signatories_title=JPApp.suggested_signatories_title,window.edocs=new JPApp.Collections.Edocs,window.max_week_number=window.job_plan.get("max_week_number"),JPApp.has_overlap_check&&(window.overlapping_events=new JPApp.Collections.OverlappingEvents),JPApp.section_views={instructions:new JPApp.Views.Instructions,general_info:new JPApp.Views.GeneralInfo({model:window.job_plan}),signatories:new JPApp.Views.Signatories({model:window.job_plan}),timetable:new JPApp.Views.Timetable({model:window.job_plan}),on_call_supplement:new JPApp.Views.OnCallSupplement({model:window.job_plan}),spa_notes:new JPApp.Views.SPANotes,additional_external:new JPApp.Views.AdditionalExternal,other_agreements:new JPApp.Views.OtherAgreements({model:window.job_plan}),additional_pas:new JPApp.Views.AdditionalPAs({model:window.job_plan}),fee_paying_services:new JPApp.Views.FeePayingServices({model:window.job_plan}),objectives:new JPApp.Views.Objectives({model:window.job_plan}),supporting_resources:new JPApp.Views.SupportingResources({model:window.job_plan}),general_discussion:new JPApp.Views.GeneralDiscussion({model:window.job_plan}),meetings:new JPApp.Views.Meetings({model:window.job_plan}),sign_off:new JPApp.Views.SignOff},JPApp.Helpers.disable_section_views(),window.job_plan_status=new JPApp.Views.JobPlanStatus({model:window.job_plan}),window.comment_list_view=new JPApp.Views.CommentListView({collection:window.comments}),new JPApp.Router,Backbone.history.start(),JPApp.Helpers.AutosizeTextareas()},t}()}.call(this),function(){JPApp.Helpers.AutosizeTextareas=function(){return $("textarea").autosize({append:"\n"})}}.call(this),function(){JPApp.Helpers.Capitalize=function(t){return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}}.call(this),function(){Backbone.View.prototype.disable_form_elements=function(t){var e,n;e={disabled:!0},n=$.extend({},e,t||{}),this.$("input").prop("disabled",n.disabled),this.$("select").prop("disabled",n.disabled),this.$("textarea").prop("disabled",n.disabled),this.$("button").prop("disabled",n.disabled),this.$(".clickable_td").prop("disabled",n.disabled)}}.call(this),function(){JPApp.Helpers.disable_form_wrap=function(t){t.render=function(t){return function(){var e;return e=t.apply(this,arguments),this.disable_form_elements({disabled:!JPApp.permissions.can_edit_job_plan}),e}}(t.render)}}.call(this),function(){JPApp.Helpers.disable_forms=function(){return _.each(JPApp.Views,function(t){JPApp.Helpers.disable_form_wrap(t.prototype)},this)}}.call(this),function(){JPApp.Helpers.disable_section_views=function(){return _.each(JPApp.section_views,function(t){t.disable_form_elements({disabled:!JPApp.permissions.can_edit_job_plan})},this)}}.call(this),function(){JPApp.dispatcher.on("all",function(t,e){JPApp.LOG_EVENTS&&console.log(t,e.cid)})}.call(this),function(){JPApp.Helpers.PublishEvents=function(t,e,n){JPApp.dispatcher.trigger(t+":"+e+":new",n),n.on("all",function(i){JPApp.dispatcher.trigger(t+":"+e+":"+i,n)})}}.call(this),function(){JPApp.Helpers.ZombieTracker=function(){_.each(JPApp.Views,function(t){t.prototype.initialize=function(t){return function(){return(JPApp.views=JPApp.views||[]).push(this),t.apply(this,arguments)}}(t.prototype.initialize)},this),_.each(JPApp.Models,function(t){t.prototype.initialize=function(t){return function(){return(JPApp.models=JPApp.models||[]).push(this),t.apply(this,arguments)}}(t.prototype.initialize)},this),_.each(JPApp.Collections,function(t){t.prototype.initialize=function(t){return function(){return(JPApp.collections=JPApp.models||[]).push(this),t.apply(this,arguments)}}(t.prototype.initialize)},this)}}.call(this),function(){JPApp.Router=Backbone.Router.extend({initialize:function(){JPApp.Helpers.PublishEvents("router","jpapp",this)},routes:{"":"sectionController","section/:id":"sectionController"},sectionController:function(t){JPApp.pdf_action?_.each(JPApp.section_views,function(t){$("#section-view").append(t.$el)},this):($("#nav-col .active").removeClass("active"),window.nav_rows.get(t||"instructions").nav_view.$el.addClass("active"),$("#section-view .section").detach(),$("#section-view").append(JPApp.section_views[t||"instructions"].$el),"timetable"===t&&($("#timetable-tabs .active").removeClass("active"),$("#all-activities-tab").addClass("active"),$("#breakdown").hide(),$("#calendar").hide(),$("#warning").hide(),$("#all-activities").show()))}})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Models.ActivitySummary=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("model","activity_summary",this),this.listenTo(JPApp.dispatcher,"collection:job_contents:sync collection:job_contents:remove",this.fetch)},n.prototype.urlRoot=function(){return window.job_plan.url()+"/activity_summary"},n}(Backbone.Model)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Models.ARSNote=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.idAttribute="_id",n.prototype.paramRoot="additional_responsibility",n.prototype.urlRoot=function(){return window.job_plan.url()+"/additional_responsibilities"},n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("model","ars_note",this),this.on("request",function(){$.blockUI({message:"Saving AR Note..."})},this),this.on("sync",function(){$.blockUI({message:"Saved."}),setTimeout($.unblockUI,1e3)},this),this.on("error",function(t,e,n){$.blockUI({message:"Error saving AR Note"}),setTimeout($.unblockUI,1e3),this.set("error_messages",$.parseJSON(e.responseText).error_messages),this.set("errors",$.parseJSON(e.responseText).errors)},this),this.computedFields=new Backbone.ComputedFields(this)},n.prototype.defaults={is_new:!0},n.prototype.computed={is_new:{depends:["_id"],get:function(){return this.isNew()}}},n}(Backbone.Model)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Models.CalendarSelector=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n}(Backbone.Model)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Models.CalendarTableDayRow=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("model","calendar_table_day_row",this)},n}(Backbone.Model)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Models.Comment=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.idAttribute="id",n.prototype.paramRoot="embedded_comment",n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("model","comment",this),this.on("request",function(){$.blockUI({message:"Saving comment..."})},this),this.on("sync",function(){$.blockUI({message:"Comment saved."}),setTimeout($.unblockUI,1e3)},this),this.on("error",function(t,e,n){$.blockUI({message:"Error saving comment"}),setTimeout($.unblockUI,1e3),this.set("error_messages",$.parseJSON(e.responseText).error_messages),this.set("errors",$.parseJSON(e.responseText).errors)},this)},n.prototype.defaults=function(){return JPApp.current_user_id?{user_commenter_id:JPApp.current_user_id}:{guest_user_commenter_id:JPApp.current_guest_user_id}},n}(Backbone.Model)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Models.Edoc=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.idAttribute="id",n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("model","edoc",this),this.on("deleting",function(t){$.blockUI({message:"Removing Edoc..."}),this.destroy({success:function(t,e,n){t.trigger("deleted",this),setTimeout($.unblockUI,300)},error:function(t,e,n){t.trigger("error_deleting",this),setTimeout($.unblockUI,300),alert("There was a problem removing the edoc")}})},this),this.on("deleted",function(t){window.edocs.fetch()},this)},n.prototype.addAttachment=function(t,e){window.edocs.create(e)},n}(Backbone.Model)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Models.JobContent=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.idAttribute="id",n.prototype.paramRoot="job_content",n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("model","job_content",this),this.on("error",function(t,e,n){this.set("error_messages",$.parseJSON(e.responseText).error_messages),this.set("errors",$.parseJSON(e.responseText).errors),$.blockUI({message:"<h3>Error saving activity:</h3>"+pretty_error_messages(this.get("error_messages"))}),setTimeout($.unblockUI,3e3)},this),this.on("saving",function(t){$.blockUI({message:"Saving Activity..."}),this.save(null,{success:function(t,e,n){t.trigger("saved",this),$.unblockUI()}})},this),this.on("deleting",function(t){$.blockUI({message:"Deleting Activity..."}),this.destroy({success:function(t,e,n){t.trigger("deleted",this),setTimeout($.unblockUI,300)}})},this),this.listenTo(this,this.scheduleChanges(),function(t){return this.set("dirty_schedule",!0)},this),this.computedFields=new Backbone.ComputedFields(this),this.set("has_benchmarks",JPApp.has_benchmarks)},n.prototype.recalculate=function(){return $.blockUI({message:"Saving Activity..."}),this.save(null,{success:function(t,e,n){return t.set("dirty_schedule",!1),$.unblockUI()}})},n.prototype.defaults=function(){return{employer:window.job_plan.get("default_employer"),location:window.job_plan.get("default_location"),start_time:"08:00",end_time:"12:00",repeats:"weekly",repeats_weekly_each_days_of_the_week:["Monday"],repeats_monthly_on_days_of_the_week:["monday"],repeats_monthly_each_days_of_the_month:[1],repeats_monthly_on_ordinals:[1],repeats_every_n_days:1,repeats_every_n_weeks:1,repeats_every_n_months:1,repeats_every_n_years:1,repeats_monthly:"on",repeats_rota:[1],categorisation:"DCC",days:[],is_new:!1,on_call:!1,annualised:!1,prospective_cover:!1,additional_programmed_activity:!1,additional_to_contract:!1,scheduled:!0,is_pdf:JPApp.pdf_action,number_per_year:52,dirty_schedule:!1,breakdown_total_title:"Non-Premium Time",hours_per_occurrence:4,pas_per_occurrence:1,occurrences_per_week:1,hours_per_week:4,pas_per_week:1,worked_occurrences_per_year:42,worked_hours_per_year:168,occurrences_per_year:52,hours_per_year:208}},n.prototype.scheduleChanges=function(){return["change:scheduled","change:prospective_cover","change:annualised","change:number_per_year","change:start_time","change:end_time","change:repeats","change:repeats_weekly_each_days_of_the_week","change:repeats_every_n_days","change:repeats_every_n_weeks","change:repeats_every_n_months","change:repeats_every_n_years","change:repeats_monthly_on_days_of_the_week","change:repeats_monthly_each_days_of_the_month","change:repeats_monthly_on_ordinals","change:repeats_monthly","change:repeats_rota","change:days","change:from_date","change:until_date"].join(" ")},n.prototype.computed={is_new:{depends:["id"],get:function(){return this.isNew()}},advanced_when:{get:function(){return this.get("from_date")||this.get("until_date")||this.get("override_calculations")}},hours_per_pa:{depends:["hours","pas"],get:function(){return this.get("hours")/this.get("pas")}}},n}(Backbone.Model)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Models.JobPlan=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.idAttribute="_id",n.prototype.paramRoot="online_job_plan",n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("model","job_plan",this),this.on("request",function(){$.blockUI({message:"Saving Job Plan..."})},this),this.on("sync",function(){this.unset("error_messages"),this.unset("errors"),$.blockUI({message:"Saved Job Plan."}),setTimeout($.unblockUI,1e3)},this),this.on("error",function(t,e,n){this.set("error_messages",$.parseJSON(e.responseText).error_messages),this.set("errors",$.parseJSON(e.responseText).errors),$.blockUI({message:"<h3>Error saving job plan</h3>"+pretty_error_messages(this.get("error_messages"))}),setTimeout($.unblockUI,1e3)},this),this.listenTo(JPApp.dispatcher,"model:job_content:saved model:job_content:deleted ",this.fetch),this.listenTo(JPApp.dispatcher,"collection:job_plan_events:sync",this.fetch),this.listenTo(JPApp.dispatcher,"collection:signature_events:sync",this.fetch),this.on("change:on_call_category change:ocas_freq",function(){var t,e;this.get("ocas_freq")&&(e=this.get("ocas_freq").split(" ")[0],t=this.get("on_call_category"),
this.set("on_call_supplement",JPApp.ON_CALL_MATRIX[e][t]))},this),this.job_plan_events=new JPApp.Collections.JobPlanEvents([],{job_plan:this})},n.prototype.url=function(){return"/online_job_plans/"+this.id},n.prototype.defaults={can_edit:!0,sort_method:"chronological_order"},n}(Backbone.Model)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Models.JobPlanEvent=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.idAttribute="_id",n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("model","job_plan_event",this),this.on("error",function(t,e,n){this.set("error_messages",$.parseJSON(e.responseText).error_messages),this.set("errors",$.parseJSON(e.responseText).errors),$.blockUI({message:"<h3>Error changing job plan state:</h3>"+pretty_error_messages(this.get("error_messages"))}),setTimeout($.unblockUI,3e3)},this),this.on("sending_for_sign_off",function(){$.blockUI({message:"Sending for sign off..."}),this.save(null,{success:function(t,e,n){t.trigger("sent_ready_for_sign_off",this)}})},this),this.on("sent_ready_for_sign_off",function(t,e,n){$.blockUI({message:"Sent for sign off."}),setTimeout($.unblockUI,1e3)},this),this.on("reverting_to_draft",function(){$.blockUI({message:"Reverting to draft..."}),this.save(null,{success:function(t,e,n){t.trigger("reverted_to_draft",this)}})},this),this.on("reverted_to_draft",function(t,e,n){$.blockUI({message:"Reverted to draft."}),setTimeout($.unblockUI,1e3)},this),this.on("rejecting_job_plan",function(){$.blockUI({message:"Rejecting job plan..."}),this.save(null,{success:function(t,e,n){t.trigger("rejected_job_plan",this)}})},this),this.on("rejected_job_plan",function(t,e,n){$.blockUI({message:"Rejected job plan."}),setTimeout($.unblockUI,1e3)},this)},n.prototype.urlRoot=function(){return this.collection.job_plan.url()+"/"+this.get("event_name")},n}(Backbone.Model)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Models.NavRow=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.nav_view={},n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("model","nav_row",this),this.nav_view=new JPApp.Views.NavRow({id:"#nav-"+this.get("id"),model:this})},n}(Backbone.Model)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Models.OverlappingEvent=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n}(Backbone.Model)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Models.PersonalObjective=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.idAttribute="_id",n.prototype.paramRoot="personal_objective",n.prototype.urlRoot=function(){return window.job_plan.url()+"/personal_objectives"},n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("model","personal_objective",this),this.on("request",function(){$.blockUI({message:"Saving personal objective..."})},this),this.on("sync",function(){$.blockUI({message:"Saved."}),setTimeout($.unblockUI,1e3)},this),this.on("error",function(t,e,n){$.blockUI({message:"Error saving personal objective"}),setTimeout($.unblockUI,1e3),this.set("error_messages",$.parseJSON(e.responseText).error_messages),this.set("errors",$.parseJSON(e.responseText).errors)},this),this.computedFields=new Backbone.ComputedFields(this)},n.prototype.defaults={is_new:!0},n.prototype.computed={is_new:{depends:["_id"],get:function(){return this.isNew()}}},n}(Backbone.Model)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Models.SignatorRole=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.idAttribute="_id",n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("model","signator_role",this),this.possible_signatories=new JPApp.Collections.PossibleSignatories(this.get("possible_signatories")),this.updateSignatories(),this.listenTo(JPApp.dispatcher,"collection:signatories:sync",this.updateSignatories)},n.prototype.updateSignatories=function(){this.signatories=window.signatories.byRole(this.get("name"))},n}(Backbone.Model)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Models.Signatory=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.idAttribute="_id",n.prototype.paramRoot="job_plan_signatory",n.prototype.urlRoot=function(){return window.job_plan.url()+"/job_plan_signatories"},n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("model","signatory",this),this.on("request",function(){$.blockUI({message:"Saving signatory..."})},this),this.on("sync",function(){$.blockUI({message:"Saved."}),setTimeout($.unblockUI,1e3)},this),this.on("error",function(t,e,n){this.set("error_messages",$.parseJSON(e.responseText).error_messages),this.set("errors",$.parseJSON(e.responseText).errors),$.blockUI({message:"Error saving signatory"}),setTimeout($.unblockUI,1e3)},this),this.signature_events=new JPApp.Collections.SignatureEvents([],{signature:this}),this.computedFields=new Backbone.ComputedFields(this)},n.prototype.defaults={is_new:!0,signed_off:!1},n.prototype.computed={is_new:{depends:["_id"],get:function(){return this.isNew()}}},n}(Backbone.Model)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Models.SignatureEvent=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.idAttribute="_id",n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("model","signature_event",this),this.on("error",function(t,e,n){this.set("error_messages",$.parseJSON(e.responseText).error_messages),this.set("errors",$.parseJSON(e.responseText).errors),$.blockUI({message:"<h3>Error signing</h3>"+pretty_error_messages(this.get("error_messages"))}),setTimeout($.unblockUI,5e3)},this),this.on("signing",function(t){$.blockUI({message:"Signing..."}),this.save(null,{success:function(t,e,n){t.trigger("signed",this)}})},this),this.on("signed",function(t,e,n){$.blockUI({message:"Signed."}),setTimeout($.unblockUI,1e3)},this),this.on("revoking",function(t){$.blockUI({message:"Revoking signature..."}),this.save(null,{success:function(t,e,n){t.trigger("revoked",this)}})},this),this.on("revoked",function(t,e,n){$.blockUI({message:"Signature revoked."}),setTimeout($.unblockUI,1e3)},this),this.on("requesting_signature",function(t){$.blockUI({message:"Sending reminder..."}),this.save(null,{success:function(t,e,n){t.trigger("requested_signature",this)}})},this),this.on("requested_signature",function(t,e,n){$.blockUI({message:"Signature requested."}),setTimeout($.unblockUI,1e3)},this)},n.prototype.urlRoot=function(){return this.collection.signature.url()+"/"+this.get("event_name")},n}(Backbone.Model)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Models.SPANote=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.idAttribute="_id",n.prototype.paramRoot="spa_activity",n.prototype.urlRoot=function(){return window.job_plan.url()+"/spa_activities"},n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("model","spa_note",this),this.on("request",function(){$.blockUI({message:"Saving SPA Note..."})},this),this.on("sync",function(){$.blockUI({message:"Saved."}),setTimeout($.unblockUI,1e3)},this),this.on("error",function(t,e,n){$.blockUI({message:"Error saving SPA Note"}),setTimeout($.unblockUI,1e3),this.set("error_messages",$.parseJSON(e.responseText).error_messages),this.set("errors",$.parseJSON(e.responseText).errors)},this),this.computedFields=new Backbone.ComputedFields(this)},n.prototype.defaults={is_new:!0},n.prototype.computed={is_new:{depends:["_id"],get:function(){return this.isNew()}}},n}(Backbone.Model)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Models.Speciality=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.idAttribute="_id",n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("model","speciality",this)},n}(Backbone.Model)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Models.SpecialityObjective=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.idAttribute="_id",n.prototype.paramRoot="specialtiy_objective",n.prototype.urlRoot=function(){return window.job_plan.url()+"/speciality_objectives"},n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("model","speciality_objective",this),this.on("request",function(){$.blockUI({message:"Saving specialty objective..."})},this),this.on("sync",function(){$.blockUI({message:"Saved."}),setTimeout($.unblockUI,1e3)},this),this.on("error",function(t,e,n){$.blockUI({message:"Error saving specialty objective"}),setTimeout($.unblockUI,1e3),this.set("error_messages",$.parseJSON(e.responseText).error_messages),this.set("errors",$.parseJSON(e.responseText).errors)},this),this.computedFields=new Backbone.ComputedFields(this)},n.prototype.defaults={is_new:!0},n.prototype.computed={is_new:{depends:["_id"],get:function(){return this.isNew()}}},n}(Backbone.Model)}.call(this),function(){JPApp.Models.Tag=Backbone.Model.extend({})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Collections.ARSNotes=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("collection","ars_notes",this)},n.prototype.model=JPApp.Models.ARSNote,n.prototype.url=function(){return window.job_plan.url()+"/additional_responsibilities"},n}(Backbone.Collection)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Collections.Benchmarks=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("collection","benchmarks",this)},n.prototype.byCategory=function(t){var e;return e=this.filter(function(e){return e.get("parent_category")===t})},n}(Backbone.Collection)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Collections.CalendarTableDayRows=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=JPApp.Models.CalendarTableDayRow,n.prototype.initialize=function(t,e){JPApp.Helpers.PublishEvents("collection","calendar_table_day_rows",this),this.listenTo(window.job_contents,"remove sync",this.fetch)},n.prototype.grouped_by_day_name=function(){return _.groupBy(this.toJSON(),function(t){return t.day_name})},n.prototype.grouped_by_week_number=function(){return this.groupBy(function(t){return t.get("week_number")})},n.prototype.url=function(){return window.job_plan.url()+"/calendar"},n.prototype.set_week_label=function(t){t.set("week_start",this.date_of_weekday(t.get("week_number"),0)),t.set("week_end",this.date_of_weekday(t.get("week_number"),6))},n.prototype.date_of_weekday=function(t,e){var n;return n=this.grouped_by_week_number()[t][e].attributes,n.mday+" "+n.month_name},n}(Backbone.Collection)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Collections.Categories=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("collection","categories",this)},n}(Backbone.Collection)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Collections.Comments=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("collection","comments",this),this.on("created",function(){window.new_comment_form=new JPApp.Views.CommentFormView({model:new JPApp.Models.Comment,collection:window.comments})},this),this.on("error",function(t,e,n){$.blockUI({message:"<h3>Error fetching comments</h3><p>Code:"+e.status+"</p><p>"+e.statusText+"</p>"}),setTimeout($.unblockUI,5e3)},this)},n.prototype.model=JPApp.Models.Comment,n.prototype.url=function(){return window.job_plan.url()+"/job_plan_comments"},n}(Backbone.Collection)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Collections.Edocs=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=JPApp.Models.Edoc,n.prototype.initialize=function(t,e){JPApp.Helpers.PublishEvents("collection","edocs",this)},n.prototype.url=function(){return window.job_plan.url()+"/edocs"},n}(Backbone.Collection)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Collections.Employers=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("collection","employers",this)},n}(Backbone.Collection)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Collections.JobContents=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=JPApp.Models.JobContent,n.prototype.paramRoot="job_contents",n.prototype.comparator=function(t){return t.get(window.job_plan.get("sort_method"))},n.prototype.initialize=function(t,e){this.listenTo(window.job_plan,"change:sort_method",this.sort),JPApp.Helpers.PublishEvents("collection","job_contents",this),this.on("sync",function(){this.editing=!1,this.changed=!1},this)},n.prototype.url=function(){return window.job_plan.url()+"/job_contents"},n.prototype.order_updated=function(){this.sort(),this.save()},n.prototype.save=function(){Backbone.sync("update",this,{})},n.prototype.byCategory=function(t){var e;return e=this.filter(function(e){return e.get("categorisation")===t})},n.prototype.byNotNew=function(){var t;return t=this.filter(function(t){return!0!==t.get("is_new")})},n}(Backbone.Collection)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Collections.JobPlanEvents=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(t,e){JPApp.Helpers.PublishEvents("collection","job_plan_events",this),this.job_plan=e.job_plan},n.prototype.model=JPApp.Models.JobPlanEvent,n.prototype.url=function(){return this.job_plan.url()+"/online_job_plan_events"},n}(Backbone.Collection)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Collections.Locations=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("collection","locations",this)},n}(Backbone.Collection)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Collections.NavRows=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=JPApp.Models.NavRow,n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("collection","nav_rows",this)},n}(Backbone.Collection)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Collections.OverlappingEvents=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=JPApp.Models.OverlappingEvent,n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("collection","overlapping_events",this),this.listenTo(window.job_contents,"remove sync",this.fetch)},n.prototype.url=function(){return window.job_plan.url()+"/overlapping_events"},n}(Backbone.Collection)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Collections.PersonalObjectives=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("collection","personal_objectives",this)},n.prototype.model=JPApp.Models.PersonalObjective,n.prototype.url=function(){return window.job_plan.url()+"/personal_objectives"},n}(Backbone.Collection)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Collections.PossibleSignatories=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n}(Backbone.Collection)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Collections.SignatorRoles=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(t,e){JPApp.Helpers.PublishEvents("collection","signator_roles",this),this.compulsory=e.compulsory},n.prototype.model=JPApp.Models.SignatorRole,n}(Backbone.Collection)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Collections.Signatories=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.comparator="tier",n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("collection","signatories",this),this.on("error",function(t,e,n){$.blockUI({message:"<h3>Error fetching signatories:</h3>"+pretty_error_messages(this.get("error_messages"))}),setTimeout($.unblockUI,5e3)},this),this.listenTo(JPApp.dispatcher,"model:job_plan_event:sync model:signature_event:sync model:signatory:sync",this.fetch)},n.prototype.model=JPApp.Models.Signatory,n.prototype.byRole=function(t){return _(this.filter(function(e){return e.get("role")===t}))},n.prototype.url=function(){return window.job_plan.url()+"/job_plan_signatories"},n}(Backbone.Collection)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Collections.SignatureEvents=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(t,e){JPApp.Helpers.PublishEvents("collection","signature_events",this),this.signature=e.signature},n.prototype.model=JPApp.Models.SignatureEvent,n.prototype.url=function(){return this.signature.url()+"/signature_events"},n}(Backbone.Collection)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Collections.SPANotes=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("collection","spa_notes",this)},n.prototype.model=JPApp.Models.SPANote,n.prototype.url=function(){return window.job_plan.url()+"/spa_activities"},n}(Backbone.Collection)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Collections.Specialities=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("collection","specialities",this)},n.prototype.model=JPApp.Models.Speciality,n.prototype.url=function(){return"/specialities"},n}(Backbone.Collection)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Collections.SpecialityObjectives=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("collection","speciality_objectives",this)},n.prototype.model=JPApp.Models.SpecialityObjective,n.prototype.url=function(){return window.job_plan.url()+"/speciality_objectives"},n}(Backbone.Collection)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Collections.Subcategories=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("collection","subcategories",this)},n.prototype.byCategory=function(t){var e;return e=this.filter(function(e){return e.get("parent_category")===t})},n.prototype.byCategoryBenchmark=function(t,e){var n;return n=this.filter(function(n){return n.get("parent_category")===t&&n.get("benchmark")===e})},n}(Backbone.Collection)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Collections.Tags=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=JPApp.Models.Tag,n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("collection","tags",this)},n.prototype.url=function(){return"/job_plan_tags"},n}(Backbone.Collection)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.ActivitySummary=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){this.listenTo(JPApp.dispatcher,"model:activity_summary:sync",function(){this.render(),this.$el.effect("highlight",3e3)},this),this.render()},n.prototype.className="activity_summary",n.prototype.template=HandlebarsTemplates.activity_summary,n.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON())),this},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.APAActivitiesTable=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("view","apa_activities_table",this),this.listenTo(JPApp.dispatcher,"collection:job_contents:sync collection:job_contents:destroy",this.render),this.row_views=[]},n.prototype.template=HandlebarsTemplates.job_content_table,n.prototype.render=function(){var t;return _.each(this.row_views,function(t){t.remove()},this),this.row_views=[],t=this.collection.filter(function(t){return"APA"===t.get("activity_type")}),_.each(t,function(t){var e;e=new JPApp.Views.JobContentRow({model:t}),this.row_views.push(e)},this),this.$el.html(this.template()),_.isEmpty(t)||this.$("tbody").empty(),_.each(this.row_views,function(t){this.$("tbody").append(t.render().$el)},this),this},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.ARSNoteFormView=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.className="ars-note",n.prototype.tagName="form",n.prototype.initialize=function(t){JPApp.Helpers.PublishEvents("view","ars_note_form",this),this.model=this.model||new JPApp.Models.ARSNote,this.listenTo(this.model,"sync",this.remove),this.listenTo(this.model,"error",this.render),this.render()},n.prototype.bindings={"textarea.responsibility":"responsibility","input.time_invloved":"time_invloved","textarea.when_work_scheduled":"when_work_scheduled","textarea.how_nhs_reimbursed":"how_nhs_reimbursed"},n.prototype.template=HandlebarsTemplates.ars_note_form,n.prototype.events={"click .button.save":function(){return window.ars_notes.create(this.model),!1},"click .button.cancel":function(){return this.remove(),!1}},n.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON())),this.model.unset("error_messages"),this.model.unset("errors"),this.stickit(),this},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.ARSNoteRowView=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.tagName="tr",n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("view","ars_note_row",this),this.listenTo(this.model,"destroy",this.remove)},n.prototype.events={"click .destroy":"destroy","click .edit":"edit"},n.prototype.template=HandlebarsTemplates.ars_note_row,n.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON())),this},n.prototype.edit=function(t){t.preventDefault(),this.model.trigger("edit",this.model)},n.prototype.destroy=function(t){t.preventDefault(),confirm("Are you sure you want to remove this AR note?")&&this.model.destroy()},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.ARSNotesTableBodyView=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("view","ars_notes_table_body",this),this.collection.fetch(),this.listenTo(JPApp.dispatcher,"collection:ars_notes:sync",this.render)},n.prototype.render=function(){return this.collection.each(function(t){this.$("tr.blank").remove(),t.row_view=t.row_view||new JPApp.Views.ARSNoteRowView({model:t}),this.$el.append(t.row_view.render().$el)},this),this},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.ARSTableBodyView=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("view","ars_table",this),this.listenTo(JPApp.dispatcher,"collection:job_contents:sync",this.render)},n.prototype.template=HandlebarsTemplates.ars_table,n.prototype.render=function(){var t;return t={rows:_.map(this.collection.byCategory("AR").concat(this.collection.byCategory("ED")),function(t){return t.toJSON()})},this.$el.html(this.template(t)),this},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.ATCActivitiesTable=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("view","atc_activities_table",this),this.listenTo(JPApp.dispatcher,"collection:job_contents:sync collection:job_contents:destroy",this.render),this.row_views=[]},n.prototype.template=HandlebarsTemplates.job_content_table,n.prototype.render=function(){var t;return _.each(this.row_views,function(t){t.remove()},this),this.row_views=[],t=this.collection.filter(function(t){return"ATC"===t.get("activity_type")}),_.each(t,function(t){var e;e=new JPApp.Views.JobContentRow({model:t}),this.row_views.push(e)},this),this.$el.html(this.template()),_.isEmpty(t)||this.$("tbody").empty(),_.each(this.row_views,function(t){this.$("tbody").append(t.render().$el)},this),this},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.BreakdownFooterRow=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(t){this.categorisation=t.categorisation,this.model=window.activity_summary},n.prototype.getCategory=function(t){var e;if(t&&t[0])return e=this,_.filter(t[0],function(t){return t.name===e.categorisation})[0]},
n.prototype.bindings={"#hours":{observe:["categories"],onGet:function(t){if(this.getCategory(t))return Number(this.getCategory(t).hours.toFixed(2))}},"#pas":{observe:["categories"],onGet:function(t){if(this.getCategory(t))return Number(this.getCategory(t).pas.toFixed(3))}},"#hours_per_pa":{observe:["categories"],onGet:function(t){if(this.getCategory(t))return Number((this.getCategory(t).hours/this.getCategory(t).pas).toFixed(3))}}},n.prototype.className="job-content-row",n.prototype.tagName="tr",n.prototype.template=HandlebarsTemplates.breakdown_footer_row,n.prototype.render=function(){return this.$el.html(this.template()),this.stickit(),this},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.BreakdownHeaderRow=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(t){this.category=t},n.prototype.className="job-content-row",n.prototype.tagName="tr",n.prototype.template=HandlebarsTemplates.breakdown_header_row,n.prototype.render=function(){return this.$el.html(this.template(this.category)),this},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.BreakdownJobContentRow=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("view","job_content_row",this)},n.prototype.className="job-content-row",n.prototype.tagName="tr",n.prototype.template=HandlebarsTemplates.breakdown_job_content_row,n.prototype.events={"click .edit":function(){return this.model.trigger("edit"),!1},"click .destroy":"destroy"},n.prototype.destroy=function(t){t.preventDefault(),confirm("Are you sure you want to remove this activity?")&&this.model.trigger("deleting")},n.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON())),this.delegateEvents(),this},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.BreakdownJobContentTable=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("view","job_content_table",this),this.listenTo(JPApp.dispatcher,"collection:job_contents:sync collection:job_contents:destroy",this.render),this.row_views=[]},n.prototype.template=HandlebarsTemplates.breakdown_job_content_table,n.prototype.render=function(){return _.each(this.row_views,function(t){t.remove()},this),this.row_views=[],_.each(this.collection.groupBy("categorisation"),function(t,e,n){var i;i=new JPApp.Views.BreakdownHeaderRow({categorisation:e}),this.row_views.push(i),_.each(t,function(t){i=new JPApp.Views.BreakdownJobContentRow({model:t}),this.row_views.push(i)},this),i=new JPApp.Views.BreakdownFooterRow({categorisation:e}),this.row_views.push(i)},this),this.$el.html(this.template()),this.$("tbody").empty(),_.each(this.row_views,function(t){this.$("tbody").append(t.render().$el)},this),this},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.CalendarSelector=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("view","calendar_selector",this)},n.prototype.bindings={".week-start":"week_start",".week-end":"week_end"},n.prototype.events={"click td.dot.day":function(t){var e;return e=$(getTarget(t)).attr("data-week-number"),this.set_week(e),!1},"click .last_week":"set_last_week","click .next_week":"set_next_week"},n.prototype.leading_zero=function(t){return t>9?""+t:"0"+t},n.prototype.template=HandlebarsTemplates.calendar_selector,n.prototype.set_week=function(t){this.model.set("week_number",t),this.$("td").removeClass("week-selected"),this.$('[data-week-number="'+t+'"]').addClass("week-selected"),this.collection.set_week_label(this.model)},n.prototype.set_last_week=function(){var t;t=Number(this.model.get("week_number"))-1,t>0?this.set_week(this.leading_zero(t)):this.set_week(window.max_week_number)},n.prototype.set_next_week=function(){var t;t=Number(this.model.get("week_number"))+1,t>window.max_week_number?this.set_week("01"):this.set_week(this.leading_zero(t))},n.prototype.render=function(){var t;return t=this.template({days:this.collection.grouped_by_day_name(),selected:this.model.toJSON()}),this.$el.html(t),JPApp.pdf_action||this.$('[data-week-number="'+this.model.get("week_number")+'"]').addClass("week-selected"),this.stickit(),this},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.CalendarTable=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("view","calendar_table",this),this.child_views=[],this.listenTo(this.collection,"sync",this.render_day_rows),this.listenTo(this.collection,"sync",this.render_calendar_selector),this.listenTo(this.collection,"sync",this.set_week_label),this.listenTo(this.model,"change",this.render_day_rows),this.model.set("week_number",JPApp.current_week_number),this.render()},n.prototype.template=HandlebarsTemplates.calendar_table,n.prototype.render=function(){this.$el.html(this.template())},n.prototype.render_calendar_selector=function(){window.calendar_selector_view.setElement(this.$("#calendar-selector")).render()},n.prototype.render_day_rows=function(){_.each(this.child_views,function(t){t.remove()},this),this.child_views=[],_.each(this.collection.grouped_by_week_number()[this.model.get("week_number")],function(t){var e;e=new JPApp.Views.CalendarTableDayRow({model:t}),this.child_views.push(e),this.$("table#calendar-days").append(e.el)},this)},n.prototype.set_week_label=function(){this.collection.set_week_label(this.model)},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.CalendarTableDayRow=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.tagName="tbody",n.prototype.className=function(){return"calendar-table-day-row "+this.model.get("day_name")},n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("view","calendar_table_day_row",this),this.render()},n.prototype.events={"click .edit":function(t){var e;return e=$(getTarget(t)).closest("tr").attr("data-job-content-id"),window.job_contents.find({id:e}).trigger("edit"),!1},"click .destroy":"destroy"},n.prototype.destroy=function(t){var e;t.preventDefault(),e=$(getTarget(t)).closest("tr").attr("data-job-content-id"),confirm("Are you sure you want to remove this activity?")&&window.job_contents.find({id:e}).trigger("deleting")},n.prototype.template=HandlebarsTemplates.calendar_table_day_row,n.prototype.render=function(){var t;return t=this.template(this.model.toJSON()),this.$el.html(t),this},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.CommentFormView=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.className="new-comment",n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("view","comment_form",this),this.listenTo(this.model,"sync",this.createdComment),this.render()},n.prototype.bindings={"textarea.content":"content"},n.prototype.events={"click .button.save":function(){return this.collection.create(this.model),!1}},n.prototype.template=HandlebarsTemplates.comment_form,n.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON())),this.model.unset("error_messages"),this.model.unset("errors"),this.stickit(),this},n.prototype.createdComment=function(){this.model.trigger("created"),this.remove()},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.CommentListView=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.el="#comments",n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("view","comment_list",this),this.collection.fetch(),this.listenTo(JPApp.dispatcher,"collection:comments:sync",this.render)},n.prototype.render=function(){var t;return t=new JPApp.Views.CommentFormView({model:new JPApp.Models.Comment,collection:window.comments}),this.collection.each(function(t){t.view=t.view||new JPApp.Views.CommentView({model:t}),this.$("#comment-list").prepend(t.view.render().$el)},this),this.$("#comment-list").prepend(t.render().$el),this},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.CommentView=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.id=function(){return"comment-"+this.model.get("id")},n.prototype.className="comment",n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("view","comment",this),this.listenTo(this.model,"destroy",this.remove)},n.prototype.events={"click .destroy":"destroy"},n.prototype.template=HandlebarsTemplates.comment,n.prototype.render=function(){return this.trigger("render"),this.$el.html(this.template(this.model.toJSON())),this},n.prototype.destroy=function(t){t.preventDefault(),confirm("Are you sure you want to remove this comment?")&&this.model.destroy()},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.ContractedPAs=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.className="contracted-pas",n.prototype.template=HandlebarsTemplates.contracted_pas,n.prototype.bindings={"input.contracted_dcc":"contracted_dcc","input.contracted_spa":"contracted_spa","input.contracted_other":"contracted_other","textarea.reason_for_increase":"reason_for_increase"},n.prototype.events={"click .save":function(){return this.model.save(),!1},"click .cancel":function(){return this.model.fetch(),!1}},n.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON())),this.$(".rc.job_plan_gn_contract_pas").html($("#slugs .job_plan_gn_contract_pas").html()),this.stickit(),this},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.EdocsTable=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("view","edocs_table",this),this.collection.fetch(),this.listenTo(this.collection,"sync",this.render)},n.prototype.events={"click a.destroy":"destroy"},n.prototype.destroy=function(t){var e;return t.preventDefault(),e=$(getTarget(t)).data("edocId"),confirm("Are you sure you want to remove this document from the job plan?")&&window.edocs.findWhere({id:e}).trigger("deleting"),!1},n.prototype.template=HandlebarsTemplates.edocs_table,n.prototype.render=function(){this.$el.html(this.template(this.collection.toJSON()))},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.JobContentForm=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.id="job-content-form",n.prototype.className="panel job-content-view",n.prototype.template=HandlebarsTemplates.job_content_form,n.prototype.initialize=function(t){JPApp.Helpers.PublishEvents("view","job_content_form",this),this.model=this.model||new JPApp.Models.JobContent,this.listenTo(this.model,"change",function(){this.$(".buttons a.save").show()}),this.listenTo(this.model,"sync",this.render),this.listenTo(this.model,"error",this.render),this.listenTo(JPApp.dispatcher,"model:job_plan:change",function(){this.model.trigger("sync")}),this.listenTo(this.model,"saved",this.close_facebox)},n.prototype.events={"click .button.save":"saving","click .button.cancel":"close_facebox","click table.days_of_week tr td":"day_clicked","click table.days_of_month tr td":"days_in_month_clicked","click table.months_of_year tr td":"months_of_year_clicked","click table.rota tr td":"repeats_rota_clicked","change select#repeats":"showOnlyOptionsForRepeat","click a#advanced_when_toggle":"toggleAdvancedWhen","click a#view_breakdown_toggle":"toggleViewBreakdown","click a.recalculate":"recalculate"},n.prototype.recalculate=function(){return this.model.recalculate(),!1},n.prototype.showScheduledFields=function(){this.model.get("scheduled")?this.$("fieldset.schedule").show():this.$("fieldset.schedule").hide(),this.showViewBreakdownFields(),this.showAdvancedWhenFields()},n.prototype.toggleAdvancedWhen=function(){var t;return t=$('input:checkbox[name="advanced_when"]'),t.prop("checked",!t.prop("checked")),this.model.set({advanced_when:!this.model.get("advanced_when")}),!1},n.prototype.showAdvancedWhenFields=function(){this.model.get("scheduled")&&this.model.get("advanced_when")?this.$el.find("fieldset.advanced_when").show():this.$el.find("fieldset.advanced_when").hide(),this.showHoursAndPasFields()},n.prototype.toggleViewBreakdown=function(){return $(".view_breakdown").toggle(),!1},n.prototype.showOverrides=function(){return this.model.get("scheduled")&&this.model.get("annualised")},n.prototype.showViewBreakdownFields=function(){this.showOverrides()?this.$el.find(".view_breakdown").show():this.$el.find(".view_breakdown").hide()},n.prototype.showHoursAndPasFields=function(){!this.model.get("scheduled")||this.model.get("override_calculations")&&this.model.get("advanced_when")?this.$("fieldset.hours_and_pas").show():this.$("fieldset.hours_and_pas").hide()},n.prototype.showNumberPerYear=function(){this.model.get("annualised")?(this.$(".number_per_year").show(),this.$(".occurrences_per_year").hide()):(this.$(".number_per_year").hide(),this.$(".occurrences_per_year").show())},n.prototype.showMonthlyOnAndEachFields=function(){"on"===this.model.get("repeats_monthly")?(this.$("table.days_of_month").hide(),this.$("select.monthly_on").show()):(this.$("select.monthly_on").hide(),this.$("table.days_of_month").show())},n.prototype.showRotaWeeks=function(t,e,n){e?this.$(".rota-weeks").show():this.$(".rota-weeks").hide()},n.prototype.formatInterval=function(t,e){return"".concat(_.map(_.range(1,+this.model.get("repeats_every_n_weeks")+1),function(t){return"<td data-value="+t+(_.contains(this.model.get("repeats_rota"),t)?" class='selected clickable_td'":" class='clickable_td'")+">"+t+"</td>"},this))},n.prototype.bindings={"input.activity_type":"activity_type","select.number_per_year":{observe:"number_per_year",selectOptions:{collection:function(t,e){return _.union(_.range(1,53),[e.view.model.get("number_per_year")])}},visible:function(t,e){return 1!==t},visibleFn:"showRotaWeeks"},"input.prospective_cover":{observe:"prospective_cover",onGet:function(t){return t?"1":"0"},onSet:function(t){return"1"===t}},"input.annualised":{observe:"annualised",onGet:function(t){return t?"1":"0"},onSet:function(t){return"1"===t},visible:function(t,e){return"1"===t},visibleFn:"showNumberPerYear"},"input.on_call":"on_call","input.hours":"hours","input.pas":"pas","input.scheduled":{observe:"scheduled",onGet:function(t){return t?"true":"false"},onSet:function(t){return"true"===t},visible:function(t,e){return"true"===t},visibleFn:"showScheduledFields"},"input.override_calculations":{observe:"override_calculations",onGet:function(t){return t?"true":"false"},onSet:function(t){return"true"===t},visible:function(t,e){return"true"===t},visibleFn:"showHoursAndPasFields"},"input.advanced_when":{observe:"advanced_when",visible:function(t,e){return"true"===t},visibleFn:"showAdvancedWhenFields"},"input[name='repeats_weekly_each_days_of_the_week']":"repeats_weekly_each_days_of_the_week","select.start_time_hours":{observe:"start_time",selectOptions:{collection:function(){return _.map(_.range(24),function(t){return t<10?"0"+t.toString():t.toString()})}},onGet:function(t){if(t)return t.substring(0,2)},onSet:function(t,e){return t+e.view.model.get("start_time").substring(2,5)}},"select.start_time_minutes":{observe:"start_time",selectOptions:{collection:function(){return _.map(_.range(60),function(t){return t<10?"0"+t.toString():t.toString()})}},onGet:function(t){if(t)return t.substring(3,5)},onSet:function(t,e){return e.view.model.get("start_time").substring(0,3)+t}},"select.end_time_hours":{observe:"end_time",selectOptions:{collection:function(){return _.map(_.range(24),function(t){return t<10?"0"+t.toString():t.toString()})}},onGet:function(t){if(t)return t.substring(0,2)},onSet:function(t,e){return t+e.view.model.get("end_time").substring(2,5)}},"select.end_time_minutes":{observe:"end_time",selectOptions:{collection:function(){return _.map(_.range(60),function(t){return t<10?"0"+t.toString():t.toString()})}},onGet:function(t){if(t)return t.substring(3,5)},onSet:function(t,e){return e.view.model.get("end_time").substring(0,3)+t}},"input.from_date":{observe:"from_date",onGet:function(t){return this.model.get("from_date_formatted")},updateView:!1},"input.until_date":{observe:"until_date",onGet:function(t){return this.model.get("until_date_formatted")},updateView:!1},"table.days_of_week":{observe:"repeats_weekly_each_days_of_the_week",onGet:function(t){this.$el.find("table.days_of_week td").removeClass("selected"),_.each(t,function(t){this.$("table.days_of_week td[data-value='"+JPApp.Helpers.Capitalize(t)+"']").addClass("selected")},this)},updateView:!1},"table.days_of_month":{observe:"repeats_monthly_each_days_of_the_month",onGet:function(t){this.$el.find("table.days_of_month td").removeClass("selected"),_.each(t,function(t){this.$("table.days_of_month td[data-value='"+t+"']").addClass("selected")},this)},updateView:!1},"table.months_of_year":{observe:"repeats_yearly_each_months_of_the_year",onGet:function(t){this.$el.find("table.months_of_year td").removeClass("selected"),_.each(t,function(t){this.$("table.months_of_year td[data-value='"+t+"']").addClass("selected")},this)},updateView:!1},"input.repeats_monthly":{observe:"repeats_monthly",visible:function(t,e){return"true"===t},visibleFn:"showMonthlyOnAndEachFields"},"select#repeats_monthly_on_ordinals":{observe:"repeats_monthly_on_ordinals",selectOptions:{collection:function(){return[{name:"1st",val:1},{name:"2nd",val:2},{name:"3rd",val:3},{name:"4th",val:4},{name:"5th",val:5},{name:"last",val:-1},{name:"2nd last",val:-2}]},labelPath:"name",valuePath:"val"}},"select#repeats_monthly_on_days_of_the_week":{observe:"repeats_monthly_on_days_of_the_week",selectOptions:{collection:"JPApp.day_names",labelPath:"name",valuePath:"val"}},"select#repeats":{observe:"repeats",selectOptions:{collection:"JPApp.repeats_options",labelPath:"name",valuePath:"val"}},"select#tags":{observe:"tags",selectOptions:{collection:function(t,e){return _.union(JPApp.tags.map(function(t){return t.get("name")}),this.model.get("tags"))}},initialize:function(t,e,n){var i;t.chosen({width:"100%",create_option:!0,create_option_text:"Create tag"}),i=function(e,n,i){i.bindKey||t.trigger("chosen:updated")},this.listenTo(e,"change:"+n.observe,i)},getVal:function(t){var e,n;return n=void 0,e=t.find("option").not(function(){return!this.selected}),n=Backbone.$(e.map(function(){return Backbone.$(this).val()})).get()},visible:function(){return JPApp.has_jp_tags},visibleFn:"visibilityOfTags"},"select.repeats_every_n_days":{observe:"repeats_every_n_days",selectOptions:{collection:function(t,e){return _.union(_.range(1,366),[e.view.model.get("repeats_every_n_days")])}}},"select.repeats_every_n_weeks":{observe:"repeats_every_n_weeks",selectOptions:{collection:function(t,e){return _.union(_.range(1,53),[e.view.model.get("repeats_every_n_weeks")])}},visible:function(t,e){return 1!==t},visibleFn:"showRotaWeeks"},".rota-week-selector":{observe:["repeats_rota","repeats_every_n_weeks"],onGet:"formatInterval",updateMethod:"html"},"span.categorisation":"categorisation","select#categorisation":{observe:"categorisation",onSet:function(t){return this.model.set("benchmark",null),this.model.set("subcategorisation",null),t},selectOptions:{collection:"JPApp.job_content_categories",labelPath:"name",valuePath:"val"}},"select#benchmarks":{observe:["benchmark","categorisation"],onGet:function(t){return t[0]},onSet:function(t){return this.model.set("benchmark",t),this.model.set("subcategorisation",null),t},selectOptions:{collection:function(){return this.speciality_benchmarks()},labelPath:"label",valuePath:"value",defaultOption:{label:"Choose one...",value:null}}},"select#subcategorisation":{observe:["subcategorisation","benchmark","categorisation"],onGet:function(t){return t[0]},onSet:function(t){return this.model.set("subcategorisation",t),t},selectOptions:{collection:function(){return this.speciality_subcategories()},labelPath:"label",valuePath:"value",defaultOption:{label:"Choose one...",value:null}}},"input.location":{observe:"location",visible:function(){return!JPApp.has_location_dropdown}},"select#location_dropdown":{observe:"location",onSet:function(t){return this.model.set("location",t),t},selectOptions:{collection:"JPApp.job_content_locations",labelPath:"name",valuePath:"name",defaultOption:{label:"Choose one...",value:null}},visible:function(){return JPApp.has_location_dropdown}},"select#employer":{observe:"employer",selectOptions:{collection:"JPApp.common_employers",labelPath:"name",valuePath:"name",defaultOption:{label:"Choose one...",value:null}}},"textarea.description":"description","select.repeats_every_n_months":{observe:"repeats_every_n_months",selectOptions:{collection:function(t,e){return _.union(_.range(1,13),[e.view.model.get("repeats_every_n_months")])}}},"input.repeats_every_n_years":"repeats_every_n_years",".total_title":"breakdown_total_title",".recalculate":{observe:"dirty_schedule",visible:!0},".summary_data":{observe:"dirty_schedule",visible:!0,visibleFn:function(t,e,n){if(e)return t.addClass("old_data")}}},n.prototype.visibilityOfTags=function(t,e,n){e?$("li.tags").show():this.$el.find("li.tags").hide()},n.prototype.filtered_speciality_subcategories=function(){return JPApp.has_benchmarks?JPApp.job_content_subcategories.byCategoryBenchmark(this.model.get("categorisation"),this.model.get("benchmark")):JPApp.job_content_subcategories.byCategory(this.model.get("categorisation"))},n.prototype.speciality_subcategories=function(){var t,e;return t=this.filtered_speciality_subcategories(),e=_.map(t,function(t){return{label:t.get("name"),value:t.get("name")}})},n.prototype.speciality_benchmarks=function(){var t,e;return t=JPApp.job_content_benchmarks.byCategory(this.model.get("categorisation")),e=_.map(t,function(t){return{label:t.get("name"),value:t.get("name")}})},n.prototype.day_clicked=function(t){var e;$(t.target).toggleClass("selected"),e=_.map(this.$("table.days_of_week .selected"),function(t){return $(t).data("value")}),e.length>0?this.model.set("repeats_weekly_each_days_of_the_week",e):$(t.target).toggleClass("selected")},n.prototype.days_in_month_clicked=function(t){var e;$(t.target).toggleClass("selected"),e=_.map(this.$("table.days_of_month .selected"),function(t){return $(t).data("value")}),e.length>0?this.model.set("repeats_monthly_each_days_of_the_month",e):$(t.target).toggleClass("selected")},n.prototype.repeats_rota_clicked=function(t){var e;$(t.target).toggleClass("selected"),e=_.map(this.$("table.rota .selected"),function(t){return $(t).data("value")}),e.length>0?this.model.set("repeats_rota",e):$(t.target).toggleClass("selected")},n.prototype.months_of_year_clicked=function(t){var e;$(t.target).toggleClass("selected"),e=_.map(this.$("table.months_of_year .selected"),function(t){return $(t).data("value")}),this.model.set("repeats_yearly_each_months_of_the_year",e)},n.prototype.showOnlyOptionsForRepeat=function(t){var e;e=this.$el.find("select#repeats option").not(function(){return!this.selected}).val(),this.$el.find("li.repeats").hide(),this.$el.find("li."+e).show()},n.prototype.close_facebox=function(){return $(document).trigger("close.facebox"),!1},n.prototype.saving=function(){return this.model.trigger("saving",this.model),!1},n.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON())),this.model.unset("error_messages"),this.model.unset("errors"),this.addDatepickers(),this.stickit(),this.showOnlyOptionsForRepeat(),this.hideSaveAndCancel(),this.hideSummaryColumns(),this},n.prototype.hideSummaryColumns=function(){if("Total"!==this.model.get("breakdown_total_title"))return this.$el.find(".premium").hide(),this.$el.find(".non_premium").hide(),this.tableColumnFixIE8()},n.prototype.tableColumnFixIE8=function(){return _.each(_.range(0,4),function(t){var e;e=this.$el.find("table.summary")[t],e.style.display="none",window.setTimeout(function(){e.style.display=""},0)},this)},n.prototype.addDatepickers=function(){this.$el.find("#from_date").datepicker({dateFormat:"yy-mm-dd"}),this.$el.find("#until_date").datepicker({dateFormat:"yy-mm-dd"})},n.prototype.hideSaveAndCancel=function(){"complete"===window.job_plan.get("state")&&(this.$el.find(".save").hide(),this.$el.find(".cancel").hide())},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.JobContentRow=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("view","job_content_row",this)},n.prototype.className="job-content-row",n.prototype.tagName="tr",n.prototype.template=HandlebarsTemplates.job_content_row,n.prototype.events={"click .edit":function(){return this.model.trigger("edit"),!1},"click .destroy":"destroy"},n.prototype.destroy=function(t){t.preventDefault(),confirm("Are you sure you want to remove this activity?")&&this.model.trigger("deleting")},n.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON())),this.delegateEvents(),this},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.JobContentSortPicker=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.bindings={"input.sort":"sort_method"},n.prototype.template=HandlebarsTemplates.job_content_sort_picker,n.prototype.render=function(){return this.$el.html(this.template()),this.stickit(),this},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.JobContentTable=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("view","job_content_table",this),this.listenTo(JPApp.dispatcher,"collection:job_contents:sync collection:job_contents:destroy",this.render),this.listenTo(window.job_plan,"change:sort_method",this.render),this.row_views=[]},n.prototype.template=HandlebarsTemplates.job_content_table,n.prototype.render=function(){return _.each(this.row_views,function(t){t.remove()},this),this.row_views=[],_.each(this.collection.byNotNew(),function(t){var e;e=new JPApp.Views.JobContentRow({model:t}),this.row_views.push(e)},this),this.$el.html(this.template()),this.$("tbody").empty(),_.each(this.row_views,function(t){this.$("tbody").append(t.render().$el)},this),this.sortable(),this},n.prototype.sortable=function(){var t;"order"===window.job_plan.get("sort_method")?(t=this,this.$("tbody").sortable({update:function(){t.updateOrder()}})):this.hideSortHandle()},n.prototype.hideSortHandle=function(){this.$el.find(".drag_handle").hide(),this.$el.find(".drag_handle_header").hide()},n.prototype.updateOrder=function(){_.each(this.row_views,function(t){t.model.set("order",t.$el.index())}),this.collection.order_updated()},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.JobPlanStatus=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.el="#job-plan-status",n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("view","job_plan_status",this),this.listenTo(this.model,"sync",this.render),this.render()},n.prototype.template=HandlebarsTemplates.job_plan_status,n.prototype.events={"click a.send_for_sign_off":"send_for_sign_off","click a.revert_to_draft":"revert_to_draft","click a.reject_job_plan":"reject_job_plan"},n.prototype.send_for_sign_off=function(){var t;return t=this.model.job_plan_events.add(new JPApp.Models.JobPlanEvent({event_name:"send_for_sign_off"})),t.trigger("sending_for_sign_off"),!1},n.prototype.revert_to_draft=function(){var t;return t=this.model.job_plan_events.add(new JPApp.Models.JobPlanEvent({event_name:"revert_to_draft"})),t.trigger("reverting_to_draft"),!1},n.prototype.reject_job_plan=function(){var t;return t=this.model.job_plan_events.add(new JPApp.Models.JobPlanEvent({event_name:"reject_job_plan"})),t.trigger("rejecting_job_plan"),!1},n.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON())),this.delegateEvents(),this},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.NavCol=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.el="#nav-col",n.prototype.nav_row_views=[],n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("view","nav_col",this),this.render()},n.prototype.template=HandlebarsTemplates.nav_col,n.prototype.render=function(){this.$el.html(this.template()),this.collection.each(function(t,e){this.$el.append(t.nav_view.render({number:e}).$el)},this)},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e}
;JPApp.Views.NavRow=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("view","nav_row",this)},n.prototype.className="nav-row",n.prototype.template=HandlebarsTemplates.nav_row,n.prototype.render=function(t){return this.$el.html(this.template($.extend(this.model.toJSON(),t))),this},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.NewActivity=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("view","new_activity",this)},n.prototype.events={"click a.new_activity":"new_activity"},n.prototype.new_activity=function(t){t.preventDefault(),this.model.trigger("new_activity",this.model)},n.prototype.className="new_activity",n.prototype.template=HandlebarsTemplates.new_activity,n.prototype.render=function(){return this.$el.html(this.template()),this},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.OnCallActivitiesTable=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("view","on_call_activities_table",this),this.listenTo(JPApp.dispatcher,"collection:job_contents:sync collection:job_contents:destroy",this.render),this.row_views=[]},n.prototype.template=HandlebarsTemplates.job_content_table,n.prototype.render=function(){var t;return _.each(this.row_views,function(t){t.remove()},this),this.row_views=[],t=this.collection.filter(function(t){return t.get("on_call")}),_.each(t,function(t){var e;e=new JPApp.Views.JobContentRow({model:t}),this.row_views.push(e)},this),this.$el.html(this.template()),this.$("tbody").empty(),_.each(this.row_views,function(t){this.$("tbody").append(t.render().$el)},this),this},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.OverlappingEventRow=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.tagName="tbody",n.prototype.className=function(){return"overlapping-event-row"+this.model.get("day_name")},n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("view","overlapping-event-row",this),this.render()},n.prototype.events={"click .edit":function(t){var e;return e=$(getTarget(t)).closest("tr").attr("data-job-content-id"),window.job_contents.find({id:e}).trigger("edit"),!1},"click .destroy":"destroy"},n.prototype.destroy=function(t){var e;t.preventDefault(),e=$(getTarget(t)).closest("tr").attr("data-job-content-id"),confirm("Are you sure you want to remove this activity?")&&window.job_contents.find({id:e}).trigger("deleting")},n.prototype.template=HandlebarsTemplates.overlapping_event_row,n.prototype.render=function(){var t;return t=this.template(this.model.toJSON()),this.$el.html(t),this},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.OverlappingEventsTable=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("view","overlapping_events_table",this),this.child_views=[],this.listenTo(this.collection,"sync",this.render_day_rows),this.listenTo(this.collection,"sync",this.toggleSummary),this.toggleSummary(),this.render()},n.prototype.toggleSummary=function(){this.child_views.length>=10?$("#summary").show():$("#summary").hide()},n.prototype.template=HandlebarsTemplates.overlapping_events_table,n.prototype.render=function(){this.$el.html(this.template())},n.prototype.render_day_rows=function(){var t;_.each(this.child_views,function(t){t.remove()},this),this.child_views=[],t=this,this.collection.each(function(e){var n;n=new JPApp.Views.OverlappingEventRow({model:e}),t.child_views.push(n),t.$("table#overlapping-events").append(n.el)})},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.SectionView=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.className="section",n.prototype.render=function(){return this.$el.html(this.template()),this},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.AdditionalExternal=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(t){JPApp.Helpers.PublishEvents("view","additional_external",this),this.ars_table_view=new JPApp.Views.ARSTableBodyView({collection:window.job_contents}),this.ars_notes_view=new JPApp.Views.ARSNotesTableBodyView({collection:window.ars_notes}),this.listenTo(window.ars_notes,"edit",this.editARSNote),this.render()},n.prototype.events={"click .add-ars-note":"newARSNote"},n.prototype.newARSNote=function(){return this.$("#ars-note-forms").append((new JPApp.Views.ARSNoteFormView).$el),!1},n.prototype.editARSNote=function(t){this.$("#ars-note-forms").append(new JPApp.Views.ARSNoteFormView({model:t}).$el)},n.prototype.template=HandlebarsTemplates.additional_external,n.prototype.render=function(){return this.$el.html(this.template()),this.ars_table_view.setElement(this.$("table.ars tbody")),this.ars_notes_view.setElement(this.$("table#ars_notes tbody")),this.$(".rc.job_plan_gn_additional_responsibilities").html($("#slugs .job_plan_gn_additional_responsibilities").html()),this},n}(JPApp.Views.SectionView)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.AdditionalPAs=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(t){JPApp.Helpers.PublishEvents("view","additional_pas",this),this.apa_activities_table=new JPApp.Views.APAActivitiesTable({collection:window.job_contents}),this.atc_activities_table=new JPApp.Views.ATCActivitiesTable({collection:window.job_contents}),this.render()},n.prototype.bindings={"input.private_practice":"private_practice","input.in_job_plan":"in_job_plan","input.additional_activity":"additional_activity"},n.prototype.events={"click .button.save":function(){return this.model.save(),!1},"click .button.cancel":function(){return this.model.fetch(),!1}},n.prototype.template=HandlebarsTemplates.additional_pas,n.prototype.render=function(){return this.$el.html(this.template()),this.apa_activities_table.setElement(this.$("#apa_activities")).render(),this.atc_activities_table.setElement(this.$("#atc_activities")).render(),this.$(".rc.job_plan_gn_additional_programmed_activities").html($("#slugs .job_plan_gn_additional_programmed_activities").html()),this.stickit(),this},n}(JPApp.Views.SectionView)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.FeePayingServices=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(t){JPApp.Helpers.PublishEvents("view","fee_paying_services",this),this.render()},n.prototype.bindings={"input.fee_paying_services":"fee_paying_services","input.fee_in_contract":"fee_in_contract"},n.prototype.events={"click .button.save":function(){return this.model.save(),!1},"click .button.cancel":function(){return this.model.fetch(),!1}},n.prototype.template=HandlebarsTemplates.fee_paying_services,n.prototype.render=function(){return this.$el.html(this.template()),this.$(".rc.job_plan_gn_fee_paying_services").html($("#slugs .job_plan_gn_fee_paying_services").html()),this.stickit(),this},n}(JPApp.Views.SectionView)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.GeneralDiscussion=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(t){JPApp.Helpers.PublishEvents("view","general_discussion",this),this.edocs_table=new JPApp.Views.EdocsTable({collection:window.edocs}),this.new_attachment_view=new NewAttachmentView({model:new JPApp.Models.Edoc,type:"edocs",user_id:window.job_plan.get("owner_id")}),this.render()},n.prototype.template=HandlebarsTemplates.general_discussion,n.prototype.bindings={"textarea.general_discussion":"general_discussion"},n.prototype.events={"click .button.save":function(){return this.model.save(),!1},"click .button.cancel":function(){return this.model.fetch(),!1}},n.prototype.render=function(){return this.$el.html(this.template(window.nav_rows.find(function(t){return"general_discussion"===t.id}).toJSON())),this.edocs_table.setElement(this.$("#edocs")).render(),this.new_attachment_view.setElement(this.$("#edoc_form")).render(),this.$(".rc").html($("#slugs .job_plan_gn_general_discussion").html()),this.stickit(),this},n}(JPApp.Views.SectionView)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.GeneralInfo=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("view","general_info",this),this.listenTo(this.model,"error sync",this.render),this.render()},n.prototype.template=HandlebarsTemplates.general_info,n.prototype.bindings={"input.effective_date":{observe:"effective_date",onGet:function(t){return this.model.get("effective_date_formatted")}},"input.working_weeks":{observe:"working_weeks"},"input.job_title":{observe:"job_title"},"select#directorate":{observe:"directorate",selectOptions:{collection:"JPApp.directorates",labelPath:"name",valuePath:"name",defaultOption:{label:"Choose one...",value:null}}},"select#speciality":{observe:"speciality",selectOptions:{collection:"window.specialities",labelPath:"name",valuePath:"name",defaultOption:{label:"Choose one...",value:null}}},"select#default_employer":{observe:"default_employer",selectOptions:{collection:"JPApp.common_employers",labelPath:"name",valuePath:"name",defaultOption:{label:"Choose one...",value:null}}},"input.default_location":{observe:"default_location",visible:function(){return!JPApp.has_location_dropdown}},"select#default_location_dropdown":{observe:"default_location",onSet:function(t){return this.model.set("default_location",t),t},selectOptions:{collection:"JPApp.job_content_locations",labelPath:"name",valuePath:"name",defaultOption:{label:"Choose one...",value:null}},visible:function(){return JPApp.has_location_dropdown}},"input.contract_type":{observe:"contract_type"},"input.european_working_directive_opt_out":{observe:"european_working_directive_opt_out"},"input.current_pay_threshold":{observe:"current_pay_threshold"}},n.prototype.events={"click .button.save":function(){return this.model.save(),!1},"click .button.cancel":function(){return this.model.fetch(),!1}},n.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON())),this.$(".rc.job_plan_gn_general_information").html($("#slugs .job_plan_gn_general_information").html()),this.stickit(),this},n}(JPApp.Views.SectionView)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.Instructions=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("view","instructions",this),this.render()},n.prototype.template=HandlebarsTemplates.instructions,n.prototype.render=function(){return this.$el.html(this.template()),this.$(".rc").html($("#slugs .job_plan_instructions").html()),this},n}(JPApp.Views.SectionView)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.Meetings=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(t){JPApp.Helpers.PublishEvents("view","meetings",this),this.render()},n.prototype.template=HandlebarsTemplates.meetings,n.prototype.bindings={"textarea.meetings_info":"meetings_info"},n.prototype.events={"click .button.save":function(){return this.model.save(),!1},"click .button.cancel":function(){return this.model.fetch(),!1}},n.prototype.render=function(){return this.$el.html(this.template()),this.$(".rc.job_plan_gn_meetings").html($("#slugs .job_plan_gn_meetings").html()),this.stickit(),this},n}(JPApp.Views.SectionView)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.Objectives=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(t){JPApp.Helpers.PublishEvents("view","objectives",this),this.speciality_objectives_view=new JPApp.Views.SMARTTableBodyView({collection:window.speciality_objectives}),this.personal_objectives_view=new JPApp.Views.SMARTTableBodyView({collection:window.personal_objectives}),this.listenTo(window.speciality_objectives,"edit",this.editSpecialityObjective),this.listenTo(window.personal_objectives,"edit",this.editPersonalObjective),this.render()},n.prototype.events={"click .new-speciality-objective":"newSpecialityObjective","click .new-personal-objective":"newPersonalObjective"},n.prototype.template=HandlebarsTemplates.objectives,n.prototype.newSpecialityObjective=function(){return this.$("#speciality-objective-forms").append(new JPApp.Views.SMARTFormView({collection:window.speciality_objectives}).$el),!1},n.prototype.editSpecialityObjective=function(t){this.$("#speciality-objective-forms").append(new JPApp.Views.SMARTFormView({model:t,collection:window.speciality_objectives}).$el)},n.prototype.newPersonalObjective=function(){var t;return t=new JPApp.Models.PersonalObjective,this.$("#personal-objective-forms").append(new JPApp.Views.SMARTFormView({model:t,collection:window.personal_objectives}).$el),!1},n.prototype.editPersonalObjective=function(t){this.$("#personal-objective-forms").append(new JPApp.Views.SMARTFormView({model:t,collection:window.personal_objectives}).$el)},n.prototype.render=function(){return this.$el.html(this.template()),this.speciality_objectives_view.setElement(this.$("table#speciality_objectives tbody")),this.personal_objectives_view.setElement(this.$("table#personal_objectives tbody")),this.$(".rc.job_plan_gn_objectives").html($("#slugs .job_plan_gn_objectives").html()),this.$(".rc.job_plan_trust_objectives").html($("#slugs .job_plan_trust_objectives").html()),this.$(".rc.job_plan_gn_speciality_objectives").html($("#slugs .job_plan_gn_speciality_objectives").html()),this.$(".rc.job_plan_gn_personal_objectives").html($("#slugs .job_plan_gn_personal_objectives").html()),this},n}(JPApp.Views.SectionView)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.OnCallSupplement=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(t){JPApp.Helpers.PublishEvents("view","on_call_supplement",this),this.on_call_activities_table=new JPApp.Views.OnCallActivitiesTable({collection:window.job_contents}),this.render()},n.prototype.template=HandlebarsTemplates.on_call_supplement,n.prototype.bindings={"input.ocas_freq":{observe:"ocas_freq"},"select#on_call_category":{observe:"on_call_category",selectOptions:{collection:[{name:"A"},{name:"B"},{name:"SAS"}],labelPath:"name",valuePath:"name",defaultOption:{label:"Choose one...",value:null}}},"input.on_call_supplement":"on_call_supplement","textarea.on_call_rota":"on_call_rota"},n.prototype.events={"click .button.save":function(){return this.model.save(),!1},"click .button.cancel":function(){return this.model.fetch(),!1}},n.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON())),this.on_call_activities_table.setElement(this.$("#on_call_activities")).render(),this.$(".rc.job_plan_gn_on_call_supplement").html($("#slugs .job_plan_gn_on_call_supplement").html()),this.stickit(),this},n}(JPApp.Views.SectionView)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.OtherAgreements=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(t){JPApp.Helpers.PublishEvents("view","other_agreements",this),this.render()},n.prototype.template=HandlebarsTemplates.other_agreements,n.prototype.bindings={"textarea.other_agreements":"other_agreements"},n.prototype.events={"click .button.save":function(){return this.model.save(),!1},"click .button.cancel":function(){return this.model.fetch(),!1}},n.prototype.render=function(){return this.$el.html(this.template()),this.$(".rc.job_plan_gn_other_agreements").html($("#slugs .job_plan_gn_other_agreements").html()),this.stickit(),this},n}(JPApp.Views.SectionView)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.SignOff=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.id="sign_off",n.prototype.initialize=function(t){JPApp.Helpers.PublishEvents("view","sign_off",this),this.listenTo(JPApp.dispatcher,"collection:signatories:sync collection:signatories:destroy",this.render)},n.prototype.template=HandlebarsTemplates.sign_off,n.prototype.render=function(){return this.$el.html(this.template()),window.signatories.each(function(t){t.signature_view=t.signature_view||new JPApp.Views.SignatureRowView({model:t}),this.$("tbody").append(t.signature_view.render().$el)},this),this.$(".rc.job_plan_gn_sign_off").html($("#slugs .job_plan_gn_sign_off").html()),this},n}(JPApp.Views.SectionView)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.Signatories=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.id="signatories",n.prototype.initialize=function(t){JPApp.Helpers.PublishEvents("view","signatories",this),this.signatory_form_view=new JPApp.Views.SignatoryFormView,this.signatory_table_view=new JPApp.Views.SignatoryTableBodyView({collection:window.signatories}),_.isEmpty(window.compulsory_signator_roles)||(this.compulsory_signator_roles_view=new JPApp.Views.SignatorRoles({collection:window.compulsory_signator_roles,compulsory:!0})),_.isEmpty(window.non_compulsory_signator_roles)||(this.non_compulsory_signator_roles_view=new JPApp.Views.SignatorRoles({collection:window.non_compulsory_signator_roles,compulsory:!1})),this.listenTo(window.signatories,"edit",this.editSignatory),this.render()},n.prototype.events={"click .new-signatory":"newSignatory"},n.prototype.template=HandlebarsTemplates.signatories,n.prototype.newSignatory=function(){return this.$("#signatory-forms").append((new JPApp.Views.SignatoryFormView).$el),!1},n.prototype.editSignatory=function(t){this.$("#signatory-forms").append(new JPApp.Views.SignatoryFormView({model:t}).$el)},n.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON())),this.compulsory_signator_roles_view.setElement(this.$("#compulsory_signator_roles")).render(),this.non_compulsory_signator_roles_view.setElement(this.$("#non_compulsory_signator_roles")).render(),this.signatory_table_view.setElement(this.$("table.additional-signatories tbody")),this.$(".rc.job_plan_gn_signators").html($("#slugs .job_plan_gn_signators").html()),this},n}(JPApp.Views.SectionView)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.SPANotes=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(t){JPApp.Helpers.PublishEvents("view","spa_notes",this),this.spa_table_view=new JPApp.Views.SPATableBodyView({collection:window.job_contents}),this.spa_notes_view=new JPApp.Views.SPANotesTableBodyView({collection:window.spa_notes}),this.listenTo(window.spa_notes,"edit",this.editSPANote),this.render()},n.prototype.events={"click .add-spa-note":"newSPANote"},n.prototype.newSPANote=function(){return this.$("#spa-note-forms").append((new JPApp.Views.SPANoteFormView).$el),!1},n.prototype.editSPANote=function(t){this.$("#spa-note-forms").append(new JPApp.Views.SPANoteFormView({model:t}).$el)},n.prototype.template=HandlebarsTemplates.spa_notes,n.prototype.render=function(){return this.$el.html(this.template()),this.spa_table_view.setElement(this.$("table.spas tbody")),this.spa_notes_view.setElement(this.$("table#spa_notes tbody")),this.$(".rc.job_plan_gn_spa_activity").html($("#slugs .job_plan_gn_spa_activity").html()),this},n}(JPApp.Views.SectionView)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.SupportingResources=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(t){JPApp.Helpers.PublishEvents("view","supporting_resources",this),this.render()},n.prototype.bindings={"textarea.staffing_support":"staffing_support","textarea.accomodation":"accomodation","textarea.equipment":"equipment","textarea.any_other_resources":"any_other_resources"},n.prototype.events={"click .button.save":function(){return this.model.save(),!1},"click .button.cancel":function(){return this.model.fetch(),!1}},n.prototype.template=HandlebarsTemplates.supporting_resources,n.prototype.render=function(){return this.$el.html(this.template()),this.$(".rc.job_plan_gn_supporting_resources").html($("#slugs .job_plan_gn_supporting_resources").html()),this.stickit(),this},n}(JPApp.Views.SectionView)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.Timetable=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.id="timetable",n.prototype.initialize=function(t){JPApp.Helpers.PublishEvents("view","timetable",this),this.new_activity=new JPApp.Views.NewActivity({model:this}),this.timetable_tabs=new JPApp.Views.TimetableTabs,this.calendar_view=new JPApp.Views.CalendarTable({model:window.calendar_selector,collection:window.calendar_table_day_rows}),this.job_content_view=new JPApp.Views.JobContentForm,this.breakdown_job_content_table=new JPApp.Views.BreakdownJobContentTable({collection:window.job_contents}),this.job_content_table=new JPApp.Views.JobContentTable({collection:window.job_contents}),this.job_content_sort_picker=new JPApp.Views.JobContentSortPicker({model:window.job_plan}),JPApp.has_overlap_check&&(this.warning_view=new JPApp.Views.OverlappingEventsTable({collection:window.overlapping_events})),this.contracted_pas_view=new JPApp.Views.ContractedPAs({model:window.job_plan}),this.listenTo(JPApp.dispatcher,"model:job_content:edit",this.renderFormJC,this),this.listenTo(JPApp.dispatcher,"view:timetable:new_activity",this.renderNewFormJC,this),this.render()},n.prototype.renderNewFormJC=function(){this.job_content_view.remove(),this.job_content_view=new JPApp.Views.JobContentForm({model:window.job_contents.add({})}),$.facebox(this.job_content_view.render().$el),setPlaceholders()},n.prototype.renderFormJC=function(t){this.job_content_view.remove(),this.job_content_view=new JPApp.Views.JobContentForm({model:t}),$.facebox(this.job_content_view.render().$el),setPlaceholders()},n.prototype.template=HandlebarsTemplates.timetable,n.prototype.jc_row_template=HandlebarsTemplates.job_content_row,n.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON())),this.new_activity.setElement(this.$("#new-activity")).render(),this.timetable_tabs.setElement(this.$("#timetable-tabs")).render(),this.calendar_view.setElement(this.$("#calendar")).render(),this.breakdown_job_content_table.setElement(this.$("#breakdown_job_contents")).render(),this.job_content_table.setElement(this.$("#job-contents")).render(),this.job_content_sort_picker.setElement(this.$("#job-content-sort-picker")).render(),JPApp.has_overlap_check&&this.warning_view.setElement(this.$("#warning")).render(),this.contracted_pas_view.setElement(this.$("#contracted-pas")).render(),this.$(".rc.job_plan_gn_job_content").html($("#slugs .job_plan_gn_job_content").html()),this.stickit(),this},n}(JPApp.Views.SectionView)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.SignatorRoles=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(t){JPApp.Helpers.PublishEvents("view","signator_roles",this)},n.prototype.template=function(t){return HandlebarsTemplates[this.collection.compulsory?"compulsory_signator_roles":"non_compulsory_signator_roles"](t)},n.prototype.render=function(){return this.$el.append(this.template({collection:this.collection.toJSON(),title:window.suggested_signatories_title})),this.collection.each(function(t){t.signatory_role_view=t.signatory_role_view||new JPApp.Views.SignatoryRole({model:t}),this.$(".signatory_roles").append(t.signatory_role_view.render().$el)},this),this},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.SignatoryFormView=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.className="signatory",n.prototype.tagName="form",n.prototype.initialize=function(t){JPApp.Helpers.PublishEvents("view","signatory_form",this),this.model=this.model||new JPApp.Models.Signatory,this.listenTo(this.model,"sync",this.remove),this.listenTo(this.model,"error",this.render),this.render()},n.prototype.bindings={"input.tier":"tier","input.email":"email","input.first_name":"first_name","input.last_name":"last_name","input.role":"role"},n.prototype.template=HandlebarsTemplates.signatory_form,n.prototype.events={"click .button.save":function(){return window.signatories.create(this.model),!1},"click .button.cancel":function(){return this.remove(),!1}},n.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON())),this.model.unset("error_messages"),this.model.unset("errors"),this.stickit(),this},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.SignatoryFromRoleForm=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.className="signatory-from-role",n.prototype.tagName="form",n.prototype.initialize=function(t){JPApp.Helpers.PublishEvents("view","signatory_from_role_form",this),this.model=this.model||new JPApp.Models.Signatory,this.listenTo(this.model,"error",this.render),this.role=t.role,this.render()},n.prototype.bindings={"select.possible-signatories":{observe:"email",selectOptions:{collection:"this.role.possible_signatories",labelPath:"full_name",valuePath:"email",defaultOption:{label:"Choose one...",value:null}},onSet:function(t){var e;return e=this.role.possible_signatories.findWhere({email:t}),this.model.set({first_name:e.get("first_name"),last_name:e.get("last_name"),role:this.role.get("name")}),t}}},n.prototype.template=HandlebarsTemplates.signatory_from_role_form,n.prototype.events={"click .button.add-signatory":function(){return window.signatories.create(this.model),!1}},n.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON())),this.model.unset("error_messages"),this.model.unset("errors"),this.stickit(),this},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.SignatoryRole=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("view","signatory_role",this),this.listenTo(JPApp.dispatcher,"view:signatory_table:render",this.render)},n.prototype.template=HandlebarsTemplates.signatory_role,n.prototype.render=function(){return this.$el.html(this.template(_.extend(this.model.toJSON(),{signatories:this.model.signatories,can_create_signatories:window.job_plan.get("can_create_signatories")}))),this.$(".new-signatory-from-role").append(new JPApp.Views.SignatoryFromRoleForm({role:this.model}).$el),this},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.SignatoryRowView=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.tagName="tr",n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("view","signatory_row",this),this.listenTo(this.model,"destroy",this.remove)},n.prototype.events={"click .destroy":"destroy","click .edit":"edit"},n.prototype.template=HandlebarsTemplates.signatory_row,n.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON())),this.delegateEvents(),this},n.prototype.edit=function(t){t.preventDefault(),this.model.trigger("edit",this.model)},n.prototype.destroy=function(t){t.preventDefault(),
confirm("Are you sure you want to remove this signatory?")&&this.model.destroy()},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.SignatoryTableBodyView=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("view","signatory_table",this),this.collection.fetch(),this.listenTo(JPApp.dispatcher,"collection:signatories:sync",this.render)},n.prototype.template=HandlebarsTemplates.signatory_table,n.prototype.render=function(){return this.$el.append(this.template()),this.collection.each(function(t){this.$("tr.blank").remove(),t.row_view=t.row_view||new JPApp.Views.SignatoryRowView({model:t}),this.$el.append(t.row_view.render().$el)},this),this.trigger("render"),this},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.SignatureRowView=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.tagName="tr",n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("view","signature_row",this)},n.prototype.template=HandlebarsTemplates.signature_row,n.prototype.events={"click a.sign":"sign","click a.revoke":"revoke","click a.request-signature":"requestSignature"},n.prototype.sign=function(){var t;return t=this.model.signature_events.add(new JPApp.Models.SignatureEvent({event_name:"sign"})),t.trigger("signing"),!1},n.prototype.revoke=function(){var t;return t=this.model.signature_events.add(new JPApp.Models.SignatureEvent({event_name:"revoke"})),t.trigger("revoking"),!1},n.prototype.requestSignature=function(){var t;return t=this.model.signature_events.add(new JPApp.Models.SignatureEvent({event_name:"request_signature"})),t.trigger("requesting_signature"),!1},n.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON())),this.delegateEvents(),this},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.SMARTFormView=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.className="smart",n.prototype.tagName="form",n.prototype.initialize=function(t){JPApp.Helpers.PublishEvents("view","smart_form",this),this.model=this.model||new JPApp.Models.SpecialityObjective,this.listenTo(this.model,"sync",this.remove),this.listenTo(this.model,"error",this.render),this.render()},n.prototype.bindings={"textarea.specific":"specific","textarea.measurable":"measurable","textarea.attainable":"attainable","textarea.relevant":"relevant","textarea.timely":"timely"},n.prototype.template=HandlebarsTemplates.smart_form,n.prototype.events={"click .button.save":function(){return this.collection.create(this.model),!1},"click .button.cancel":function(){return this.remove(),!1}},n.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON())),this.model.unset("error_messages"),this.model.unset("errors"),this.stickit(),this},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.SMARTRowView=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.tagName="tr",n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("view","smart_row",this),this.listenTo(this.model,"destroy",this.remove)},n.prototype.events={"click .destroy":"destroy","click .edit":"edit"},n.prototype.template=HandlebarsTemplates.smart_row,n.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON())),this},n.prototype.edit=function(t){t.preventDefault(),this.model.trigger("edit",this.model)},n.prototype.destroy=function(t){t.preventDefault(),confirm("Are you sure you want to remove this objective?")&&this.model.destroy()},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.SMARTTableBodyView=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("view","smart_table",this),this.collection.fetch(),this.listenTo(JPApp.dispatcher,"collection:speciality_objectives:sync",this.render),this.listenTo(JPApp.dispatcher,"collection:personal_objectives:sync",this.render)},n.prototype.template=HandlebarsTemplates.smart_table,n.prototype.render=function(){return this.$el.append(this.template()),this.collection.each(function(t){this.$("tr.blank").remove(),t.row_view=t.row_view||new JPApp.Views.SMARTRowView({model:t}),this.$el.append(t.row_view.render().$el)},this),this.trigger("render"),this},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.SPANoteFormView=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.className="spa-note",n.prototype.tagName="form",n.prototype.initialize=function(t){JPApp.Helpers.PublishEvents("view","spa_note_form",this),this.model=this.model||new JPApp.Models.SPANote,this.listenTo(this.model,"sync",this.remove),this.listenTo(this.model,"error",this.render),this.render()},n.prototype.bindings={"textarea.description":"description","input.spa_number":"spa_number"},n.prototype.template=HandlebarsTemplates.spa_note_form,n.prototype.events={"click .button.save":function(){return window.spa_notes.create(this.model),!1},"click .button.cancel":function(){return this.remove(),!1}},n.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON())),this.model.unset("error_messages"),this.model.unset("errors"),this.stickit(),this},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.SPANoteRowView=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.tagName="tr",n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("view","spa_note_row",this),this.listenTo(this.model,"destroy",this.remove)},n.prototype.events={"click .destroy":"destroy","click .edit":"edit"},n.prototype.template=HandlebarsTemplates.spa_note_row,n.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON())),this},n.prototype.edit=function(t){t.preventDefault(),this.model.trigger("edit",this.model)},n.prototype.destroy=function(t){t.preventDefault(),confirm("Are you sure you want to remove this SPA note?")&&this.model.destroy()},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.SPANotesTableBodyView=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("view","spa_notes_table_body",this),this.collection.fetch(),this.listenTo(JPApp.dispatcher,"collection:spa_notes:sync",this.render)},n.prototype.render=function(){return this.collection.each(function(t){this.$("tr.blank").remove(),t.row_view=t.row_view||new JPApp.Views.SPANoteRowView({model:t}),this.$el.append(t.row_view.render().$el)},this),this},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.SPATableBodyView=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("view","spa_table",this),this.listenTo(JPApp.dispatcher,"collection:job_contents:sync",this.render)},n.prototype.template=HandlebarsTemplates.spa_table,n.prototype.render=function(){var t;return t={rows:_.map(this.collection.byCategory("SPA"),function(t){return t.toJSON()})},this.$el.html(this.template(t)),this},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.TimetableTabs=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("view","timetable_tabs",this),this.listenTo(window.job_contents,"remove sync",this.checkWarning),this.listenTo(JPApp.dispatcher,"collection:overlapping_events:sync",this.checkWarning)},n.prototype.events={"click li#all-activities-tab":"activateAllActivities","click li#breakdown-tab":"activateBreakdown","click li#calendar-tab":"activateCalendar","click li#warning-tab":"activateWarning"},n.prototype.hideAllTabs=function(){$("#timetable-tabs .active").removeClass("active"),$("#all-activities").hide(),$("#breakdown").hide(),$("#calendar").hide(),$("#warning").hide()},n.prototype.activateAllActivities=function(){this.hideAllTabs(),$("#all-activities-tab").addClass("active"),$("#all-activities").show()},n.prototype.activateBreakdown=function(){this.hideAllTabs(),$("#breakdown-tab").addClass("active"),$("#breakdown").show()},n.prototype.activateCalendar=function(){this.hideAllTabs(),$("#calendar-tab").addClass("active"),$("#calendar").show()},n.prototype.activateWarning=function(){this.hideAllTabs(),$("#warning-tab").addClass("active"),$("#warning").show()},n.prototype.checkWarning=function(){JPApp.has_overlap_check&&window.overlapping_events.length>0?this.addWarning():this.removeWarning()},n.prototype.addWarning=function(){this._warning_appended||(this._warning_appended=!0,this.$("#subnav").append(this.warningTemplate()))},n.prototype.removeWarning=function(){this._warning_appended&&($("#warning-tab").hasClass("active")&&this.activateCalendar(),this._warning_appended=!1,this.$("#warning-tab").remove())},n.prototype.className="timetable-tabs",n.prototype.template=HandlebarsTemplates.timetable_tabs,n.prototype.warningTemplate=HandlebarsTemplates.warning_tab,n.prototype.render=function(){return this.$el.html(this.template()),this},n}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};JPApp.Views.TitleHeader=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.el="#title-header",n.prototype.initialize=function(){JPApp.Helpers.PublishEvents("view","title_header",this),this.listenTo(this.model,"sync",this.render),this.render()},n.prototype.template=HandlebarsTemplates.title_header,n.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON())),this.delegateEvents(),this},n}(Backbone.View)}.call(this);